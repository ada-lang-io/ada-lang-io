"use strict";(self.webpackChunkada_lang_io=self.webpackChunkada_lang_io||[]).push([[1813],{72842:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>h,default:()=>j,frontMatter:()=>d,metadata:()=>u,toc:()=>p});var s=t(74848),i=t(28453),r=t(13842),a=t(91435),o=t(21432),l=t(79162),c=t(34421);const d={sidebar_position:166},h="D.12 Other Optimizations and Determinism Rules",u={id:"arm/AA-D/AA-D.12",title:"D.12 Other Optimizations and Determinism Rules",description:"This Reference Manual output has not been verified,",source:"@site/docs/arm/AA-D/AA-D.12.mdx",sourceDirName:"arm/AA-D",slug:"/arm/AA-D/AA-D.12",permalink:"/docs/arm/AA-D/AA-D.12",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:166,frontMatter:{sidebar_position:166},sidebar:"referenceManualSidebar",previous:{title:"D.11 Asynchronous Task Control",permalink:"/docs/arm/AA-D/AA-D.11"},next:{title:"D.13 The Ravenscar and Jorvik Profiles",permalink:"/docs/arm/AA-D/AA-D.13"}},m={},p=[{value:"Implementation Requirements",id:"implementation-requirements",level:4},{value:"Documentation Requirements",id:"documentation-requirements",level:4},{value:"Metrics",id:"metrics",level:4}];function x(e){const n={a:"a",admonition:"admonition",h1:"h1",h4:"h4",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"d12-other-optimizations-and-determinism-rules",children:"D.12 Other Optimizations and Determinism Rules"}),"\n",(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsxs)(n.p,{children:["This Reference Manual output has not been verified,\nand may contain omissions or errors.\nReport any problems on the ",(0,s.jsx)(n.a,{href:"https://github.com/ada-lang-io/ada-lang-io/issues/20",children:"tracking issue"})]})}),"\n","\n",(0,s.jsx)(l.A,{children:"1/3"}),"\n",(0,s.jsx)(c.A,{items:["AI05-0299-1"]}),"\n",(0,s.jsxs)("p",{children:["[This subclause describes various requirements for improving the response and determinism in a real-time system.] ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsx)(n.h4,{id:"implementation-requirements",children:"Implementation Requirements"}),"\n",(0,s.jsx)(l.A,{children:"2"}),"\n",(0,s.jsxs)("p",{children:["If the implementation blocks interrupts (see ",(0,s.jsx)("a",{href:"/docs/arm/AA-C/AA-C.3",children:"C.3"}),") not as a result of direct user action (e.g. an execution of a protected action) there shall be an upper bound on the duration of this blocking. ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(a.A,{children:[(0,s.jsx)(l.A,{children:"2.a"}),(0,s.jsx)(r.A,{type:"aarm",aarm:"ramification",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)("strong",{}),"The implementation shall not allow itself to be interrupted when it is in a state where it is unable to support all the language-defined operations permitted in the execution of interrupt handlers. (see ",(0,s.jsx)("a",{href:"/docs/arm/AA-9/AA-9.5#Subclause_9.5.1",children:"9.5.1"}),"). ",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsx)(l.A,{children:"3"}),"\n",(0,s.jsxs)("p",{children:["The implementation shall recognize entry-less protected types. The overhead of acquiring the execution resource of an object of such a type (see ",(0,s.jsx)("a",{href:"/docs/arm/AA-9/AA-9.5#Subclause_9.5.1",children:"9.5.1"}),") shall be minimized. In particular, there should not be any overhead due to evaluating ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-9/AA-9.5#S0262",children:"entry_barrier"})})," ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-4/AA-4.5#S0150",children:"condition"})}),"s. ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(a.A,{children:[(0,s.jsx)(l.A,{children:"3.a"}),(0,s.jsx)(r.A,{type:"aarm",aarm:"implementation-note",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)("strong",{}),"Ideally the overhead should just be a spin-lock. ",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsx)(l.A,{children:"4"}),"\n",(0,s.jsxs)("p",{children:["Unchecked","_","Deallocation shall be supported for terminated tasks that are designated by access types, and shall have the effect of releasing all the storage associated with the task. This includes any run-time system or heap storage that has been implicitly allocated for the task by the implementation.",(0,s.jsx)("br",{})]}),"\n",(0,s.jsx)(n.h4,{id:"documentation-requirements",children:"Documentation Requirements"}),"\n",(0,s.jsx)(l.A,{children:"5"}),"\n",(0,s.jsxs)("p",{children:["The implementation shall document the upper bound on the duration of interrupt blocking caused by the implementation. If this is different for different interrupts or interrupt priority levels, it should be documented for each case. ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(a.A,{children:[(0,s.jsx)(l.A,{children:"5.a/2"}),(0,s.jsxs)(r.A,{type:"aarm",aarm:"note",children:[(0,s.jsx)("em",{children:"This paragraph was deleted."}),(0,s.jsx)("br",{})]})]}),"\n",(0,s.jsxs)(a.A,{children:[(0,s.jsx)(l.A,{children:"5.b/2"}),(0,s.jsx)(r.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)("strong",{children:"Documentation Requirement: "}),"The upper bound on the duration of interrupt blocking caused by the implementation.",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsx)(n.h4,{id:"metrics",children:"Metrics"}),"\n",(0,s.jsx)(l.A,{children:"6"}),"\n",(0,s.jsxs)("p",{children:["The implementation shall document the following metric: ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsx)(l.A,{children:"7"}),"\n",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["The overhead associated with obtaining a mutual-exclusive access to an entry-less protected object. This shall be measured in the following way:",(0,s.jsx)("br",{})]}),(0,s.jsx)(l.A,{children:"8"}),(0,s.jsxs)("li",{children:["For a protected object of the form: ",(0,s.jsx)("br",{})]})]}),"\n",(0,s.jsx)(l.A,{children:"9"}),"\n",(0,s.jsx)(o.A,{language:"ada",children:(0,s.jsxs)(n.p,{children:["protected Lock is","\n","   procedure Set;","\n","   function Read return Boolean;","\n","private","\n","   Flag : Boolean := False;","\n","end Lock;","\n","\n",(0,s.jsx)(l.A,{children:"10"}),"\nprotected body Lock is","\n","   procedure Set is","\n","   begin","\n","      Flag := True;","\n","   end Set;","\n","   function Read return Boolean","\n","   begin","\n","      return Flag;","\n","   end Read;","\n","end Lock;","\n"]})}),"\n",(0,s.jsx)(l.A,{children:"11"}),"\n",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["The execution time, in processor clock cycles, of a call to Set. This shall be measured between the point just before issuing the call, and the point just after the call completes. The function Read shall be called later to verify that Set was indeed called (and not optimized away). The calling task shall have sufficiently high priority as to not be preempted during the measurement period. The protected object shall have sufficiently high ceiling priority to allow the task to call Set.",(0,s.jsx)("br",{})]}),(0,s.jsx)(l.A,{children:"12"}),(0,s.jsxs)("li",{children:["For a multiprocessor, if supported, the metric shall be reported for the case where no contention (on the execution resource) exists [from tasks executing on other processors]. ",(0,s.jsx)("br",{})]})]}),"\n",(0,s.jsxs)(a.A,{children:[(0,s.jsx)(l.A,{children:"12.a/2"}),(0,s.jsx)(r.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)("strong",{children:"Documentation Requirement: "}),"The metrics for entry-less protected objects.",(0,s.jsx)("br",{})]})})]})]})}function j(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}}}]);