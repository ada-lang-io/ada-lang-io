"use strict";(self.webpackChunkada_lang_io=self.webpackChunkada_lang_io||[]).push([[3672],{6051:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>m,contentTitle:()=>h,default:()=>p,frontMatter:()=>c,metadata:()=>a,toc:()=>x});const a=JSON.parse('{"id":"arm/AA-H/AA-H.6","title":"H.6 Pragma Partition_Elaboration_Policy","description":"This Reference Manual output has not been verified,","source":"@site/docs/arm/AA-H/AA-H.6.mdx","sourceDirName":"arm/AA-H","slug":"/arm/AA-H/AA-H.6","permalink":"/docs/arm/AA-H/AA-H.6","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":191,"frontMatter":{"sidebar_position":191},"sidebar":"referenceManualSidebar","previous":{"title":"H.5 Pragma Detect_Blocking","permalink":"/docs/arm/AA-H/AA-H.5"},"next":{"title":"H.7 Extensions to Global and Global\'Class Aspects","permalink":"/docs/arm/AA-H/AA-H.7"}}');var t=n(4848),s=n(8453),r=n(3204),o=n(4220),l=(n(8069),n(8011)),d=n(6465);const c={sidebar_position:191},h="H.6 Pragma Partition_Elaboration_Policy",m={},x=[{value:"Syntax",id:"syntax",level:4},{value:"Post-Compilation Rules",id:"post-compilation-rules",level:4},{value:"Dynamic Semantics",id:"dynamic-semantics",level:4},{value:"Implementation Advice",id:"implementation-advice",level:4},{value:"Implementation Permissions",id:"implementation-permissions",level:4},{value:"Extensions to Ada 95",id:"extensions-to-ada-95",level:4}];function A(e){const i={a:"a",admonition:"admonition",h1:"h1",h4:"h4",header:"header",p:"p",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"h6-pragma-partition_elaboration_policy",children:"H.6 Pragma Partition_Elaboration_Policy"})}),"\n",(0,t.jsx)(i.admonition,{type:"danger",children:(0,t.jsxs)(i.p,{children:["This Reference Manual output has not been verified,\nand may contain omissions or errors.\nReport any problems on the ",(0,t.jsx)(i.a,{href:"https://github.com/ada-lang-io/ada-lang-io/issues/20",children:"tracking issue"})]})}),"\n","\n",(0,t.jsx)(l.A,{children:"1/3"}),"\n",(0,t.jsx)(d.A,{items:["AI95-00265-01","AI05-0299-1"]}),"\n",(0,t.jsxs)("p",{children:["This subclause defines a ",(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/docs/arm/AA-2/AA-2.8#S0019",children:"pragma"})})," for user control over elaboration policy. ",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(i.h4,{id:"syntax",children:"Syntax"}),"\n",(0,t.jsx)(l.A,{children:"2/2"}),"\n",(0,t.jsx)(d.A,{items:["AI95-00265-01"]}),"\n",(0,t.jsxs)("p",{class:"Indented2",children:["The form of a ",(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/docs/arm/AA-2/AA-2.8#S0019",children:"pragma"})})," Partition","_","Elaboration","_","Policy is as follows: ",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(l.A,{children:"3/2"}),"\n",(0,t.jsxs)("p",{class:"Indented2",children:["  ",(0,t.jsx)("strong",{children:"pragma"})," Partition","_","Elaboration","_","Policy (",(0,t.jsxs)("em",{children:["policy","_"]}),(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/docs/arm/AA-2/AA-2.3#S0002",children:"identifier"})}),");",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(l.A,{children:"4/2"}),"\n",(0,t.jsxs)("p",{class:"Indented2",children:["The ",(0,t.jsxs)("em",{children:["policy","_"]}),(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/docs/arm/AA-2/AA-2.3#S0002",children:"identifier"})})," shall be either Sequential, Concurrent or an implementation-defined identifier. ",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(o.A,{children:[(0,t.jsx)(l.A,{children:"4.a/2"}),(0,t.jsx)(r.A,{type:"aarm",aarm:"implementation-defined",children:(0,t.jsxs)(i.p,{children:[(0,t.jsx)("strong",{}),"Implementation-defined ",(0,t.jsxs)("em",{children:["policy","_"]}),(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/docs/arm/AA-2/AA-2.3#S0002",children:"identifier"})}),"s allowed in a ",(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/docs/arm/AA-2/AA-2.8#S0019",children:"pragma"})})," Partition","_","Elaboration","_","Policy.",(0,t.jsx)("br",{})]})})]}),"\n",(0,t.jsxs)(o.A,{children:[(0,t.jsx)(l.A,{children:"4.b/3"}),(0,t.jsx)(r.A,{type:"aarm",aarm:"ramification",children:(0,t.jsxs)(i.p,{children:[(0,t.jsx)("strong",{}),"Note that the Ravenscar profile (see ",(0,t.jsx)("a",{href:"/docs/arm/AA-D/AA-D.13",children:"D.13"}),") has nothing to say about which Partition","_","Elaboration","_","Policy is used. This was intentionally omitted from the profile, as there was no agreement as to whether the Sequential policy should be required for Ravenscar programs. As such it was defined separately. ",(0,t.jsx)("br",{})]})})]}),"\n",(0,t.jsx)(i.h4,{id:"post-compilation-rules",children:"Post-Compilation Rules"}),"\n",(0,t.jsx)(l.A,{children:"5/2"}),"\n",(0,t.jsx)(d.A,{items:["AI95-00265-01"]}),"\n",(0,t.jsxs)("p",{children:["A ",(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/docs/arm/AA-2/AA-2.8#S0019",children:"pragma"})})," Partition","_","Elaboration","_","Policy is a configuration pragma. It specifies the elaboration policy for a partition. At most one elaboration policy shall be specified for a partition.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(l.A,{children:"6/3"}),"\n",(0,t.jsx)(d.A,{items:["AI95-00265-01","AI05-0264-1"]}),"\n",(0,t.jsxs)("p",{children:["If the Sequential policy is specified for a partition, then pragma Restrictions (No","_","Task","_","Hierarchy) shall also be specified for the partition. ",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(i.h4,{id:"dynamic-semantics",children:"Dynamic Semantics"}),"\n",(0,t.jsx)(l.A,{children:"7/2"}),"\n",(0,t.jsx)(d.A,{items:["AI95-00265-01"]}),"\n",(0,t.jsxs)("p",{children:["Notwithstanding what this document says elsewhere, this ",(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/docs/arm/AA-2/AA-2.8#S0019",children:"pragma"})})," allows partition elaboration rules concerning task activation and interrupt attachment to be changed. If the ",(0,t.jsxs)("em",{children:["policy","_"]}),(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/docs/arm/AA-2/AA-2.3#S0002",children:"identifier"})})," is Concurrent, or if there is no pragma Partition","_","Elaboration","_","Policy defined for the partition, then the rules defined elsewhere in this Reference Manual apply.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(l.A,{children:"8/2"}),"\n",(0,t.jsx)(d.A,{items:["AI95-00265-01","AI95-00421-01"]}),"\n",(0,t.jsxs)("p",{children:["If the partition elaboration policy is Sequential, then task activation and interrupt attachment are performed in the following sequence of steps:",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(l.A,{children:"9/2"}),"\n",(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:["The activation of all library-level tasks and the attachment of interrupt handlers are deferred until all library units are elaborated.",(0,t.jsx)("br",{})]}),(0,t.jsx)(l.A,{children:"10/2"}),(0,t.jsxs)("li",{children:["The interrupt handlers are attached by the environment task.",(0,t.jsx)("br",{})]}),(0,t.jsx)(l.A,{children:"11/2"}),(0,t.jsxs)("li",{children:["The environment task is suspended while the library-level tasks are activated.",(0,t.jsx)("br",{})]}),(0,t.jsx)(l.A,{children:"12/2"}),(0,t.jsxs)("li",{children:["The environment task executes the main subprogram (if any) concurrently with these executing tasks. ",(0,t.jsx)("br",{})]})]}),"\n",(0,t.jsx)(l.A,{children:"13/2"}),"\n",(0,t.jsx)(d.A,{items:["AI95-00265-01","AI95-00421-01"]}),"\n",(0,t.jsxs)("p",{children:["If several dynamic interrupt handler attachments for the same interrupt are deferred, then the most recent call of Attach","_","Handler or Exchange","_","Handler determines which handler is attached.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(l.A,{children:"14/2"}),"\n",(0,t.jsx)(d.A,{items:["AI95-00265-01","AI95-00421-01"]}),"\n",(0,t.jsxs)("p",{children:["If any deferred task activation fails, Tasking","_","Error is raised at the beginning of the sequence of statements of the body of the environment task prior to calling the main subprogram.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsx)(i.h4,{id:"implementation-advice",children:"Implementation Advice"}),"\n",(0,t.jsx)(l.A,{children:"15/3"}),"\n",(0,t.jsx)(d.A,{items:["AI95-00265-01","AI05-0264-1"]}),"\n",(0,t.jsxs)("p",{children:["If the partition elaboration policy is Sequential and the Environment task becomes permanently blocked during elaboration, then the partition is deadlocked and it is recommended that the partition be immediately terminated. ",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(o.A,{children:[(0,t.jsx)(l.A,{children:"15.a/3"}),(0,t.jsx)(r.A,{type:"aarm",aarm:"implementation-advice",children:(0,t.jsxs)(i.p,{children:[(0,t.jsx)("strong",{}),"If the partition elaboration policy is Sequential and the Environment task becomes permanently blocked during elaboration, then the partition should be immediately terminated.",(0,t.jsx)("br",{})]})})]}),"\n",(0,t.jsx)(i.h4,{id:"implementation-permissions",children:"Implementation Permissions"}),"\n",(0,t.jsx)(l.A,{children:"16/3"}),"\n",(0,t.jsx)(d.A,{items:["AI95-00265-01","AI05-0264-1"]}),"\n",(0,t.jsxs)("p",{children:["If the partition elaboration policy is Sequential and any task activation fails, then an implementation may immediately terminate the active partition to mitigate the hazard posed by continuing to execute with a subset of the tasks being active. ",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(o.A,{children:[(0,t.jsx)(l.A,{children:"17/5"}),(0,t.jsx)(d.A,{items:["AI95-00421-01","AI12-0440-1"]}),(0,t.jsx)(r.A,{type:"aarm",aarm:"note",children:(0,t.jsxs)(i.p,{children:["NOTE   If any deferred task activation fails, the environment task is unable to handle the Tasking","_","Error exception and completes immediately. By contrast, if the partition elaboration policy is Concurrent, then this exception can be handled within a library unit. ",(0,t.jsx)("br",{})]})})]}),"\n",(0,t.jsx)(o.A,{children:(0,t.jsx)(i.h4,{id:"extensions-to-ada-95",children:"Extensions to Ada 95"})}),"\n",(0,t.jsxs)(o.A,{children:[(0,t.jsx)(l.A,{children:"17.a/2"}),(0,t.jsx)(d.A,{items:["AI95-00265-01","AI95-00421-01"]}),(0,t.jsx)(r.A,{type:"aarm",aarm:"note",children:(0,t.jsxs)(i.p,{children:[(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/docs/arm/AA-2/AA-2.8#S0019",children:"Pragma"})})," Partition","_","Elaboration","_","Policy is new. ",(0,t.jsx)("br",{})]})})]})]})}function p(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(A,{...e})}):A(e)}}}]);