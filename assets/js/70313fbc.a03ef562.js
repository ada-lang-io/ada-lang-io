"use strict";(self.webpackChunkada_lang_io=self.webpackChunkada_lang_io||[]).push([[1848],{51950:(e,i,a)=>{a.r(i),a.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>o});var s=a(74848),n=a(28453);const r={sidebar_position:32},l="Crates for macOS",t={id:"learn/getting-started/macos-issues/crates",title:"Crates for macOS",description:"There's a Mac-special Alire repository on Github which provides three things, two of which are tool-related and hopefully temporary.",source:"@site/docs/learn/getting-started/macos-issues/crates.md",sourceDirName:"learn/getting-started/macos-issues",slug:"/learn/getting-started/macos-issues/crates",permalink:"/docs/learn/getting-started/macos-issues/crates",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:32,frontMatter:{sidebar_position:32},sidebar:"tutorialSidebar",previous:{title:"Alire vs Apple silicon",permalink:"/docs/learn/getting-started/macos-issues/alire-vs-aarch64"},next:{title:"Issues",permalink:"/docs/learn/getting-started/macos-issues/issues"}},c={},o=[{value:"<a>Alire</a>",id:"alire",level:2},{value:"<a>Workarounds</a>",id:"workarounds",level:2},{value:"<a>Toolchain items</a>",id:"toolchain-items",level:2},{value:"<a>Installing the Mac-special Alire index</a>",id:"installing-the-mac-special-alire-index",level:2}];function d(e){const i={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h1,{id:"crates-for-macos",children:"Crates for macOS"}),"\n",(0,s.jsxs)(i.p,{children:["There's a Mac-special ",(0,s.jsx)(i.a,{href:"https://github.com/simonjwright/alire-index.mac.git",children:"Alire repository on Github"})," which provides three things, two of which are tool-related and hopefully temporary."]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"#alire",children:"Alire"})," itself"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"#workarounds",children:"Workarounds"})," for macOS-related issues"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"#toolchain-items",children:"Toolchain items"})," (compiler, gprbuild)"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"alire",children:(0,s.jsx)("a",{name:"alire",children:"Alire"})}),"\n",(0,s.jsx)(i.p,{children:"At 2024-04-19, the official Alire site only supports an Intel (x86_64) build of Alire, which won't support native development on Apple silicon."}),"\n",(0,s.jsxs)(i.p,{children:["You can find an Apple (aarch64) build of Alire 2.0.1 ",(0,s.jsx)(i.a,{href:"https://github.com/simonjwright/alire-index.mac/releases/tag/alr-2.0.1-bin-aarch64-macos",children:"here"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"workarounds",children:(0,s.jsx)("a",{name:"workarounds",children:"Workarounds"})}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.em,{children:"gprbuild"})," can try to build static standalone libraries, where the 'standalone' part means that the library will be automatically elaborated. It does this using features available in GNU binutils, but not in Mach-O binary -- on either machine architecture. Alternative versions of crates that normally would attempt this are provided in the ",(0,s.jsx)(i.a,{href:"#installing-the-mac-special-alire-index",children:"Mac-related index"}),":"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"langkit_support-24.0.1"}),", builds a plain static library."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"libadalang-24.0.1"}),", likewise."]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"toolchain-items",children:(0,s.jsx)("a",{name:"toolchain-items",children:"Toolchain items"})}),"\n",(0,s.jsxs)(i.p,{children:["The crates in the ",(0,s.jsx)(i.a,{href:"#installing-the-mac-special-alire-index",children:"Mac-related index"})," are"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"gnat_macos_aarch64=13.2.2"}),", native GNAT for Apple silicon."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"gprbuild=24.0.1-mac-aarch64"}),", matching gprbuild (avoids you having to say ",(0,s.jsx)(i.code,{children:"--target=aarch64-apple-darwin"})," at every compilation!)"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Note that Alire's community index already (2024-04-19) provides ",(0,s.jsx)(i.code,{children:"gnat_native=13.2.2"})," for macOS; no doubt an equivalent ",(0,s.jsx)(i.em,{children:"gprbuild"})," will be available shortly."]}),"\n",(0,s.jsx)(i.h2,{id:"installing-the-mac-special-alire-index",children:(0,s.jsx)("a",{name:"installing-the-mac-special-alire-index",children:"Installing the Mac-special Alire index"})}),"\n",(0,s.jsx)(i.p,{children:"To install:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sh",children:"$ alr index --reset-community\n$ alr index \\\n   --add=git+https://github.com/simonjwright/alire-index.mac.git \\\n   --before=community \\\n   --name=index_for_mac\n"})})]})}function h(e={}){const{wrapper:i}={...(0,n.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);