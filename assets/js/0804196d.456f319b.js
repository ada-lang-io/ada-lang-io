"use strict";(self.webpackChunkada_lang_io=self.webpackChunkada_lang_io||[]).push([[8827],{5065:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>x,contentTitle:()=>A,default:()=>p,frontMatter:()=>h,metadata:()=>r,toc:()=>j});const r=JSON.parse('{"id":"arm/AA-7/AA-7.2","title":"7.2 Package Bodies","description":"This Reference Manual output has not been verified,","source":"@site/docs/arm/AA-7/AA-7.2.mdx","sourceDirName":"arm/AA-7","slug":"/arm/AA-7/AA-7.2","permalink":"/docs/arm/AA-7/AA-7.2","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":61,"frontMatter":{"sidebar_position":61},"sidebar":"referenceManualSidebar","previous":{"title":"7.1 Package Specifications and Declarations","permalink":"/docs/arm/AA-7/AA-7.1"},"next":{"title":"7.3 Private Types and Private Extensions","permalink":"/docs/arm/AA-7/AA-7.3"}}');var s=n(4848),i=n(8453),c=n(3842),d=n(1435),o=n(1432),t=n(9162),l=n(4421);const h={sidebar_position:61},A="7.2 Package Bodies",x={},j=[{value:"Syntax",id:"syntax",level:4},{value:"Legality Rules",id:"legality-rules",level:4},{value:"Static Semantics",id:"static-semantics",level:4},{value:"Dynamic Semantics",id:"dynamic-semantics",level:4},{value:"Examples",id:"examples",level:4},{value:"Wording Changes from Ada 83",id:"wording-changes-from-ada-83",level:4},{value:"Extensions to Ada 2005",id:"extensions-to-ada-2005",level:4}];function m(e){const a={a:"a",admonition:"admonition",h1:"h1",h4:"h4",header:"header",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.header,{children:(0,s.jsx)(a.h1,{id:"72-package-bodies",children:"7.2 Package Bodies"})}),"\n",(0,s.jsx)(a.admonition,{type:"danger",children:(0,s.jsxs)(a.p,{children:["This Reference Manual output has not been verified,\nand may contain omissions or errors.\nReport any problems on the ",(0,s.jsx)(a.a,{href:"https://github.com/ada-lang-io/ada-lang-io/issues/20",children:"tracking issue"})]})}),"\n","\n",(0,s.jsx)(t.A,{children:"1"}),"\n",(0,s.jsxs)("p",{children:["[In contrast to the entities declared in the visible part of a package, the entities declared in the ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})})," are visible only within the ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})})," itself. As a consequence, a package with a ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})})," can be used for the construction of a group of related subprograms in which the logical operations available to clients are clearly isolated from the internal entities.] ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsx)(a.h4,{id:"syntax",children:"Syntax"}),"\n",(0,s.jsx)(t.A,{children:"2/3"}),"\n",(0,s.jsx)(l.A,{items:["AI05-0267-1"]}),"\n",(0,s.jsx)(o.A,{children:(0,s.jsxs)(a.p,{children:[(0,s.jsxs)("code",{children:["package","_","body"]}),(0,s.jsx)("a",{id:"S0231"}),(0,s.jsx)("code",{children:" ::= "}),(0,s.jsx)("br",{}),"    ",(0,s.jsx)("strong",{children:"package"})," ",(0,s.jsx)("strong",{children:"body"})," ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-6/AA-6.1#S0201",children:"defining_program_unit_name"})}),(0,s.jsx)("br",{}),"        [",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-13/AA-13.1#S0346",children:"aspect_specification"})}),"] ",(0,s.jsx)("strong",{children:"is"}),(0,s.jsx)("br",{}),"       ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-3/AA-3.11#S0086",children:"declarative_part"})}),(0,s.jsx)("br",{}),"   [",(0,s.jsx)("strong",{children:"begin"}),(0,s.jsx)("br",{}),"        ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-11/AA-11.2#S0304",children:"handled_sequence_of_statements"})}),"]",(0,s.jsx)("br",{}),"    ",(0,s.jsx)("strong",{children:"end"})," [[",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-10/AA-10.1#S0291",children:"parent_unit_name"})}),".]",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-2/AA-2.3#S0002",children:"identifier"})}),"];",(0,s.jsx)("br",{})]})}),"\n",(0,s.jsx)(t.A,{children:"3"}),"\n",(0,s.jsxs)("p",{class:"Indented2",children:["If an ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-2/AA-2.3#S0002",children:"identifier"})})," or ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-10/AA-10.1#S0291",children:"parent_unit_name"})}),".",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-2/AA-2.3#S0002",children:"identifier"})})," appears at the end of a ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})}),", then this sequence of lexical elements shall repeat the ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-6/AA-6.1#S0201",children:"defining_program_unit_name"})}),". ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsx)(a.h4,{id:"legality-rules",children:"Legality Rules"}),"\n",(0,s.jsx)(t.A,{children:"4/5"}),"\n",(0,s.jsx)(l.A,{items:["AI12-0417-1"]}),"\n",(0,s.jsxs)("p",{children:["A ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})})," shall be the completion of a previous ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-7/AA-7.1#S0229",children:["package","_","declaration"]})})," or ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-12/AA-12.1#S0312",children:["generic","_","package","_","declaration"]})}),". A library ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-7/AA-7.1#S0229",children:["package","_","declaration"]})})," or library ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-12/AA-12.1#S0312",children:["generic","_","package","_","declaration"]})})," shall not have a body unless it requires a body[; the Elaborate","_","Body aspect can be used to require a ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-10/AA-10.1#S0288",children:["library","_","unit","_","declaration"]})})," to have a body (see ",(0,s.jsx)("a",{href:"/docs/arm/AA-10/AA-10.2#Subclause_10.2.1",children:"10.2.1"}),") if it would not otherwise require one]. ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"4.a"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"ramification",children:(0,s.jsxs)(a.p,{children:[(0,s.jsx)("strong",{}),"The first part of the rule forbids a ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})})," from standing alone \u2014 it has to belong to some previous ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.1#S0229",children:"package_declaration"})})," or ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-12/AA-12.1#S0312",children:"generic_package_declaration"})}),".",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"4.b"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(a.p,{children:["A nonlibrary ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.1#S0229",children:"package_declaration"})})," or nonlibrary ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-12/AA-12.1#S0312",children:"generic_package_declaration"})})," that does not require a completion may have a corresponding body anyway. ",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsx)(a.h4,{id:"static-semantics",children:"Static Semantics"}),"\n",(0,s.jsx)(t.A,{children:"5"}),"\n",(0,s.jsxs)("p",{children:["In any ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})})," without ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-5/AA-5.1#S0167",children:"statement"})}),"s there is an implicit ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-5/AA-5.1#S0170",children:["null","_","statement"]})}),". For any ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-7/AA-7.1#S0229",children:["package","_","declaration"]})})," without an explicit completion, there is an implicit ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:["package","_","body"]})})," containing a single ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-5/AA-5.1#S0170",children:"null_statement"})}),". For a noninstance, nonlibrary package, this body occurs at the end of the ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-3/AA-3.11#S0086",children:["declarative","_","part"]})})," of the innermost enclosing program unit or ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-5/AA-5.6#S0191",children:["block","_","statement"]})}),"; if there are several such packages, the order of the implicit ",(0,s.jsxs)("code",{children:["package","_","bodies"]})," is unspecified. [(For an instance, the implicit ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:["package","_","body"]})})," occurs at the place of the instantiation (see ",(0,s.jsx)("a",{href:"/docs/arm/AA-12/AA-12.3",children:"12.3"}),"). For a library package, the place is partially determined by the elaboration dependences (see Clause ",(0,s.jsx)("a",{href:"/docs/arm/AA-10/",children:"10"}),").)] ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"5.a"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"discussion",children:(0,s.jsxs)(a.p,{children:[(0,s.jsx)("strong",{}),"Thus, for example, we can refer to something happening just after the ",(0,s.jsx)("strong",{children:"begin"})," of a ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})}),", and we can refer to the ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-11/AA-11.2#S0304",children:"handled_sequence_of_statements"})})," of a ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})}),", without worrying about all the optional pieces. The place of the implicit body makes a difference for tasks activated by the package. See also RM83-9.3(5).",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"5.b"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(a.p,{children:["The implicit body would be illegal if explicit in the case of a library package that does not require (and therefore does not allow) a body. This is a bit strange, but not harmful. ",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsx)(a.h4,{id:"dynamic-semantics",children:"Dynamic Semantics"}),"\n",(0,s.jsx)(t.A,{children:"6"}),"\n",(0,s.jsxs)("p",{children:["For the elaboration of a nongeneric ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})}),", its ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-3/AA-3.11#S0086",children:["declarative","_","part"]})})," is first elaborated, and its ",(0,s.jsx)("code",{children:(0,s.jsxs)("a",{href:"/docs/arm/AA-11/AA-11.2#S0304",children:["handled","_","sequence","_","of","_","statements"]})})," is then executed. ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"7"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(a.p,{children:["NOTE 1   A variable declared in the body of a package is only visible within this body and, consequently, its value can only be changed within the ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})}),". In the absence of local tasks, the value of such a variable remains unchanged between calls issued from outside the package to subprograms declared in the visible part. The properties of such a variable are similar to those of a \u201cstatic\u201d variable of C.",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"8"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(a.p,{children:["NOTE 2   The elaboration of the body of a subprogram explicitly declared in the visible part of a package is caused by the elaboration of the body of the package. Hence a call of such a subprogram by an outside program unit raises the exception Program","_","Error if the call takes place before the elaboration of the ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})})," (see ",(0,s.jsx)("a",{href:"/docs/arm/AA-3/AA-3.11",children:"3.11"}),"). ",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsx)(a.h4,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(t.A,{children:"9"}),"\n",(0,s.jsxs)("p",{children:[(0,s.jsxs)("em",{children:["Example of a package body (see ",(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.1",children:"7.1"}),"):"]})," ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsx)(t.A,{children:"10"}),"\n",(0,s.jsx)(o.A,{language:"ada",children:(0,s.jsxs)(a.p,{children:["package body Rational","_","Numbers is","\n","\n",(0,s.jsx)(t.A,{children:"11"}),"\nprocedure Same","_","Denominator (X,Y : in out Rational) is","\n","   begin","\n","      --  reduces X and Y to the same denominator:","\n","      ...","\n","   end Same","_","Denominator;","\n","\n",(0,s.jsx)(t.A,{children:"12"}),'\nfunction "="(X,Y : Rational) return Boolean is',"\n","      U : Rational := X;","\n","      V : Rational := Y;","\n","   begin","\n","      Same","_","Denominator (U,V);","\n","      return U.Numerator = V.Numerator;","\n",'   end "=";',"\n","\n",(0,s.jsx)(t.A,{children:"13"}),'\nfunction "/" (X,Y : Integer) return Rational is',"\n","   begin","\n","      if Y ",">"," 0 then","\n","         return (Numerator =",">"," X,  Denominator =",">"," Y);","\n","      else","\n","         return (Numerator =",">"," -X, Denominator =",">"," -Y);","\n","      end if;","\n",'   end "/";',"\n","\n",(0,s.jsx)(t.A,{children:"14"}),'\nfunction "+" (X,Y : Rational) return Rational is ... end "+";',"\n",'   function "-" (X,Y : Rational) return Rational is ... end "-";',"\n",'   function "',"*",'" (X,Y : Rational) return Rational is ... end "',"*",'";',"\n",'   function "/" (X,Y : Rational) return Rational is ... end "/";',"\n","\n",(0,s.jsx)(t.A,{children:"15"}),"\nend Rational","_","Numbers;","\n"]})}),"\n",(0,s.jsx)(d.A,{children:(0,s.jsx)(a.h4,{id:"wording-changes-from-ada-83",children:"Wording Changes from Ada 83"})}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"15.a"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(a.p,{children:["The syntax rule for ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})})," now uses the syntactic category ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-11/AA-11.2#S0304",children:"handled_sequence_of_statements"})}),".",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"15.b"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(a.p,{children:["The ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-3/AA-3.11#S0086",children:"declarative_part"})})," of a ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})})," is now required; that doesn't make any real difference, since a ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-3/AA-3.11#S0086",children:"declarative_part"})})," can be empty.",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"15.c"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(a.p,{children:["RM83 seems to have forgotten to say that a ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})})," can't stand alone, without a previous declaration. We state that rule here.",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"15.d"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(a.p,{children:["RM83 forgot to restrict the definition of elaboration of ",(0,s.jsxs)("code",{children:["package","_","bodies"]})," to nongeneric ones. We have corrected that omission.",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"15.e"}),(0,s.jsx)(c.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(a.p,{children:["The rule about implicit bodies (from RM83-9.3(5)) is moved here, since it is more generally applicable. ",(0,s.jsx)("br",{})]})})]}),"\n",(0,s.jsx)(d.A,{children:(0,s.jsx)(a.h4,{id:"extensions-to-ada-2005",children:"Extensions to Ada 2005"})}),"\n",(0,s.jsxs)(d.A,{children:[(0,s.jsx)(t.A,{children:"15.f/3"}),(0,s.jsx)(l.A,{items:["AI05-0267-1"]}),(0,s.jsx)(c.A,{type:"aarm",aarm:"note",children:(0,s.jsxs)(a.p,{children:["An optional ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-13/AA-13.1#S0346",children:"aspect_specification"})})," can be used in a ",(0,s.jsx)("code",{children:(0,s.jsx)("a",{href:"/docs/arm/AA-7/AA-7.2#S0231",children:"package_body"})}),". This is described in ",(0,s.jsx)("a",{href:"/docs/arm/AA-13/AA-13.1#Subclause_13.1.1",children:"13.1.1"}),". ",(0,s.jsx)("br",{})]})})]})]})}function p(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}}}]);