"use strict";(self.webpackChunkada_lang_io=self.webpackChunkada_lang_io||[]).push([[2128],{7326:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>l,default:()=>u,frontMatter:()=>h,metadata:()=>s,toc:()=>x});const s=JSON.parse('{"id":"arm/AA-D/AA-D.6","title":"D.6 Preemptive Abort","description":"This Reference Manual output has not been verified,","source":"@site/docs/arm/AA-D/AA-D.6.mdx","sourceDirName":"arm/AA-D","slug":"/arm/AA-D/AA-D.6","permalink":"/docs/arm/AA-D/AA-D.6","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":160,"frontMatter":{"sidebar_position":160},"sidebar":"referenceManualSidebar","previous":{"title":"D.5 Dynamic Priorities","permalink":"/docs/arm/AA-D/AA-D.5"},"next":{"title":"D.7 Tasking Restrictions","permalink":"/docs/arm/AA-D/AA-D.7"}}');var i=n(4848),r=n(8453),a=n(3842),o=n(1435),c=(n(1432),n(9162)),d=n(4421);const h={sidebar_position:160},l="D.6 Preemptive Abort",m={},x=[{value:"Dynamic Semantics",id:"dynamic-semantics",level:4},{value:"Documentation Requirements",id:"documentation-requirements",level:4},{value:"Metrics",id:"metrics",level:4},{value:"Implementation Advice",id:"implementation-advice",level:4}];function A(e){const t={a:"a",admonition:"admonition",h1:"h1",h4:"h4",header:"header",p:"p",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"d6-preemptive-abort",children:"D.6 Preemptive Abort"})}),"\n",(0,i.jsx)(t.admonition,{type:"danger",children:(0,i.jsxs)(t.p,{children:["This Reference Manual output has not been verified,\nand may contain omissions or errors.\nReport any problems on the ",(0,i.jsx)(t.a,{href:"https://github.com/ada-lang-io/ada-lang-io/issues/20",children:"tracking issue"})]})}),"\n","\n",(0,i.jsx)(c.A,{children:"1/3"}),"\n",(0,i.jsx)(d.A,{items:["AI05-0299-1"]}),"\n",(0,i.jsxs)("p",{children:["[This subclause specifies requirements on the immediacy with which an aborted construct is completed.] ",(0,i.jsx)("br",{})]}),"\n",(0,i.jsx)(t.h4,{id:"dynamic-semantics",children:"Dynamic Semantics"}),"\n",(0,i.jsx)(c.A,{children:"2"}),"\n",(0,i.jsxs)("p",{children:["On a system with a single processor, an aborted construct is completed immediately at the first point that is outside the execution of an abort-deferred operation.",(0,i.jsx)("br",{})]}),"\n",(0,i.jsx)(t.h4,{id:"documentation-requirements",children:"Documentation Requirements"}),"\n",(0,i.jsx)(c.A,{children:"3"}),"\n",(0,i.jsxs)("p",{children:["On a multiprocessor, the implementation shall document any conditions that cause the completion of an aborted construct to be delayed later than what is specified for a single processor. ",(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsx)(c.A,{children:"3.a/2"}),(0,i.jsxs)(a.A,{type:"aarm",aarm:"note",children:[(0,i.jsx)("em",{children:"This paragraph was deleted."}),(0,i.jsx)("br",{})]})]}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsx)(c.A,{children:"3.b/2"}),(0,i.jsx)(a.A,{type:"aarm",aarm:"note",children:(0,i.jsxs)(t.p,{children:[(0,i.jsx)("strong",{children:"Documentation Requirement: "}),"On a multiprocessor, any conditions that cause the completion of an aborted construct to be delayed later than what is specified for a single processor.",(0,i.jsx)("br",{})]})})]}),"\n",(0,i.jsx)(t.h4,{id:"metrics",children:"Metrics"}),"\n",(0,i.jsx)(c.A,{children:"4"}),"\n",(0,i.jsxs)("p",{children:["The implementation shall document the following metrics: ",(0,i.jsx)("br",{})]}),"\n",(0,i.jsx)(c.A,{children:"5"}),"\n",(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:["The execution time, in processor clock cycles, that it takes for an ",(0,i.jsx)("code",{children:(0,i.jsx)("a",{href:"/docs/arm/AA-9/AA-9.8#S0284",children:"abort_statement"})})," to cause the completion of the aborted task. This is measured in a situation where a task T2 preempts task T1 and aborts T1. T1 does not have any finalization code. T2 shall verify that T1 has terminated, by means of the Terminated attribute.",(0,i.jsx)("br",{})]}),(0,i.jsx)(c.A,{children:"6"}),(0,i.jsxs)("li",{children:["On a multiprocessor, an upper bound in seconds, on the time that the completion of an aborted task can be delayed beyond the point that it is required for a single processor.",(0,i.jsx)("br",{})]}),(0,i.jsx)(c.A,{children:"7/2"}),(0,i.jsx)(d.A,{items:["AI95-00114-01"]}),(0,i.jsxs)("li",{children:["An upper bound on the execution time of an ",(0,i.jsx)("code",{children:(0,i.jsx)("a",{href:"/docs/arm/AA-9/AA-9.7#S0280",children:"asynchronous_select"})}),", in processor clock cycles. This is measured between a point immediately before a task T1 executes a protected operation Pr.Set that makes the ",(0,i.jsx)("code",{children:(0,i.jsx)("a",{href:"/docs/arm/AA-4/AA-4.5#S0150",children:"condition"})})," of an ",(0,i.jsx)("code",{children:(0,i.jsx)("a",{href:"/docs/arm/AA-9/AA-9.5#S0262",children:"entry_barrier"})})," Pr.Wait True, and the point where task T2 resumes execution immediately after an entry call to Pr.Wait in an ",(0,i.jsx)("code",{children:(0,i.jsx)("a",{href:"/docs/arm/AA-9/AA-9.7#S0280",children:"asynchronous_select"})}),". T1 preempts T2 while T2 is executing the abortable part, and then blocks itself so that T2 can execute. The execution time of T1 is measured separately, and subtracted.",(0,i.jsx)("br",{})]}),(0,i.jsx)(c.A,{children:"8"}),(0,i.jsxs)("li",{children:["An upper bound on the execution time of an ",(0,i.jsx)("code",{children:(0,i.jsx)("a",{href:"/docs/arm/AA-9/AA-9.7#S0280",children:"asynchronous_select"})}),", in the case that no asynchronous transfer of control takes place. This is measured between a point immediately before a task executes the ",(0,i.jsx)("code",{children:(0,i.jsx)("a",{href:"/docs/arm/AA-9/AA-9.7#S0280",children:"asynchronous_select"})})," with a nonnull abortable part, and the point where the task continues execution immediately after it. The execution time of the abortable part is subtracted. ",(0,i.jsx)("br",{})]})]}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsx)(c.A,{children:"8.a/2"}),(0,i.jsx)(a.A,{type:"aarm",aarm:"note",children:(0,i.jsxs)(t.p,{children:[(0,i.jsx)("strong",{children:"Documentation Requirement: "}),"The metrics for aborts.",(0,i.jsx)("br",{})]})})]}),"\n",(0,i.jsx)(t.h4,{id:"implementation-advice",children:"Implementation Advice"}),"\n",(0,i.jsx)(c.A,{children:"9"}),"\n",(0,i.jsxs)("p",{children:["Even though the ",(0,i.jsx)("code",{children:(0,i.jsx)("a",{href:"/docs/arm/AA-9/AA-9.8#S0284",children:"abort_statement"})})," is included in the list of potentially blocking operations (see ",(0,i.jsx)("a",{href:"/docs/arm/AA-9/AA-9.5#Subclause_9.5.1",children:"9.5.1"}),"), it is recommended that this statement be implemented in a way that never requires the task executing the ",(0,i.jsx)("code",{children:(0,i.jsx)("a",{href:"/docs/arm/AA-9/AA-9.8#S0284",children:"abort_statement"})})," to block.",(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsx)(c.A,{children:"9.a/2"}),(0,i.jsx)(a.A,{type:"aarm",aarm:"implementation-advice",children:(0,i.jsxs)(t.p,{children:[(0,i.jsx)("strong",{}),"The ",(0,i.jsx)("code",{children:(0,i.jsx)("a",{href:"/docs/arm/AA-9/AA-9.8#S0284",children:"abort_statement"})})," should not require the task executing the statement to block.",(0,i.jsx)("br",{})]})})]}),"\n",(0,i.jsx)(c.A,{children:"10"}),"\n",(0,i.jsxs)("p",{children:["On a multi-processor, the delay associated with aborting a task on another processor should be bounded; the implementation should use periodic polling, if necessary, to achieve this.",(0,i.jsx)("br",{})]}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsx)(c.A,{children:"10.a/2"}),(0,i.jsx)(a.A,{type:"aarm",aarm:"implementation-advice",children:(0,i.jsxs)(t.p,{children:[(0,i.jsx)("strong",{}),"On a multi-processor, the delay associated with aborting a task on another processor should be bounded.",(0,i.jsx)("br",{})]})})]}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsx)(c.A,{children:"11"}),(0,i.jsx)(a.A,{type:"aarm",aarm:"note",children:(0,i.jsxs)(t.p,{children:["NOTE 1   Abortion does not change the active or base priority of the aborted task.",(0,i.jsx)("br",{})]})})]}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsx)(c.A,{children:"12"}),(0,i.jsx)(a.A,{type:"aarm",aarm:"note",children:(0,i.jsxs)(t.p,{children:["NOTE 2   Abortion cannot be more immediate than is allowed by the rules for deferral of abortion during finalization and in protected actions.",(0,i.jsx)("br",{})]})})]})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(A,{...e})}):A(e)}}}]);