<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-style-guide/s6/03" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>6.3 Termination | ada-lang.io, an Ada community site</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://ada-lang.io/img/ada_logo.svg><meta data-rh=true name=twitter:image content=https://ada-lang.io/img/ada_logo.svg><meta data-rh=true property=og:url content=https://ada-lang.io/docs/style-guide/s6/03><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="6.3 Termination | ada-lang.io, an Ada community site"><meta data-rh=true name=description content="The ability of tasks to interact with each other using Ada's intertask"><meta data-rh=true property=og:description content="The ability of tasks to interact with each other using Ada's intertask"><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://ada-lang.io/docs/style-guide/s6/03><link data-rh=true rel=alternate href=https://ada-lang.io/docs/style-guide/s6/03 hreflang=en><link data-rh=true rel=alternate href=https://ada-lang.io/docs/style-guide/s6/03 hreflang=x-default><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://ada-lang.io/docs/style-guide/s6/","name":"6. Concurrency","position":1},{"@type":"ListItem","item":"https://ada-lang.io/docs/style-guide/s6/03","name":"6.3 Termination","position":2}]}</script><link rel=stylesheet href=/assets/css/styles.f32c0888.css><script src=/assets/js/runtime~main.9acdc316.js defer></script><script src=/assets/js/main.04d34f70.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ navbar--dark"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/ada_logo.svg alt=Ada class="themedComponent_mlkZ themedComponent--light_NVdE" height=32 width=32><img src=/img/ada_logo.svg alt=Ada class="themedComponent_mlkZ themedComponent--dark_xIcU" height=32 width=32></div></a><a class="navbar__item navbar__link" href=/docs/learn/why-ada>Learn</a><a class="navbar__item navbar__link" href=/docs/arm>Reference Manual</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/style-guide/Ada_Style_Guide>Style Guide</a><a class="navbar__item navbar__link" href=/docs/projects-to-work-on>Projects to Work on</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://forum.ada-lang.io target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Forum</a><a href=https://usenet.ada-lang.io/comp.lang.ada/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">comp.lang.ada</a><a href=https://ada-rapporteur-group.github.io/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Ada Rapporteur Group</a><a href=https://search.ada-lang.io target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Code Search</a><a href=https://github.com/ada-lang-io/ada-lang-io target=_blank rel="noopener noreferrer" class="navbar__item navbar__link fa-icon header__image header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS darkNavbarColorModeToggle_X3D1" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex=-1 class=sidebarLogo_isFc href=/><img src=/img/ada_logo.svg alt=Ada class="themedComponent_mlkZ themedComponent--light_NVdE" height=32 width=32><img src=/img/ada_logo.svg alt=Ada class="themedComponent_mlkZ themedComponent--dark_xIcU" height=32 width=32></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/style-guide/Introduction>1. Introduction</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/style-guide/Source_Code_Presentation>2. Source Code Presentation</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/style-guide/s3/>3. Readability</a><button aria-label="Expand sidebar category '3. Readability'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/style-guide/s4/>4. Program Structure</a><button aria-label="Expand sidebar category '4. Program Structure'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/style-guide/s5/>5. Programming Practices</a><button aria-label="Expand sidebar category '5. Programming Practices'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docs/style-guide/s6/>6. Concurrency</a><button aria-label="Collapse sidebar category '6. Concurrency'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/style-guide/s6/01>6.1 Concurrency Options</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/style-guide/s6/02>6.2 Communication</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/style-guide/s6/03>6.3 Termination</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/style-guide/s6/04>6.4 Summary</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/style-guide/s7/>7. Portability</a><button aria-label="Expand sidebar category '7. Portability'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/style-guide/s8/>8. Reusability</a><button aria-label="Expand sidebar category '8. Reusability'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/style-guide/s9/>9. Object-Oriented Features</a><button aria-label="Expand sidebar category '9. Object-Oriented Features'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/style-guide/s10/>10. Improving Performance</a><button aria-label="Expand sidebar category '10. Improving Performance'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/style-guide/Portable_Dining_Philosophers_Example>11. Complete Example</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/style-guide/References>References</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/style-guide/Bibliography>Bibliography</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/style-guide/Ada_Style_Guide>Ada Quality and Style Guide</a></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/style-guide/s6/><span>6. Concurrency</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>6.3 Termination</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>6.3 Termination</h1></header><p>The ability of tasks to interact with each other using Ada's intertask
communication features makes it especially important to manage planned
or unplanned (e.g., in response to a catastrophic exception condition)
termination in a disciplined way. To do otherwise can lead to a
proliferation of undesired and unpredictable side effects as a result of
the termination of a single task. The guidelines on termination focus on
the termination of tasks. Wherever possible, you should use protected
objects (see Guideline 6.1.1), thus avoiding the termination problems
associated with tasks.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=avoiding-undesired-termination>Avoiding Undesired Termination<a href=#avoiding-undesired-termination class=hash-link aria-label="Direct link to Avoiding Undesired Termination" title="Direct link to Avoiding Undesired Termination">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=guideline>guideline<a href=#guideline class=hash-link aria-label="Direct link to guideline" title="Direct link to guideline">​</a></h4>
<ul>
<li>Consider using an exception handler for a rendezvous within the main
loop inside each task.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=example>example<a href=#example class=hash-link aria-label="Direct link to example" title="Direct link to example">​</a></h4>
<p>In the following example, an exception raised using the primary sensor
is used to change Mode to Degraded still allowing execution of the
system:</p>
<div class="language-ada codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ada codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token punctuation" style=color:#f8f8f2>..</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>loop</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token variable" style=color:#f8f8f2>Recognize_Degraded_Mode</span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>begin</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token keyword" style=color:#66d9ef>case</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Mode</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>is</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>when</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Primary</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>=></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">               </span><span class="token keyword" style=color:#66d9ef>select</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                  </span><span class="token variable" style=color:#f8f8f2>Current_Position_Primary</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Request_New_Coordinates</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>X</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Y</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">               </span><span class="token keyword" style=color:#66d9ef>or</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                  </span><span class="token keyword" style=color:#66d9ef>delay</span><span class="token plain"> </span><span class="token number" style=color:#ae81ff>0.25</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                  </span><span class="token comment" style=color:#8292a2;font-style:italic>-- Decide whether to switch modes;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">               </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>select</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>when</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Degraded</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>=></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">               </span><span class="token variable" style=color:#f8f8f2>Current_Position_Backup</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Request_New_Coordinates</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>X</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Y</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>case</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token punctuation" style=color:#f8f8f2>..</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>exception</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token keyword" style=color:#66d9ef>when</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Tasking_Error</span><span class="token plain"> | </span><span class="token variable" style=color:#f8f8f2>Program_Error</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>=></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token variable" style=color:#f8f8f2>Mode</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Degraded</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Recognize_Degraded_Mode</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>loop</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>..</span><span class="token punctuation" style=color:#f8f8f2>.</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=rationale>rationale<a href=#rationale class=hash-link aria-label="Direct link to rationale" title="Direct link to rationale">​</a></h4>
<p>Allowing a task to terminate might not support the requirements of the
system. Without an exception handler for the rendezvous within the main
task loop, the functions of the task might not be performed.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=notes>notes<a href=#notes class=hash-link aria-label="Direct link to notes" title="Direct link to notes">​</a></h4>
<p>The use of an exception handler is the only way to guarantee recovery
from an entry call to an abnormal task. Use of the 'Terminated attribute
to test a task's availability before making the entry call can introduce
a race condition where the tested task fails after the test but before
the entry call (see Guideline 6.2.3).</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=normal-termination>Normal Termination<a href=#normal-termination class=hash-link aria-label="Direct link to Normal Termination" title="Direct link to Normal Termination">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=guideline-1>guideline<a href=#guideline-1 class=hash-link aria-label="Direct link to guideline" title="Direct link to guideline">​</a></h4>
<ul>
<li>Do not create nonterminating tasks unintentionally.</li>
<li>Explicitly shut down tasks that depend on library packages.</li>
<li>Confirm that a task is terminated before freeing it with
Ada.Unchecked_Deallocation.</li>
<li>Consider using a select statement with a terminate alternative
rather than an accept statement alone.</li>
<li>Consider providing a terminate alternative for every selective
accept that does not require an else part or a delay .</li>
<li>Do not declare or create a task within a user-defined Finalize
procedure after the environment task has finished waiting for other
tasks.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=example-1>example<a href=#example-1 class=hash-link aria-label="Direct link to example" title="Direct link to example">​</a></h4>
<p>This task will never terminate:</p>
<div class="language-ada codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ada codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#8292a2;font-style:italic>---------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>task</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>body</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Message_Buffer</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>is</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token punctuation" style=color:#f8f8f2>..</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>begin</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic>-- Message_Buffer</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>loop</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>select</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token keyword" style=color:#66d9ef>when</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Head</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>/=</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Tail</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>=></span><span class="token plain"> </span><span class="token comment" style=color:#8292a2;font-style:italic>-- Circular buffer not empty</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>accept</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Retrieve</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Value</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain">    </span><span class="token keyword" style=color:#66d9ef>out</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Element</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>do</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">               </span><span class="token punctuation" style=color:#f8f8f2>..</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Retrieve</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>or</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token keyword" style=color:#66d9ef>when</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>not</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Head</span><span class="token plain">  </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Index</span><span class="token attribute attr-name" style="color:#a6e22e !important">'First</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>and</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>then</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                    </span><span class="token variable" style=color:#f8f8f2>Tail</span><span class="token plain">  </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Index</span><span class="token attribute attr-name" style="color:#a6e22e !important">'Last</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>or</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>else</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                   </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Head</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>/=</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Index</span><span class="token attribute attr-name" style="color:#a6e22e !important">'First</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>and</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>then</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                    </span><span class="token variable" style=color:#f8f8f2>Tail</span><span class="token plain">  </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Index</span><span class="token attribute attr-name" style="color:#a6e22e !important">'Pred</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Head</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                 </span><span class="token operator" style=color:#66d9ef>=></span><span class="token plain"> </span><span class="token comment" style=color:#8292a2;font-style:italic>-- Circular buffer not full</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token keyword" style=color:#66d9ef>accept</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Store</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Value</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>in</span><span class="token plain">     </span><span class="token variable" style=color:#f8f8f2>Element</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>select</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>loop</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#f8f8f2>..</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Message_Buffer</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic>---------------------------------------------------------------------</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=rationale-1>rationale<a href=#rationale-1 class=hash-link aria-label="Direct link to rationale" title="Direct link to rationale">​</a></h4>
<p>The implicit environment task does not terminate until all other tasks
have terminated. The environment task serves as a master for all other
tasks created as part of the execution of the partition; it awaits
termination of all such tasks in order to perform finalization of any
remaining objects of the partition. Thus, a partition will exist until
all library tasks are terminated.</p>
<p>A nonterminating task is a task whose body consists of a nonterminating
loop with no selective accept with terminate or a task that depends on a
library package. Execution of a subprogram or block containing a task
cannot complete until the task terminates. Any task that calls a
subprogram containing a nonterminating task will be delayed
indefinitely.</p>
<p>A task that depends on a library package cannot be forced to terminate
using a selective accept construct with alternative and should be
terminated explicitly during program shutdown. One way to explicitly
shut down tasks that depend on library packages is to provide them with
exit entries and have the main subprogram call the exit entry just
before it terminates.</p>
<p>The Ada Reference Manual (1995, §13.11.2) states that a bounded error
results from freeing a discriminated, unterminated task object. The
danger lies in deallocating the discriminants as a result of freeing the
task object. The effect of unterminated tasks containing bounded errors
at the end of program execution is undefined.</p>
<p>Execution of an accept statement or of a selective accept statement
without an else part, a delay, or a terminate alternative cannot proceed
if no task ever calls the entry(s) associated with that statement. This
could result in deadlock. Following the guideline to provide a terminate
alternative for every selective accept without an else or a delay
entails programming multiple termination points in the task body. A
reader can easily "know where to look" for the normal termination points
in a task body. The termination points are the end of the body's
sequence of statements and alternatives to select statements.</p>
<p>When the environment task has been terminated, either normally or
abnormally, the language does not specify whether to await a task
activated during finalization of the controlled objects in a partition.
While the environment task is waiting for all other tasks in the
partition to complete, starting up a new task during finalization
results in a bounded error (Ada Reference Manual 1995, §10.2). The
exception Program_Error can be raised during creation or activation of
such a task.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=exceptions>exceptions<a href=#exceptions class=hash-link aria-label="Direct link to exceptions" title="Direct link to exceptions">​</a></h4>
<p>If you are implementing a cyclic executive, you might need a scheduling
task that does not terminate. It has been said that no real-time system
should be programmed to terminate. This is extreme. Systematic shutdown
of many real-time systems is a desirable safety feature.</p>
<p>If you are considering programming a task not to terminate, be certain
that it is not a dependent of a block or subprogram from which the
task's caller(s) will ever expect to return. Because entire programs can
be candidates for reuse (see Chapter 8), note that the task (and
whatever it depends upon) will not terminate. Also be certain that for
any other task that you do wish to terminate, its termination does not
await this task's termination. Reread and fully understand the Ada
Reference Manual (1995, §9.3) on "Task Dependence-Termination of Tasks."</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=the-abort-statement>The Abort Statement<a href=#the-abort-statement class=hash-link aria-label="Direct link to The Abort Statement" title="Direct link to The Abort Statement">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=guideline-2>guideline<a href=#guideline-2 class=hash-link aria-label="Direct link to guideline" title="Direct link to guideline">​</a></h4>
<ul>
<li>Avoid using the abort statement.</li>
<li>Consider using the asynchronous select statement rather than the
abort statement.</li>
<li>Minimize uses of the asynchronous select statement.</li>
<li>Avoid assigning nonatomic global objects from a task or from the
abortable part of an asynchronous select statement.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=example-2>example<a href=#example-2 class=hash-link aria-label="Direct link to example" title="Direct link to example">​</a></h4>
<p>If required in the application, provide a task entry for orderly
shutdown.</p>
<p>The following example of asynchronous transfer of control shows a
database transaction. The database operation may be cancelled (through a
special input key) unless the commit transaction has begun. The code is
extracted from the Rationale (1995, §9.4):</p>
<div class="language-ada codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ada codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>with</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Ada</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Finalization</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>package</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Txn_Pkg</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>is</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Txn_Status</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>is</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Incomplete</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Failed</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Succeeded</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Transaction</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>is</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>new</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Ada</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Finalization</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Limited_Controlled</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>with</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>private</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>procedure</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Finalize</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Txn</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>in</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>out</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>transaction</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>procedure</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Set_Status</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Txn</span><span class="token plain">    </span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>in</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>out</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Transaction</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">                         </span><span class="token variable" style=color:#f8f8f2>Status</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>in</span><span class="token plain">     </span><span class="token variable" style=color:#f8f8f2>Txn_Status</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>private</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Transaction</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>is</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>new</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Ada</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Finalization</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Limited_Controlled</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>with</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>record</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token variable" style=color:#f8f8f2>Status</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Txn_Status</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Incomplete</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token keyword" style=color:#66d9ef>pragma</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Atomic</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Status</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token comment" style=color:#8292a2;font-style:italic>-- More components</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>record</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Txn_Pkg</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic>-----------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>package</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>body</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Txn_Pkg</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>is</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>procedure</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Finalize</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Txn</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>in</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>out</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Transaction</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>is</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>begin</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#8292a2;font-style:italic>-- Finalization runs with abort and ATC deferred</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Txn</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Status</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>=</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Succeeded</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>then</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token variable" style=color:#f8f8f2>Commit</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Txn</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>else</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token variable" style=color:#f8f8f2>Rollback</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Txn</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Finalize</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token comment" style=color:#8292a2;font-style:italic>-- body of procedure Set_Status</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Txn_Pkg</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic>----------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic>-- sample code block showing how Txn_Pkg could be used:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>declare</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token variable" style=color:#f8f8f2>Database_Txn</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Transaction</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token comment" style=color:#8292a2;font-style:italic>-- declare a transaction, will commit or abort during finalization</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>begin</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>select</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic>-- wait for a cancel key from the input device</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token variable" style=color:#f8f8f2>Input_Device</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Wait_For_Cancel</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#8292a2;font-style:italic>-- the Status remains Incomplete, so that the transaction will not commit</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>then</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>abort</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic>-- do the transaction</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>begin</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token variable" style=color:#f8f8f2>Read</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Database_Txn</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token variable" style=color:#f8f8f2>Write</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Database_Txn</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token variable" style=color:#f8f8f2>Set_Status</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Database_Txn</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Succeeded</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token comment" style=color:#8292a2;font-style:italic>-- set status to ensure the transaction is committed</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>exception</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token keyword" style=color:#66d9ef>when</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>others</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>=></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token variable" style=color:#f8f8f2>Ada</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Text_IO</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Put_Line</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token string" style=color:#a6e22e>"Operation failed with unhandled exception:"</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token variable" style=color:#f8f8f2>Set_Status</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>Database_Txn</span><span class="token punctuation" style=color:#f8f8f2>,</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Failed</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>select</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token comment" style=color:#8292a2;font-style:italic>-- Finalize on Database_Txn will be called here and, based on the recorded</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token comment" style=color:#8292a2;font-style:italic>-- status, will either commit or abort the transaction.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>end</span><span class="token punctuation" style=color:#f8f8f2>;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=rationale-2>rationale<a href=#rationale-2 class=hash-link aria-label="Direct link to rationale" title="Direct link to rationale">​</a></h4>
<p>When an abort statement is executed, there is no way to know what the
targeted task was doing beforehand. Data for which the target task is
responsible might be left in an inconsistent state. The overall effect
on the system of aborting a task in such an uncontrolled way requires
careful analysis. The system design must ensure that all tasks depending
on the aborted task can detect the termination and respond
appropriately.</p>
<p>Tasks are not aborted until they reach an abort completion point such as
beginning or end of elaboration, a delay statement, an accept statement,
an entry call, a select statement, task allocation, or the execution of
an exception handler. Consequently, the abort statement might not
release processor resources as soon as you might expect. It also might
not stop a runaway task because the task might be executing an infinite
loop containing no abort completion points. There is no guarantee that a
task will not abort until an abort completion point in multiprocessor
systems, but the task will almost always stop running right away.</p>
<p>An asynchronous select statement allows an external event to cause a
task to begin execution at a new point, without having to abort and
restart the task (Rationale 1995, §9.3). Because the triggering
statement and the abortable statement execute in parallel until one of
them completes and forces the other to be abandoned, you need only one
thread of control. The asynchronous select statement improves
maintainability because the abortable statements are clearly delimited
and the transfer cannot be mistakenly redirected.</p>
<p>In task bodies and in the abortable part of an asynchronous select, you
should avoid assigning to nonatomic global objects, primarily because of
the risk of an abort occurring before the nonatomic assignment
completes. If you have one or more abort statements in your application
and the assignment is disrupted, the target object can become abnormal,
and subsequent uses of the object lead to erroneous execution (Ada
Reference Manual 1995, §9.8). In the case of scalar objects, you can use
the attribute 'Valid, but there is no equivalent attribute for nonscalar
objects. (See Guideline 5.9.1 for a discussion of the 'Valid attribute.)
You also can still safely assign to local objects and call operations of
global protected objects.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=abnormal-termination>Abnormal Termination<a href=#abnormal-termination class=hash-link aria-label="Direct link to Abnormal Termination" title="Direct link to Abnormal Termination">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=guideline-3>guideline<a href=#guideline-3 class=hash-link aria-label="Direct link to guideline" title="Direct link to guideline">​</a></h4>
<ul>
<li>Place an exception handler for others at the end of a task body.</li>
<li>Consider having each exception handler at the end of a task body
report the task's demise.</li>
<li>Do not rely on the task status to determine whether a rendezvous can
be made with the task.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=example-3>example<a href=#example-3 class=hash-link aria-label="Direct link to example" title="Direct link to example">​</a></h4>
<p>This is one of many tasks updating the positions of blips on a radar
screen. When started, it is given part of the name by which its parent
knows it. Should it terminate due to an exception, it signals the fact
in one of its parent's data structures:</p>
<div class="language-ada codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ada codeBlock_bY9V thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_e6Vv><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#66d9ef>task</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>type</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Track</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>My_Index</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Track_Index</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>is</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token punctuation" style=color:#f8f8f2>..</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Track</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic>---------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>task</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>body</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Track</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>is</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">     </span><span class="token variable" style=color:#f8f8f2>Neutral</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>:</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Boolean</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> </span><span class="token boolean" style=color:#ae81ff>True</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>begin</span><span class="token plain">  </span><span class="token comment" style=color:#8292a2;font-style:italic>-- Track</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>select</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>accept</span><span class="token plain"> </span><span class="token punctuation" style=color:#f8f8f2>..</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#f8f8f2>..</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>or</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>terminate</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>select</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token punctuation" style=color:#f8f8f2>..</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>exception</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">   </span><span class="token keyword" style=color:#66d9ef>when</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>others</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>=></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>not</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Neutral</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>then</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">         </span><span class="token variable" style=color:#f8f8f2>Station</span><span class="token punctuation" style=color:#f8f8f2>(</span><span class="token variable" style=color:#f8f8f2>My_Index</span><span class="token punctuation" style=color:#f8f8f2>)</span><span class="token punctuation" style=color:#f8f8f2>.</span><span class="token variable" style=color:#f8f8f2>Status</span><span class="token plain"> </span><span class="token operator" style=color:#66d9ef>:=</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Dead</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token keyword" style=color:#66d9ef>if</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#66d9ef>end</span><span class="token plain"> </span><span class="token variable" style=color:#f8f8f2>Track</span><span class="token punctuation" style=color:#f8f8f2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#8292a2;font-style:italic>---------------------------------------------------------------------</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=rationale-3>rationale<a href=#rationale-3 class=hash-link aria-label="Direct link to rationale" title="Direct link to rationale">​</a></h4>
<p>A task will terminate if an exception is raised within it for which it
has no handler. In such a case, the exception is not propagated outside
of the task (unless it occurs during a rendezvous). The task simply dies
with no notification to other tasks in the program. Therefore, providing
exception handlers within the task, and especially a handler for others,
ensures that a task can regain control after an exception occurs. If the
task cannot proceed normally after handling an exception, this affords
it the opportunity to shut itself down cleanly and to notify tasks
responsible for error recovery necessitated by the abnormal termination
of the task.</p>
<p>You should not use the task status to determine whether a rendezvous can
be made with the task. If Task A depends on Task B and Task A checks the
status flag before it rendezvouses with Task B, there is a potential
that Task B fails between the status test and the rendezvous. In this
case, Task A must provide an exception handler to handle the
Tasking_Error exception raised by the call to an entry of an abnormal
task (see Guideline 6.3.1).</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=circular-task-calls>Circular Task Calls<a href=#circular-task-calls class=hash-link aria-label="Direct link to Circular Task Calls" title="Direct link to Circular Task Calls">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=guideline-4>guideline<a href=#guideline-4 class=hash-link aria-label="Direct link to guideline" title="Direct link to guideline">​</a></h4>
<ul>
<li>Do not call a task entry that directly or indirectly results in a
call to an entry of the original calling task.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=rationale-4>rationale<a href=#rationale-4 class=hash-link aria-label="Direct link to rationale" title="Direct link to rationale">​</a></h4>
<p>A software failure known as task deadlock will occur if a task calls one
of its own entries directly or indirectly via a circular chain of calls.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=setting-exit-status>Setting Exit Status<a href=#setting-exit-status class=hash-link aria-label="Direct link to Setting Exit Status" title="Direct link to Setting Exit Status">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=guideline-5>guideline<a href=#guideline-5 class=hash-link aria-label="Direct link to guideline" title="Direct link to guideline">​</a></h4>
<ul>
<li>Avoid race conditions in setting an exit status code from the main
program when using the procedure
Ada.Command_Line.Set_Exit_Status.</li>
<li>In a program with multiple tasks, encapsulate, serialize, and check
calls to the procedure Ada.Command_Line.Set_Exit_Status.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=rationale-5>rationale<a href=#rationale-5 class=hash-link aria-label="Direct link to rationale" title="Direct link to rationale">​</a></h4>
<p>In accordance with the rules of Ada, tasks in library-level packages may
terminate after the main program task. If the program permits multiple
tasks to use Set_Exit_Status, then there can be no guarantee that any
particular status value is the one actually returned.</div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/style-guide/s6/02><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>6.2 Communication</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/style-guide/s6/04><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>6.4 Summary</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#avoiding-undesired-termination class="table-of-contents__link toc-highlight">Avoiding Undesired Termination</a><li><a href=#normal-termination class="table-of-contents__link toc-highlight">Normal Termination</a><li><a href=#the-abort-statement class="table-of-contents__link toc-highlight">The Abort Statement</a><li><a href=#abnormal-termination class="table-of-contents__link toc-highlight">Abnormal Termination</a><li><a href=#circular-task-calls class="table-of-contents__link toc-highlight">Circular Task Calls</a><li><a href=#setting-exit-status class="table-of-contents__link toc-highlight">Setting Exit Status</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Learning</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs/learn/why-ada>Tutorial</a><li class=footer__item><a class=footer__link-item href=/docs/learn/books>Books</a><li class=footer__item><a href=https://learn.adacore.com target=_blank rel="noopener noreferrer" class=footer__link-item>Learn Ada (by AdaCore)</a><li class=footer__item><a href=https://learn.adacore.com/courses/intro-to-spark/index.html target=_blank rel="noopener noreferrer" class=footer__link-item>Learn SPARK (by AdaCore)</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs/arm>Reference Manual</a><li class=footer__item><a class=footer__link-item href=/docs/style-guide/Ada_Style_Guide>Style Guide</a><li class=footer__item><a href=https://search.ada-lang.io target=_blank rel="noopener noreferrer" class=footer__link-item>Code Search<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/bracke/AdaReferenceCard/releases target=_blank rel="noopener noreferrer" class=footer__link-item>Reference Card / Cheatsheet<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://forum.ada-lang.io target=_blank rel="noopener noreferrer" class="footer__link-item fa-icon footer__image footer-discourse-link">Forum<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://stackoverflow.com/questions/tagged/ada target=_blank rel="noopener noreferrer" class="footer__link-item fa-icon footer__image footer-stackoverflow-link">Stack Overflow<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.reddit.com/r/ada/ target=_blank rel="noopener noreferrer" class="footer__link-item fa-icon footer__image footer-reddit-link">Reddit<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://gitter.im/ada-lang/Lobby target=_blank rel="noopener noreferrer" class="footer__link-item fa-icon footer__image footer-gitter-link">Gitter<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://t.me/ada_lang target=_blank rel="noopener noreferrer" class="footer__link-item fa-icon footer__image footer-telegram-link">Telegram<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://discord.gg/edM2czVKN4 target=_blank rel="noopener noreferrer" class="footer__link-item fa-icon footer__image footer-discord-link">Discord<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://arg.adaic.org/community-input target=_blank rel="noopener noreferrer" class=footer__link-item>ARG Community Input<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Ecosystem</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://alire.ada.dev/ target=_blank rel="noopener noreferrer" class=footer__link-item>Alire (Ada package manager)<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/ohenley/awesome-ada target=_blank rel="noopener noreferrer" class=footer__link-item>Awesome Ada<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://ada-planet.blogspot.com/ target=_blank rel="noopener noreferrer" class=footer__link-item>News, by Ada Planet<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://arg.adaic.org/home target=_blank rel="noopener noreferrer" class=footer__link-item>Ada Rapporteur Group<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://ada-europe.org/ target=_blank rel="noopener noreferrer" class=footer__link-item>Ada Europe<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/ada-lang-io/ada-lang-io target=_blank rel="noopener noreferrer" class="footer__link-item fa-icon footer__image footer-github-link">GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/img/ada_logo.svg alt=Alt class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width=128 height=128><img src=/img/ada_logo.svg alt=Alt class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width=128 height=128></div><div class=footer__copyright>Copyright © 2026 and licensed under Apache 2.0 unless otherwise noted, by the ada-lang-io developers. Built with <a href=https://docusaurus.io/>Docusaurus</a>.</div></div></div></footer></div>