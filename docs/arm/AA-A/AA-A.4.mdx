---
sidebar_position:  124
---

# A.4. String Handling

:::danger
This Reference Manual output has not been verified,
and may contain omissions or errors.
Report any problems on the [tracking issue](https://github.com/ada-lang-io/ada-lang-io/issues/20)
:::

import Admonition from "@theme/Admonition";
import AnnotatedOnly from "@site/src/components/AnnotatedOnly";
import CodeBlock from "@theme/CodeBlock";
import MarginText from "@site/src/components/MarginText";
import MarginInfo from "@site/src/components/MarginInfo";

<MarginText>1/3</MarginText>
<MarginInfo items={["AI95-00285-01", "AI05-0299-1"]} />
<p>This subclause presents the specifications of the package Strings and several child packages, which provide facilities for dealing with string data. Fixed-length, bounded-length, and unbounded-length strings are supported, for String, Wide{"_"}String, and Wide{"_"}Wide{"_"}String. The string-handling subprograms include searches for pattern strings and for characters in program-specified sets, translation (via a character-to-character mapping), and transformation (replacing, inserting, overwriting, and deleting of substrings). <br /></p>

<AnnotatedOnly>

#### Extensions to Ada 83

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>1.a/3</MarginText>
<MarginInfo items={["AI05-0299-1"]} />
<Admonition type="aarm" aarm="note">
This subclause is new to Ada 95. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>1.b/2</MarginText>
<MarginInfo items={["AI95-00285-01"]} />
<Admonition type="aarm" aarm="note">
Included Wide{"_"}Wide{"_"}String in this description; the individual changes are documented as extensions as needed. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.1"></a>

## A.4.1  The Package Strings

<MarginText>1_A.4.1</MarginText>
<p>The package Strings provides declarations common to the string handling packages. <br /></p>


#### Static Semantics

<MarginText>2_A.4.1</MarginText>
<p>The library package Strings has the following declaration: <br /></p>

<MarginText>3/5_A.4.1</MarginText>
<MarginInfo items={["AI12-0414-1"]} />
<CodeBlock language="ada">
package Ada.Strings{"\n"}   with Pure is{"\n"}
<MarginText>4/2_A.4.1</MarginText>
<MarginInfo items={["AI95-00285-01"]} />
   Space      : constant Character      := ' ';{"\n"}   Wide{"_"}Space : constant Wide{"_"}Character := ' ';{"\n"}   Wide{"_"}Wide{"_"}Space : constant Wide{"_"}Wide{"_"}Character := ' ';{"\n"}
<MarginText>5_A.4.1</MarginText>
   Length{"_"}Error, Pattern{"_"}Error, Index{"_"}Error, Translation{"_"}Error : exception;{"\n"}
<MarginText>6_A.4.1</MarginText>
   type Alignment  is (Left, Right, Center);{"\n"}   type Truncation is (Left, Right, Error);{"\n"}   type Membership is (Inside, Outside);{"\n"}   type Direction  is (Forward, Backward);{"\n"}   type Trim{"_"}End   is (Left, Right, Both);{"\n"}end Ada.Strings;{"\n"}

</CodeBlock>
<AnnotatedOnly>

#### Incompatibilities With Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>6.a/3_A.4.1</MarginText>
<MarginInfo items={["AI95-00285-01", "AI05-0005-1"]} />
<Admonition type="aarm" aarm="note">
Constant Wide{"_"}Wide{"_"}Space is added to Ada.Strings. If Ada.Strings is referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, and an entity <i>E</i> with a <code><a href="/docs/arm/AA-3/AA-3.1#S0022">defining_identifier</a></code> of Wide{"_"}Wide{"_"}Space is defined in a package that is also referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, the entity <i>E</i> may no longer be use-visible, resulting in errors. This should be rare and is easily fixed if it does occur. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.2"></a>

## A.4.2  The Package Strings.Maps

<MarginText>1/5_A.4.2</MarginText>
<MarginInfo items={["AI12-0445-1"]} />
<p>The package Strings.Maps defines the types, operations, and other entities necessary for character sets and character-to-character mappings. <br /></p>


#### Static Semantics

<MarginText>2_A.4.2</MarginText>
<p>The library package Strings.Maps has the following declaration: <br /></p>

<MarginText>3/5_A.4.2</MarginText>
<MarginInfo items={["AI95-00362-01", "AI12-0414-1"]} />
<CodeBlock language="ada">
package Ada.Strings.Maps{"\n"}   with Pure is{"\n"}
<MarginText>4/5_A.4.2</MarginText>
<MarginInfo items={["AI95-00161-01", "AI12-0399-1"]} />
   -- Representation for a set of character values:{"\n"}   type Character{"_"}Set is private{"\n"}      with Preelaborable{"_"}Initialization;{"\n"}
<MarginText>5_A.4.2</MarginText>
   Null{"_"}Set : constant Character{"_"}Set;{"\n"}
<MarginText>6_A.4.2</MarginText>
   type Character{"_"}Range is{"\n"}     record{"\n"}        Low  : Character;{"\n"}        High : Character;{"\n"}     end record;{"\n"}   -- Represents Character range Low..High{"\n"}
<MarginText>7_A.4.2</MarginText>
   type Character{"_"}Ranges is array (Positive range {"<"}{">"}) of Character{"_"}Range;{"\n"}
<MarginText>8_A.4.2</MarginText>
   function To{"_"}Set    (Ranges : in Character{"_"}Ranges)return Character{"_"}Set;{"\n"}
<MarginText>9_A.4.2</MarginText>
   function To{"_"}Set    (Span   : in Character{"_"}Range)return Character{"_"}Set;{"\n"}
<MarginText>10_A.4.2</MarginText>
   function To{"_"}Ranges (Set    : in Character{"_"}Set)  return Character{"_"}Ranges;{"\n"}
<MarginText>11_A.4.2</MarginText>
   function "="   (Left, Right : in Character{"_"}Set) return Boolean;{"\n"}
<MarginText>12_A.4.2</MarginText>
   function "not" (Right : in Character{"_"}Set)       return Character{"_"}Set;{"\n"}   function "and" (Left, Right : in Character{"_"}Set) return Character{"_"}Set;{"\n"}   function "or"  (Left, Right : in Character{"_"}Set) return Character{"_"}Set;{"\n"}   function "xor" (Left, Right : in Character{"_"}Set) return Character{"_"}Set;{"\n"}   function "-"   (Left, Right : in Character{"_"}Set) return Character{"_"}Set;{"\n"}
<MarginText>13_A.4.2</MarginText>
   function Is{"_"}In (Element : in Character;{"\n"}                   Set     : in Character{"_"}Set){"\n"}      return Boolean;{"\n"}
<MarginText>14_A.4.2</MarginText>
   function Is{"_"}Subset (Elements : in Character{"_"}Set;{"\n"}                       Set      : in Character{"_"}Set){"\n"}      return Boolean;{"\n"}
<MarginText>15_A.4.2</MarginText>
   function "{"<"}=" (Left  : in Character{"_"}Set;{"\n"}                  Right : in Character{"_"}Set){"\n"}      return Boolean renames Is{"_"}Subset;{"\n"}
<MarginText>16_A.4.2</MarginText>
   -- Alternative representation for a set of character values:{"\n"}   subtype Character{"_"}Sequence is String;{"\n"}
<MarginText>17_A.4.2</MarginText>
   function To{"_"}Set (Sequence  : in Character{"_"}Sequence)return Character{"_"}Set;{"\n"}
<MarginText>18_A.4.2</MarginText>
   function To{"_"}Set (Singleton : in Character)     return Character{"_"}Set;{"\n"}
<MarginText>19_A.4.2</MarginText>
   function To{"_"}Sequence (Set  : in Character{"_"}Set) return Character{"_"}Sequence;{"\n"}
<MarginText>20/5_A.4.2</MarginText>
<MarginInfo items={["AI95-00161-01", "AI12-0399-1"]} />
   -- Representation for a character to character mapping:{"\n"}   type Character{"_"}Mapping is private{"\n"}      with Preelaborable{"_"}Initialization;{"\n"}
<MarginText>21_A.4.2</MarginText>
   function Value (Map     : in Character{"_"}Mapping;{"\n"}                   Element : in Character){"\n"}      return Character;{"\n"}
<MarginText>22_A.4.2</MarginText>
   Identity : constant Character{"_"}Mapping;{"\n"}
<MarginText>23_A.4.2</MarginText>
   function To{"_"}Mapping (From, To : in Character{"_"}Sequence){"\n"}      return Character{"_"}Mapping;{"\n"}
<MarginText>24_A.4.2</MarginText>
   function To{"_"}Domain (Map : in Character{"_"}Mapping){"\n"}      return Character{"_"}Sequence;{"\n"}   function To{"_"}Range  (Map : in Character{"_"}Mapping){"\n"}      return Character{"_"}Sequence;{"\n"}
<MarginText>25_A.4.2</MarginText>
   type Character{"_"}Mapping{"_"}Function is{"\n"}      access function (From : in Character) return Character;{"\n"}
<MarginText>26_A.4.2</MarginText>
private{"\n"}   ... -- not specified by the language{"\n"}end Ada.Strings.Maps;{"\n"}

</CodeBlock>
<MarginText>27_A.4.2</MarginText>
<p>An object of type Character{"_"}Set represents a set of characters.<br /></p>

<MarginText>28_A.4.2</MarginText>
<p>Null{"_"}Set represents the set containing no characters.<br /></p>

<MarginText>29_A.4.2</MarginText>
<p>An object Obj of type Character{"_"}Range represents the set of characters in the range Obj.Low .. Obj.High.<br /></p>

<MarginText>30_A.4.2</MarginText>
<p>An object Obj of type Character{"_"}Ranges represents the union of the sets corresponding to Obj(I) for I in Obj'Range. <br /></p>

<MarginText>31_A.4.2</MarginText>
<CodeBlock language="ada">
function To{"_"}Set (Ranges : in Character{"_"}Ranges) return Character{"_"}Set;{"\n"}

</CodeBlock>
<MarginText>32/3_A.4.2</MarginText>
<MarginInfo items={["AI05-0264-1"]} />
<p class="Indented4">If Ranges'Length=0 then Null{"_"}Set is returned; otherwise, the returned value represents the set corresponding to Ranges.<br /></p>

<MarginText>33_A.4.2</MarginText>
<CodeBlock language="ada">
function To{"_"}Set (Span : in Character{"_"}Range) return Character{"_"}Set;{"\n"}

</CodeBlock>
<MarginText>34_A.4.2</MarginText>
<p class="Indented4">The returned value represents the set containing each character in Span. <br /></p>

<MarginText>35_A.4.2</MarginText>
<CodeBlock language="ada">
function To{"_"}Ranges (Set : in Character{"_"}Set) return Character{"_"}Ranges;{"\n"}

</CodeBlock>
<MarginText>36/3_A.4.2</MarginText>
<MarginInfo items={["AI05-0264-1"]} />
<p class="Indented4">If Set = Null{"_"}Set, then an empty Character{"_"}Ranges array is returned; otherwise, the shortest array of contiguous ranges of Character values in Set, in increasing order of Low, is returned.<br /></p>

<MarginText>37_A.4.2</MarginText>
<CodeBlock language="ada">
function "=" (Left, Right : in Character{"_"}Set) return Boolean;{"\n"}

</CodeBlock>
<MarginText>38_A.4.2</MarginText>
<p class="Indented4">The function "=" returns True if Left and Right represent identical sets, and False otherwise. <br /></p>

<MarginText>39_A.4.2</MarginText>
<p>Each of the logical operators "<b>not</b>", "<b>and</b>", "<b>or</b>", and "<b>xor</b>" returns a Character{"_"}Set value that represents the set obtained by applying the corresponding operation to the set(s) represented by the parameter(s) of the operator. "&ndash;"(Left, Right) is equivalent to "and"(Left, "not"(Right)). <br /></p>

<AnnotatedOnly>
<MarginText>39.a_A.4.2</MarginText>
<Admonition type="aarm" aarm="reason">
<b></b>The set minus operator is provided for efficiency.<br />
</Admonition>
</AnnotatedOnly>

<MarginText>40_A.4.2</MarginText>
<CodeBlock language="ada">
function Is{"_"}In (Element : in Character;{"\n"}                Set     : in Character{"_"}Set);{"\n"}   return Boolean;{"\n"}

</CodeBlock>
<MarginText>41_A.4.2</MarginText>
<p class="Indented4">Is{"_"}In returns True if Element is in Set, and False otherwise.<br /></p>

<MarginText>42_A.4.2</MarginText>
<CodeBlock language="ada">
function Is{"_"}Subset (Elements : in Character{"_"}Set;{"\n"}                    Set      : in Character{"_"}Set){"\n"}   return Boolean;{"\n"}

</CodeBlock>
<MarginText>43_A.4.2</MarginText>
<p class="Indented4">Is{"_"}Subset returns True if Elements is a subset of Set, and False otherwise.<br /></p>

<MarginText>44_A.4.2</MarginText>
<CodeBlock language="ada">
subtype Character{"_"}Sequence is String;{"\n"}

</CodeBlock>
<MarginText>45_A.4.2</MarginText>
<p class="Indented4">The Character{"_"}Sequence subtype is used to portray a set of character values and also to identify the domain and range of a character mapping. <br /></p>

<AnnotatedOnly>
<MarginText>45.a_A.4.2</MarginText>
<Admonition type="aarm" aarm="reason">
<b></b>Although a named subtype is redundant &mdash; the predefined type String could have been used for the parameter to To{"_"}Set and To{"_"}Mapping below &mdash; the use of a differently named subtype identifies the intended purpose of the parameter. <br />
</Admonition>
</AnnotatedOnly>

<MarginText>46_A.4.2</MarginText>
<CodeBlock language="ada">
function To{"_"}Set (Sequence  : in Character{"_"}Sequence) return Character{"_"}Set;{"\n"}{"\n"}function To{"_"}Set (Singleton : in Character)          return Character{"_"}Set;{"\n"}

</CodeBlock>
<MarginText>47_A.4.2</MarginText>
<p class="Indented4">Sequence portrays the set of character values that it explicitly contains (ignoring duplicates). Singleton portrays the set comprising a single Character. Each of the To{"_"}Set functions returns a Character{"_"}Set value that represents the set portrayed by Sequence or Singleton.<br /></p>

<MarginText>48_A.4.2</MarginText>
<CodeBlock language="ada">
function To{"_"}Sequence (Set : in Character{"_"}Set) return Character{"_"}Sequence;{"\n"}

</CodeBlock>
<MarginText>49_A.4.2</MarginText>
<p class="Indented4">The function To{"_"}Sequence returns a Character{"_"}Sequence value containing each of the characters in the set represented by Set, in ascending order with no duplicates.<br /></p>

<MarginText>50_A.4.2</MarginText>
<CodeBlock language="ada">
type Character{"_"}Mapping is private;{"\n"}

</CodeBlock>
<MarginText>51_A.4.2</MarginText>
<p class="Indented4">An object of type Character{"_"}Mapping represents a Character-to-Character mapping.<br /></p>

<MarginText>52_A.4.2</MarginText>
<CodeBlock language="ada">
function Value (Map     : in Character{"_"}Mapping;{"\n"}                Element : in Character){"\n"}   return Character;{"\n"}

</CodeBlock>
<MarginText>53_A.4.2</MarginText>
<p class="Indented4">The function Value returns the Character value to which Element maps with respect to the mapping represented by Map. <br /></p>

<MarginText>54_A.4.2</MarginText>
<p>A character C <i>matches</i> a pattern character P with respect to a given Character{"_"}Mapping value Map if Value(Map, C) = P. A string S <i>matches</i> a pattern string P with respect to a given Character{"_"}Mapping if their lengths are the same and if each character in S matches its corresponding character in the pattern string P. <br /></p>

<AnnotatedOnly>
<MarginText>54.a_A.4.2</MarginText>
<Admonition type="aarm" aarm="discussion">
<b></b>In an earlier version of the string handling packages, the definition of matching was symmetrical, namely C matches P if Value(Map,C) = Value(Map,P). However, applying the mapping to the pattern was confusing according to some reviewers. Furthermore, if the symmetrical version is needed, it can be achieved by applying the mapping to the pattern (via translation) prior to passing it as a parameter. <br />
</Admonition>
</AnnotatedOnly>

<MarginText>55_A.4.2</MarginText>
<p>String handling subprograms that deal with character mappings have parameters whose type is Character{"_"}Mapping. <br /></p>

<MarginText>56_A.4.2</MarginText>
<CodeBlock language="ada">
Identity : constant Character{"_"}Mapping;{"\n"}

</CodeBlock>
<MarginText>57_A.4.2</MarginText>
<p class="Indented4">Identity maps each Character to itself.<br /></p>

<MarginText>58_A.4.2</MarginText>
<CodeBlock language="ada">
function To{"_"}Mapping (From, To : in Character{"_"}Sequence){"\n"}    return Character{"_"}Mapping;{"\n"}

</CodeBlock>
<MarginText>59_A.4.2</MarginText>
<p class="Indented4">To{"_"}Mapping produces a Character{"_"}Mapping such that each element of From maps to the corresponding element of To, and each other character maps to itself. If From'Length /= To'Length, or if some character is repeated in From, then Translation{"_"}Error is propagated.<br /></p>

<MarginText>60_A.4.2</MarginText>
<CodeBlock language="ada">
function To{"_"}Domain (Map : in Character{"_"}Mapping) return Character{"_"}Sequence;{"\n"}

</CodeBlock>
<MarginText>61_A.4.2</MarginText>
<p class="Indented4">To{"_"}Domain returns the shortest Character{"_"}Sequence value D such that each character not in D maps to itself, and such that the characters in D are in ascending order. The lower bound of D is 1.<br /></p>

<MarginText>62_A.4.2</MarginText>
<CodeBlock language="ada">
function To{"_"}Range  (Map : in Character{"_"}Mapping) return Character{"_"}Sequence;{"\n"}

</CodeBlock>
<MarginText>63/1_A.4.2</MarginText>
<MarginInfo items={["AI95-00151-01"]} />
<p class="Indented4">{"{"}<i>8652/0048</i>{"}"} To{"_"}Range returns the Character{"_"}Sequence value R, such that if D = To{"_"}Domain(Map), then R has the same bounds as D, and D(I) maps to R(I) for each I in D'Range. <br /></p>

<MarginText>64_A.4.2</MarginText>
<p>An object F of type Character{"_"}Mapping{"_"}Function maps a Character value C to the Character value F.<b>all</b>(C), which is said to <i>match</i> C with respect to mapping function F. <br /></p>

<AnnotatedOnly>
<MarginText>65_A.4.2</MarginText>
<Admonition type="aarm" aarm="note">
NOTE 1   Character{"_"}Mapping and Character{"_"}Mapping{"_"}Function are used both for character equivalence mappings in the search subprograms (such as for case insensitivity) and as transformational mappings in the Translate subprograms.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>66_A.4.2</MarginText>
<Admonition type="aarm" aarm="note">
NOTE 2   To{"_"}Domain(Identity) and To{"_"}Range(Identity) each returns the null string. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>66.a_A.4.2</MarginText>
<Admonition type="aarm" aarm="reason">
<b></b>Package Strings.Maps is not pure, since it declares an access-to-subprogram type. <br />
</Admonition>
</AnnotatedOnly>


#### Examples

<MarginText>67/5_A.4.2</MarginText>
<MarginInfo items={["AI12-0429-1"]} />
<p><i>Example of use of Strings.Maps.To{"_"}Mapping:</i><br /></p>

<MarginText>68_A.4.2</MarginText>
<p>To{"_"}Mapping("ABCD", "ZZAB") returns a Character{"_"}Mapping that maps 'A' and 'B' to 'Z', 'C' to 'A', 'D' to 'B', and each other Character to itself. <br /></p>

<AnnotatedOnly>

#### Extensions to Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>68.a/2_A.4.2</MarginText>
<MarginInfo items={["AI95-00161-01"]} />
<Admonition type="aarm" aarm="correction">
<b>Amendment </b> Added <code><a href="/docs/arm/AA-2/AA-2.8#S0019">pragma</a></code> Preelaborable{"_"}Initialization to types Character{"_"}Set and Character{"_"}Mapping, so that they can be used to declare default-initialized objects in preelaborated units.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>68.b/2_A.4.2</MarginText>
<MarginInfo items={["AI95-00362-01"]} />
<Admonition type="aarm" aarm="note">
Strings.Maps is now Pure, so it can be used in pure units. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>68.c/2_A.4.2</MarginText>
<MarginInfo items={["AI95-00151-01"]} />
<Admonition type="aarm" aarm="note">
{"{"}<i>8652/0048</i>{"}"} <b>Corrigendum:</b> Corrected the definition of the range of the result of To{"_"}Range, since the Ada 95 definition makes no sense. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.3"></a>

## A.4.3  Fixed-Length String Handling

<MarginText>1_A.4.3</MarginText>
<p>The language-defined package Strings.Fixed provides string-handling subprograms for fixed-length strings; that is, for values of type Standard.String. Several of these subprograms are procedures that modify the contents of a String that is passed as an <b>out</b> or an <b>in</b> <b>out</b> parameter; each has additional parameters to control the effect when the logical length of the result differs from the parameter's length.<br /></p>

<MarginText>2_A.4.3</MarginText>
<p>For each function that returns a String, the lower bound of the returned value is 1. <br /></p>

<AnnotatedOnly>
<MarginText>2.a/2_A.4.3</MarginText>
<MarginInfo items={["AI95-00114-01"]} />
<Admonition type="aarm" aarm="discussion">
<b></b>Most operations that yield a String are provided both as a function and as a procedure. The functional form is possibly a more aesthetic style but may introduce overhead due to extra copying or dynamic memory usage in some implementations. Thus a procedural form, with an <b>in</b> <b>out</b> parameter so that all copying is done `in place', is also supplied.<br />
</Admonition>
</AnnotatedOnly>

<MarginText>3_A.4.3</MarginText>
<p>The basic model embodied in the package is that a fixed-length string comprises significant characters and possibly padding (with space characters) on either or both ends. When a shorter string is copied to a longer string, padding is inserted, and when a longer string is copied to a shorter one, padding is stripped. The Move procedure in Strings.Fixed, which takes a String as an <b>out</b> parameter, allows the programmer to control these effects. Similar control is provided by the string transformation procedures. <br /></p>


#### Static Semantics

<MarginText>4_A.4.3</MarginText>
<p>The library package Strings.Fixed has the following declaration: <br /></p>

<MarginText>5/5_A.4.3</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
with Ada.Strings.Maps;{"\n"}package Ada.Strings.Fixed{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized is{"\n"}
<MarginText>6_A.4.3</MarginText>
-- "Copy" procedure for strings of possibly different lengths{"\n"}
<MarginText>7_A.4.3</MarginText>
   procedure Move (Source  : in  String;{"\n"}                   Target  : out String;{"\n"}                   Drop    : in  Truncation := Error;{"\n"}                   Justify : in  Alignment  := Left;{"\n"}                   Pad     : in  Character  := Space);{"\n"}
<MarginText>8_A.4.3</MarginText>
-- Search subprograms{"\n"}
<MarginText>8.1/2_A.4.3</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   function Index (Source  : in String;{"\n"}                   Pattern : in String;{"\n"}                   From    : in Positive;{"\n"}                   Going   : in Direction := Forward;{"\n"}                   Mapping : in Maps.Character{"_"}Mapping := Maps.Identity){"\n"}      return Natural;{"\n"}
<MarginText>8.2/2_A.4.3</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   function Index (Source  : in String;{"\n"}                   Pattern : in String;{"\n"}                   From    : in Positive;{"\n"}                   Going   : in Direction := Forward;{"\n"}                   Mapping : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}      return Natural;{"\n"}
<MarginText>9_A.4.3</MarginText>
   function Index (Source   : in String;{"\n"}                   Pattern  : in String;{"\n"}                   Going    : in Direction := Forward;{"\n"}                   Mapping  : in Maps.Character{"_"}Mapping{"\n"}                                := Maps.Identity){"\n"}      return Natural;{"\n"}
<MarginText>10_A.4.3</MarginText>
   function Index (Source   : in String;{"\n"}                   Pattern  : in String;{"\n"}                   Going    : in Direction := Forward;{"\n"}                   Mapping  : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}      return Natural;{"\n"}
<MarginText>10.1/2_A.4.3</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   function Index (Source  : in String;{"\n"}                   Set     : in Maps.Character{"_"}Set;{"\n"}                   From    : in Positive;{"\n"}                   Test    : in Membership := Inside;{"\n"}                   Going   : in Direction := Forward){"\n"}      return Natural;{"\n"}
<MarginText>11_A.4.3</MarginText>
   function Index (Source : in String;{"\n"}                   Set    : in Maps.Character{"_"}Set;{"\n"}                   Test   : in Membership := Inside;{"\n"}                   Going  : in Direction  := Forward){"\n"}      return Natural;{"\n"}
<MarginText>11.1/2_A.4.3</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   function Index{"_"}Non{"_"}Blank (Source : in String;{"\n"}                             From   : in Positive;{"\n"}                             Going  : in Direction := Forward){"\n"}      return Natural;{"\n"}
<MarginText>12_A.4.3</MarginText>
   function Index{"_"}Non{"_"}Blank (Source : in String;{"\n"}                             Going  : in Direction := Forward){"\n"}      return Natural;{"\n"}
<MarginText>13_A.4.3</MarginText>
   function Count (Source   : in String;{"\n"}                   Pattern  : in String;{"\n"}                   Mapping  : in Maps.Character{"_"}Mapping{"\n"}                                 := Maps.Identity){"\n"}      return Natural;{"\n"}
<MarginText>14_A.4.3</MarginText>
   function Count (Source   : in String;{"\n"}                   Pattern  : in String;{"\n"}                   Mapping  : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}      return Natural;{"\n"}
<MarginText>15_A.4.3</MarginText>
   function Count (Source   : in String;{"\n"}                   Set      : in Maps.Character{"_"}Set){"\n"}      return Natural;{"\n"}
<MarginText>15.1/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0031-1"]} />
   procedure Find{"_"}Token (Source : in String;{"\n"}                         Set    : in Maps.Character{"_"}Set;{"\n"}                         From   : in Positive;{"\n"}                         Test   : in Membership;{"\n"}                         First  : out Positive;{"\n"}                         Last   : out Natural);{"\n"}
<MarginText>16_A.4.3</MarginText>
   procedure Find{"_"}Token (Source : in String;{"\n"}                         Set    : in Maps.Character{"_"}Set;{"\n"}                         Test   : in Membership;{"\n"}                         First  : out Positive;{"\n"}                         Last   : out Natural);{"\n"}
<MarginText>17_A.4.3</MarginText>
-- String translation subprograms{"\n"}
<MarginText>18_A.4.3</MarginText>
   function Translate (Source  : in String;{"\n"}                       Mapping : in Maps.Character{"_"}Mapping){"\n"}      return String;{"\n"}
<MarginText>19_A.4.3</MarginText>
   procedure Translate (Source  : in out String;{"\n"}                        Mapping : in Maps.Character{"_"}Mapping);{"\n"}
<MarginText>20_A.4.3</MarginText>
   function Translate (Source  : in String;{"\n"}                       Mapping : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}      return String;{"\n"}
<MarginText>21_A.4.3</MarginText>
   procedure Translate (Source  : in out String;{"\n"}                        Mapping : in Maps.Character{"_"}Mapping{"_"}Function);{"\n"}
<MarginText>22_A.4.3</MarginText>
-- String transformation subprograms{"\n"}
<MarginText>23_A.4.3</MarginText>
   function Replace{"_"}Slice (Source   : in String;{"\n"}                           Low      : in Positive;{"\n"}                           High     : in Natural;{"\n"}                           By       : in String){"\n"}      return String;{"\n"}
<MarginText>24_A.4.3</MarginText>
   procedure Replace{"_"}Slice (Source   : in out String;{"\n"}                            Low      : in Positive;{"\n"}                            High     : in Natural;{"\n"}                            By       : in String;{"\n"}                            Drop     : in Truncation := Error;{"\n"}                            Justify  : in Alignment  := Left;{"\n"}                            Pad      : in Character  := Space);{"\n"}
<MarginText>25_A.4.3</MarginText>
   function Insert (Source   : in String;{"\n"}                    Before   : in Positive;{"\n"}                    New{"_"}Item : in String){"\n"}      return String;{"\n"}
<MarginText>26_A.4.3</MarginText>
   procedure Insert (Source   : in out String;{"\n"}                     Before   : in Positive;{"\n"}                     New{"_"}Item : in String;{"\n"}                     Drop     : in Truncation := Error);{"\n"}
<MarginText>27_A.4.3</MarginText>
   function Overwrite (Source   : in String;{"\n"}                       Position : in Positive;{"\n"}                       New{"_"}Item : in String){"\n"}      return String;{"\n"}
<MarginText>28_A.4.3</MarginText>
   procedure Overwrite (Source   : in out String;{"\n"}                        Position : in Positive;{"\n"}                        New{"_"}Item : in String;{"\n"}                        Drop     : in Truncation := Right);{"\n"}
<MarginText>29_A.4.3</MarginText>
   function Delete (Source  : in String;{"\n"}                    From    : in Positive;{"\n"}                    Through : in Natural){"\n"}      return String;{"\n"}
<MarginText>30_A.4.3</MarginText>
   procedure Delete (Source  : in out String;{"\n"}                     From    : in Positive;{"\n"}                     Through : in Natural;{"\n"}                     Justify : in Alignment := Left;{"\n"}                     Pad     : in Character := Space);{"\n"}
<MarginText>31_A.4.3</MarginText>
 --String selector subprograms{"\n"}   function Trim (Source : in String;{"\n"}                  Side   : in Trim{"_"}End){"\n"}      return String;{"\n"}
<MarginText>32_A.4.3</MarginText>
   procedure Trim (Source  : in out String;{"\n"}                   Side    : in Trim{"_"}End;{"\n"}                   Justify : in Alignment := Left;{"\n"}                   Pad     : in Character := Space);{"\n"}
<MarginText>33_A.4.3</MarginText>
   function Trim (Source : in String;{"\n"}                  Left   : in Maps.Character{"_"}Set;{"\n"}                  Right  : in Maps.Character{"_"}Set){"\n"}      return String;{"\n"}
<MarginText>34_A.4.3</MarginText>
   procedure Trim (Source  : in out String;{"\n"}                   Left    : in Maps.Character{"_"}Set;{"\n"}                   Right   : in Maps.Character{"_"}Set;{"\n"}                   Justify : in Alignment := Strings.Left;{"\n"}                   Pad     : in Character := Space);{"\n"}
<MarginText>35_A.4.3</MarginText>
   function Head (Source : in String;{"\n"}                  Count  : in Natural;{"\n"}                  Pad    : in Character := Space){"\n"}      return String;{"\n"}
<MarginText>36_A.4.3</MarginText>
   procedure Head (Source  : in out String;{"\n"}                   Count   : in Natural;{"\n"}                   Justify : in Alignment := Left;{"\n"}                   Pad     : in Character := Space);{"\n"}
<MarginText>37_A.4.3</MarginText>
   function Tail (Source : in String;{"\n"}                  Count  : in Natural;{"\n"}                  Pad    : in Character := Space){"\n"}      return String;{"\n"}
<MarginText>38_A.4.3</MarginText>
   procedure Tail (Source  : in out String;{"\n"}                   Count   : in Natural;{"\n"}                   Justify : in Alignment := Left;{"\n"}                   Pad     : in Character := Space);{"\n"}
<MarginText>39_A.4.3</MarginText>
--String constructor functions{"\n"}
<MarginText>40_A.4.3</MarginText>
   function "{"*"}" (Left  : in Natural;{"\n"}                 Right : in Character) return String;{"\n"}
<MarginText>41_A.4.3</MarginText>
   function "{"*"}" (Left  : in Natural;{"\n"}                 Right : in String) return String;{"\n"}
<MarginText>42_A.4.3</MarginText>
end Ada.Strings.Fixed;{"\n"}

</CodeBlock>
<MarginText>43_A.4.3</MarginText>
<p>The effects of the above subprograms are as follows. <br /></p>

<MarginText>44_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Move (Source  : in  String;{"\n"}                Target  : out String;{"\n"}                Drop    : in  Truncation := Error;{"\n"}                Justify : in  Alignment  := Left;{"\n"}                Pad     : in  Character  := Space);{"\n"}

</CodeBlock>
<MarginText>45/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0264-1"]} />
<p class="Indented4">The Move procedure copies characters from Source to Target. If Source has the same length as Target, then the effect is to assign Source to Target. If Source is shorter than Target, then: <br /></p>

<MarginText>46_A.4.3</MarginText>
<ul>
<li>If Justify=Left, then Source is copied into the first Source'Length characters of Target.<br /></li>
<MarginText>47_A.4.3</MarginText>
<li>If Justify=Right, then Source is copied into the last Source'Length characters of Target.<br /></li>
<MarginText>48_A.4.3</MarginText>
<li>If Justify=Center, then Source is copied into the middle Source'Length characters of Target. In this case, if the difference in length between Target and Source is odd, then the extra Pad character is on the right.<br /></li>
<MarginText>49_A.4.3</MarginText>
<li>Pad is copied to each Target character not otherwise assigned. <br /></li>
</ul>
<MarginText>50_A.4.3</MarginText>
<p class="Indented4">If Source is longer than Target, then the effect is based on Drop. <br /></p>

<MarginText>51_A.4.3</MarginText>
<ul>
<li>If Drop=Left, then the rightmost Target'Length characters of Source are copied into Target.<br /></li>
<MarginText>52_A.4.3</MarginText>
<li>If Drop=Right, then the leftmost Target'Length characters of Source are copied into Target.<br /></li>
<MarginText>53_A.4.3</MarginText>
<li>If Drop=Error, then the effect depends on the value of the Justify parameter and also on whether any characters in Source other than Pad would fail to be copied: <br /></li>
</ul>
<MarginText>54_A.4.3</MarginText>
<ul>
<li>If Justify=Left, and if each of the rightmost Source'Length-Target'Length characters in Source is Pad, then the leftmost Target'Length characters of Source are copied to Target.<br /></li>
<MarginText>55_A.4.3</MarginText>
<li>If Justify=Right, and if each of the leftmost Source'Length-Target'Length characters in Source is Pad, then the rightmost Target'Length characters of Source are copied to Target.<br /></li>
<MarginText>56_A.4.3</MarginText>
<li>Otherwise, Length{"_"}Error is propagated. <br /></li>
</ul>
<AnnotatedOnly>
<MarginText>56.a_A.4.3</MarginText>
<Admonition type="aarm" aarm="ramification">
<b></b>The Move procedure will work even if Source and Target overlap.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>56.b_A.4.3</MarginText>
<Admonition type="aarm" aarm="reason">
<b></b>The order of parameters (Source before Target) corresponds to the order in COBOL's MOVE verb.<br />
</Admonition>
</AnnotatedOnly>

<MarginText>56.1/2_A.4.3</MarginText>
<CodeBlock language="ada">
function Index (Source  : in String;{"\n"}                Pattern : in String;{"\n"}                From    : in Positive;{"\n"}                Going   : in Direction := Forward;{"\n"}                Mapping : in Maps.Character{"_"}Mapping := Maps.Identity){"\n"}   return Natural;{"\n"}{"\n"}function Index (Source  : in String;{"\n"}                Pattern : in String;{"\n"}                From    : in Positive;{"\n"}                Going   : in Direction := Forward;{"\n"}                Mapping : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}   return Natural;{"\n"}

</CodeBlock>
<MarginText>56.2/3_A.4.3</MarginText>
<MarginInfo items={["AI95-00301-01", "AI05-0056-1"]} />
<p class="Indented4">Each Index function searches, starting from From, for a slice of Source, with length Pattern'Length, that matches Pattern with respect to Mapping; the parameter Going indicates the direction of the lookup. If Source is the null string, Index returns 0; otherwise, if From is not in Source'Range, then Index{"_"}Error is propagated. If Going = Forward, then Index returns the smallest index I which is greater than or equal to From such that the slice of Source starting at I matches Pattern. If Going = Backward, then Index returns the largest index I such that the slice of Source starting at I matches Pattern and has an upper bound less than or equal to From. If there is no such slice, then 0 is returned. If Pattern is the null string, then Pattern{"_"}Error is propagated.<br /></p>

<AnnotatedOnly>
<MarginText>56.c/2_A.4.3</MarginText>
<Admonition type="aarm" aarm="discussion">
<b></b>There is no default parameter for From; the default value would need to depend on other parameters (the bounds of Source and the direction Going). It is better to use overloaded functions rather than a special value to represent the default.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>56.d/2_A.4.3</MarginText>
<Admonition type="aarm" aarm="note">
There is no default value for the Mapping parameter that is a Character{"_"}Mapping{"_"}Function; if there were, a call would be ambiguous since there is also a default for the Mapping parameter that is a Character{"_"}Mapping.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>56.e/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0056-1"]} />
<Admonition type="aarm" aarm="note">
The language does not define when the Pattern{"_"}Error check is made. (That's because many common searching implementations require a nonempty pattern) That means that the result for a call like Index ("", "") could be 0 or could raise Pattern{"_"}Error. Similarly, in the call Index ("", "", From ={">"} 2), the language does not define whether Pattern{"_"}Error or Index{"_"}Error is raised.<br />
</Admonition>
</AnnotatedOnly>

<MarginText>57_A.4.3</MarginText>
<CodeBlock language="ada">
function Index (Source   : in String;{"\n"}                Pattern  : in String;{"\n"}                Going    : in Direction := Forward;{"\n"}                Mapping  : in Maps.Character{"_"}Mapping{"\n"}                              := Maps.Identity){"\n"}   return Natural;{"\n"}{"\n"}function Index (Source   : in String;{"\n"}                Pattern  : in String;{"\n"}                Going    : in Direction := Forward;{"\n"}                Mapping  : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}   return Natural;{"\n"}

</CodeBlock>
<MarginText>58/2_A.4.3</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<p class="Indented4">If Going = Forward, returns <br /></p>

<MarginText>58.1/2_A.4.3</MarginText>
<CodeBlock language="ada">
      Index (Source, Pattern, Source'First, Forward, Mapping);{"\n"}

</CodeBlock>
<MarginText>58.2/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0264-1"]} />
<p class="Indented4">otherwise, returns <br /></p>

<MarginText>58.3/2_A.4.3</MarginText>
<CodeBlock language="ada">
      Index (Source, Pattern, Source'Last, Backward, Mapping);{"\n"}

</CodeBlock>
<AnnotatedOnly>
<MarginText>58.a/2_A.4.3</MarginText>
<Admonition type="aarm" aarm="note">
<i>This paragraph was deleted.</i>There is no default value for the Mapping parameter that is a Character{"_"}Mapping{"_"}Function; if there were, a call would be ambiguous since there is also a default for the Mapping parameter that is a Character{"_"}Mapping. <br />
</Admonition>
</AnnotatedOnly>

<MarginText>58.4/2_A.4.3</MarginText>
<CodeBlock language="ada">
function Index (Source  : in String;{"\n"}                Set     : in Maps.Character{"_"}Set;{"\n"}                From    : in Positive;{"\n"}                Test    : in Membership := Inside;{"\n"}                Going   : in Direction := Forward){"\n"}   return Natural;{"\n"}

</CodeBlock>
<MarginText>58.5/3_A.4.3</MarginText>
<MarginInfo items={["AI95-00301-01", "AI05-0056-1"]} />
<p class="Indented4">Index searches for the first or last occurrence of any of a set of characters (when Test=Inside), or any of the complement of a set of characters (when Test=Outside). If Source is the null string, Index returns 0; otherwise, if From is not in Source'Range, then Index{"_"}Error is propagated. Otherwise, it returns the smallest index I {">"}= From (if Going=Forward) or the largest index I {"<"}= From (if Going=Backward) such that Source(I) satisfies the Test condition with respect to Set; it returns 0 if there is no such Character in Source.<br /></p>

<MarginText>59_A.4.3</MarginText>
<CodeBlock language="ada">
function Index (Source : in String;{"\n"}                Set    : in Maps.Character{"_"}Set;{"\n"}                Test   : in Membership := Inside;{"\n"}                Going  : in Direction  := Forward){"\n"}   return Natural;{"\n"}

</CodeBlock>
<MarginText>60/2_A.4.3</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<p class="Indented4">If Going = Forward, returns <br /></p>

<MarginText>60.1/2_A.4.3</MarginText>
<CodeBlock language="ada">
      Index (Source, Set, Source'First, Test, Forward);{"\n"}

</CodeBlock>
<MarginText>60.2/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0264-1"]} />
<p class="Indented4">otherwise, returns <br /></p>

<MarginText>60.3/2_A.4.3</MarginText>
<CodeBlock language="ada">
      Index (Source, Set, Source'Last, Test, Backward);{"\n"}
<MarginText>60.4/2_A.4.3</MarginText>
function Index{"_"}Non{"_"}Blank (Source : in String;{"\n"}                          From   : in Positive;{"\n"}                          Going  : in Direction := Forward){"\n"}   return Natural;{"\n"}

</CodeBlock>
<MarginText>60.5/2_A.4.3</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<p class="Indented4">Returns Index (Source, Maps.To{"_"}Set(Space), From, Outside, Going);<br /></p>

<MarginText>61_A.4.3</MarginText>
<CodeBlock language="ada">
function Index{"_"}Non{"_"}Blank (Source : in String;{"\n"}                          Going  : in Direction := Forward){"\n"}   return Natural;{"\n"}

</CodeBlock>
<MarginText>62_A.4.3</MarginText>
<p class="Indented4">Returns Index(Source, Maps.To{"_"}Set(Space), Outside, Going)<br /></p>

<MarginText>63_A.4.3</MarginText>
<CodeBlock language="ada">
function Count (Source   : in String;{"\n"}                Pattern  : in String;{"\n"}                Mapping  : in Maps.Character{"_"}Mapping{"\n"}                             := Maps.Identity){"\n"}   return Natural;{"\n"}{"\n"}function Count (Source   : in String;{"\n"}                Pattern  : in String;{"\n"}                Mapping  : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}   return Natural;{"\n"}

</CodeBlock>
<MarginText>64_A.4.3</MarginText>
<p class="Indented4">Returns the maximum number of nonoverlapping slices of Source that match Pattern with respect to Mapping. If Pattern is the null string then Pattern{"_"}Error is propagated. <br /></p>

<AnnotatedOnly>
<MarginText>64.a_A.4.3</MarginText>
<Admonition type="aarm" aarm="reason">
<b></b>We say `maximum number' because it is possible to slice a source string in different ways yielding different numbers of matches. For example if Source is "ABABABA" and Pattern is "ABA", then Count yields 2, although there is a partitioning of Source that yields just 1 match, for the middle slice. Saying `maximum number' is equivalent to saying that the pattern match starts either at the low index or the high index position. <br />
</Admonition>
</AnnotatedOnly>

<MarginText>65_A.4.3</MarginText>
<CodeBlock language="ada">
function Count (Source   : in String;{"\n"}                Set      : in Maps.Character{"_"}Set){"\n"}   return Natural;{"\n"}

</CodeBlock>
<MarginText>66_A.4.3</MarginText>
<p class="Indented4">Returns the number of occurrences in Source of characters that are in Set.<br /></p>

<MarginText>66.1/3_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Find{"_"}Token (Source : in String;{"\n"}                      Set    : in Maps.Character{"_"}Set;{"\n"}                      From   : in Positive;{"\n"}                      Test   : in Membership;{"\n"}                      First  : out Positive;{"\n"}                      Last   : out Natural);{"\n"}

</CodeBlock>
<MarginText>66.2/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0031-1"]} />
<p class="Indented4">If Source is not the null string and From is not in Source'Range, then Index{"_"}Error is raised. Otherwise, First is set to the index of the first character in Source(From .. Source'Last) that satisfies the Test condition. Last is set to the largest index such that all characters in Source(First .. Last) satisfy the Test condition. If no characters in Source(From .. Source'Last) satisfy the Test condition, First is set to From, and Last is set to 0.<br /></p>

<MarginText>67_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Find{"_"}Token (Source : in String;{"\n"}                      Set    : in Maps.Character{"_"}Set;{"\n"}                      Test   : in Membership;{"\n"}                      First  : out Positive;{"\n"}                      Last   : out Natural);{"\n"}

</CodeBlock>
<MarginText>68/3_A.4.3</MarginText>
<MarginInfo items={["AI95-00128-01", "AI05-0031-1"]} />
<p class="Indented4">{"{"}<i>8652/0049</i>{"}"} Equivalent to Find{"_"}Token (Source, Set, Source'First, Test, First, Last).<br /></p>

<AnnotatedOnly>
<MarginText>68.a/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0031-1"]} />
<Admonition type="aarm" aarm="ramification">
<b></b>If Source'First is not in Positive, which can only happen for an empty string, this will raise Constraint{"_"}Error. <br />
</Admonition>
</AnnotatedOnly>

<MarginText>69_A.4.3</MarginText>
<CodeBlock language="ada">
function Translate (Source  : in String;{"\n"}                    Mapping : in Maps.Character{"_"}Mapping){"\n"}   return String;{"\n"}{"\n"}function Translate (Source  : in String;{"\n"}                    Mapping : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}   return String;{"\n"}

</CodeBlock>
<MarginText>70_A.4.3</MarginText>
<p class="Indented4">Returns the string S whose length is Source'Length and such that S(I) is the character to which Mapping maps the corresponding element of Source, for I in 1..Source'Length.<br /></p>

<MarginText>71_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Translate (Source  : in out String;{"\n"}                     Mapping : in Maps.Character{"_"}Mapping);{"\n"}{"\n"}procedure Translate (Source  : in out String;{"\n"}                     Mapping : in Maps.Character{"_"}Mapping{"_"}Function);{"\n"}

</CodeBlock>
<MarginText>72_A.4.3</MarginText>
<p class="Indented4">Equivalent to Source := Translate(Source, Mapping).<br /></p>

<MarginText>73_A.4.3</MarginText>
<CodeBlock language="ada">
function Replace{"_"}Slice (Source   : in String;{"\n"}                        Low      : in Positive;{"\n"}                        High     : in Natural;{"\n"}                        By       : in String){"\n"}   return String;{"\n"}

</CodeBlock>
<MarginText>74/1_A.4.3</MarginText>
<MarginInfo items={["AI95-00128-01"]} />
<p class="Indented4">{"{"}<i>8652/0049</i>{"}"} If Low {">"} Source'Last+1, or High {"<"} Source'First&ndash;1, then Index{"_"}Error is propagated. Otherwise:<br /></p>

<MarginText>74.1/1_A.4.3</MarginText>
<MarginInfo items={["AI95-00128-01"]} />
<ul>
<li>{"{"}<i>8652/0049</i>{"}"} If High {">"}= Low, then the returned string comprises Source(Source'First..Low&ndash;1) & By & Source(High+1..Source'Last), but with lower bound 1.<br /></li>
<MarginText>74.2/1_A.4.3</MarginText>
<MarginInfo items={["AI95-00128-01"]} />
<li>{"{"}<i>8652/0049</i>{"}"} If High {"<"} Low, then the returned string is Insert(Source, Before={">"}Low, New{"_"}Item={">"}By). <br /></li>
</ul>
<MarginText>75_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Replace{"_"}Slice (Source   : in out String;{"\n"}                         Low      : in Positive;{"\n"}                         High     : in Natural;{"\n"}                         By       : in String;{"\n"}                         Drop     : in Truncation := Error;{"\n"}                         Justify  : in Alignment  := Left;{"\n"}                         Pad      : in Character  := Space);{"\n"}

</CodeBlock>
<MarginText>76_A.4.3</MarginText>
<p class="Indented4">Equivalent to Move(Replace{"_"}Slice(Source, Low, High, By), Source, Drop, Justify, Pad).<br /></p>

<MarginText>77_A.4.3</MarginText>
<CodeBlock language="ada">
function Insert (Source   : in String;{"\n"}                 Before   : in Positive;{"\n"}                 New{"_"}Item : in String){"\n"}   return String;{"\n"}

</CodeBlock>
<MarginText>78/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0264-1"]} />
<p class="Indented4">Propagates Index{"_"}Error if Before is not in Source'First .. Source'Last+1; otherwise, returns Source(Source'First..Before&ndash;1) & New{"_"}Item & Source(Before..Source'Last), but with lower bound 1.<br /></p>

<MarginText>79_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Insert (Source   : in out String;{"\n"}                  Before   : in Positive;{"\n"}                  New{"_"}Item : in String;{"\n"}                  Drop     : in Truncation := Error);{"\n"}

</CodeBlock>
<MarginText>80_A.4.3</MarginText>
<p class="Indented4">Equivalent to Move(Insert(Source, Before, New{"_"}Item), Source, Drop).<br /></p>

<MarginText>81_A.4.3</MarginText>
<CodeBlock language="ada">
function Overwrite (Source   : in String;{"\n"}                    Position : in Positive;{"\n"}                    New{"_"}Item : in String){"\n"}   return String;{"\n"}

</CodeBlock>
<MarginText>82/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0264-1"]} />
<p class="Indented4">Propagates Index{"_"}Error if Position is not in Source'First .. Source'Last+1; otherwise, returns the string obtained from Source by consecutively replacing characters starting at Position with corresponding characters from New{"_"}Item. If the end of Source is reached before the characters in New{"_"}Item are exhausted, the remaining characters from New{"_"}Item are appended to the string.<br /></p>

<MarginText>83_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Overwrite (Source   : in out String;{"\n"}                     Position : in Positive;{"\n"}                     New{"_"}Item : in String;{"\n"}                     Drop     : in Truncation := Right);{"\n"}

</CodeBlock>
<MarginText>84_A.4.3</MarginText>
<p class="Indented4">Equivalent to Move(Overwrite(Source, Position, New{"_"}Item), Source, Drop).<br /></p>

<MarginText>85_A.4.3</MarginText>
<CodeBlock language="ada">
function Delete (Source  : in String;{"\n"}                 From    : in Positive;{"\n"}                 Through : in Natural){"\n"}   return String;{"\n"}

</CodeBlock>
<MarginText>86/3_A.4.3</MarginText>
<MarginInfo items={["AI95-00128-01", "AI05-0264-1"]} />
<p class="Indented4">{"{"}<i>8652/0049</i>{"}"} If From {"<"}= Through, the returned string is Replace{"_"}Slice(Source, From, Through, ""); otherwise, it is Source with lower bound 1.<br /></p>

<MarginText>87_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Delete (Source  : in out String;{"\n"}                  From    : in Positive;{"\n"}                  Through : in Natural;{"\n"}                  Justify : in Alignment := Left;{"\n"}                  Pad     : in Character := Space);{"\n"}

</CodeBlock>
<MarginText>88_A.4.3</MarginText>
<p class="Indented4">Equivalent to Move(Delete(Source, From, Through), Source, Justify ={">"} Justify, Pad ={">"} Pad).<br /></p>

<MarginText>89_A.4.3</MarginText>
<CodeBlock language="ada">
function Trim (Source : in String;{"\n"}               Side   : in Trim{"_"}End){"\n"}  return String;{"\n"}

</CodeBlock>
<MarginText>90_A.4.3</MarginText>
<p class="Indented4">Returns the string obtained by removing from Source all leading Space characters (if Side = Left), all trailing Space characters (if Side = Right), or all leading and trailing Space characters (if Side = Both).<br /></p>

<MarginText>91_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Trim (Source  : in out String;{"\n"}                Side    : in Trim{"_"}End;{"\n"}                Justify : in Alignment := Left;{"\n"}                Pad     : in Character := Space);{"\n"}

</CodeBlock>
<MarginText>92_A.4.3</MarginText>
<p class="Indented4">Equivalent to Move(Trim(Source, Side), Source, Justify={">"}Justify, Pad={">"}Pad).<br /></p>

<MarginText>93_A.4.3</MarginText>
<CodeBlock language="ada">
function Trim (Source : in String;{"\n"}               Left   : in Maps.Character{"_"}Set;{"\n"}               Right  : in Maps.Character{"_"}Set){"\n"}   return String;{"\n"}

</CodeBlock>
<MarginText>94_A.4.3</MarginText>
<p class="Indented4">Returns the string obtained by removing from Source all leading characters in Left and all trailing characters in Right.<br /></p>

<MarginText>95_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Trim (Source  : in out String;{"\n"}                Left    : in Maps.Character{"_"}Set;{"\n"}                Right   : in Maps.Character{"_"}Set;{"\n"}                Justify : in Alignment := Strings.Left;{"\n"}                Pad     : in Character := Space);{"\n"}

</CodeBlock>
<MarginText>96_A.4.3</MarginText>
<p class="Indented4">Equivalent to Move(Trim(Source, Left, Right), Source, Justify ={">"} Justify, Pad={">"}Pad).<br /></p>

<MarginText>97_A.4.3</MarginText>
<CodeBlock language="ada">
function Head (Source : in String;{"\n"}               Count  : in Natural;{"\n"}               Pad    : in Character := Space){"\n"}   return String;{"\n"}

</CodeBlock>
<MarginText>98/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0264-1"]} />
<p class="Indented4">Returns a string of length Count. If Count {"<"}= Source'Length, the string comprises the first Count characters of Source. Otherwise, its contents are Source concatenated with Count&ndash;Source'Length Pad characters.<br /></p>

<MarginText>99_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Head (Source  : in out String;{"\n"}                Count   : in Natural;{"\n"}                Justify : in Alignment := Left;{"\n"}                Pad     : in Character := Space);{"\n"}

</CodeBlock>
<MarginText>100_A.4.3</MarginText>
<p class="Indented4">Equivalent to Move(Head(Source, Count, Pad), Source, Drop={">"}Error, Justify={">"}Justify, Pad={">"}Pad).<br /></p>

<MarginText>101_A.4.3</MarginText>
<CodeBlock language="ada">
function Tail (Source : in String;{"\n"}               Count  : in Natural;{"\n"}               Pad    : in Character := Space){"\n"}   return String;{"\n"}

</CodeBlock>
<MarginText>102/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0264-1"]} />
<p class="Indented4">Returns a string of length Count. If Count {"<"}= Source'Length, the string comprises the last Count characters of Source. Otherwise, its contents are Count-Source'Length Pad characters concatenated with Source.<br /></p>

<MarginText>103_A.4.3</MarginText>
<CodeBlock language="ada">
procedure Tail (Source  : in out String;{"\n"}                Count   : in Natural;{"\n"}                Justify : in Alignment := Left;{"\n"}                Pad     : in Character := Space);{"\n"}

</CodeBlock>
<MarginText>104_A.4.3</MarginText>
<p class="Indented4">Equivalent to Move(Tail(Source, Count, Pad), Source, Drop={">"}Error, Justify={">"}Justify, Pad={">"}Pad).<br /></p>

<MarginText>105_A.4.3</MarginText>
<CodeBlock language="ada">
function "{"*"}" (Left  : in Natural;{"\n"}              Right : in Character) return String;{"\n"}{"\n"}function "{"*"}" (Left  : in Natural;{"\n"}              Right : in String) return String;{"\n"}

</CodeBlock>
<MarginText>106/1_A.4.3</MarginText>
<MarginInfo items={["AI95-00128-01"]} />
<p class="Indented4">{"{"}<i>8652/0049</i>{"}"} These functions replicate a character or string a specified number of times. The first function returns a string whose length is Left and each of whose elements is Right. The second function returns a string whose length is Left{"*"}Right'Length and whose value is the null string if Left = 0 and otherwise is (Left&ndash;1){"*"}Right & Right with lower bound 1. <br /></p>

<AnnotatedOnly>
<MarginText>107/5_A.4.3</MarginText>
<MarginInfo items={["AI05-0264-1", "AI12-0442-1"]} />
<Admonition type="aarm" aarm="note">
NOTE 1   In the Index and Count functions taking Pattern and Mapping parameters, for there to be a match, the actual String parameter passed to Pattern can contain only characters occurring as target characters of the mapping.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>108_A.4.3</MarginText>
<Admonition type="aarm" aarm="note">
NOTE 2   In the Insert subprograms, inserting at the end of a string is obtained by passing Source'Last+1 as the Before parameter.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>109_A.4.3</MarginText>
<Admonition type="aarm" aarm="note">
NOTE 3   If a null Character{"_"}Mapping{"_"}Function is passed to any of the string handling subprograms, Constraint{"_"}Error is propagated. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Incompatibilities With Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>109.a/3_A.4.3</MarginText>
<MarginInfo items={["AI95-00301-01", "AI05-0005-1"]} />
<Admonition type="aarm" aarm="note">
Overloaded versions of Index and Index{"_"}Non{"_"}Blank are added to Strings.Fixed. If Strings.Fixed is referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, and an entity <i>E</i> with a <code><a href="/docs/arm/AA-3/AA-3.1#S0022">defining_identifier</a></code> of Index or Index{"_"}Non{"_"}Blank is defined in a package that is also referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, the entity <i>E</i> may no longer be use-visible, resulting in errors. This should be rare and is easily fixed if it does occur. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>109.b/2_A.4.3</MarginText>
<MarginInfo items={["AI95-00128-01"]} />
<Admonition type="aarm" aarm="note">
{"{"}<i>8652/0049</i>{"}"} <b>Corrigendum:</b> Clarified that Find{"_"}Token may raise Constraint{"_"}Error if Source'First is not in Positive (which is only possible for a null string).<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>109.c/2_A.4.3</MarginText>
<MarginInfo items={["AI95-00128-01"]} />
<Admonition type="aarm" aarm="note">
{"{"}<i>8652/0049</i>{"}"} <b>Corrigendum:</b> Clarified that Replace{"_"}Slice, Delete, and "{"*"}" always return a string with lower bound 1. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Incompatibilities With Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>109.d/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0031-1"]} />
<Admonition type="aarm" aarm="note">
An overloaded version of Find{"_"}Token is added to Strings.Fixed. If Strings.Fixed is referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, and an entity <i>E</i> with a <code><a href="/docs/arm/AA-3/AA-3.1#S0022">defining_identifier</a></code> of Find{"_"}Token is defined in a package that is also referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, the entity <i>E</i> may no longer be use-visible, resulting in errors. This should be rare and is easily fixed if it does occur. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>109.e/3_A.4.3</MarginText>
<MarginInfo items={["AI05-0056-1"]} />
<Admonition type="aarm" aarm="correction">
<b></b> Clarified that Index never raises Index{"_"}Error if the source string is null. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.4"></a>

## A.4.4  Bounded-Length String Handling

<MarginText>1/5_A.4.4</MarginText>
<MarginInfo items={["AI12-0445-1"]} />
<p>The language-defined package Strings.Bounded provides a generic package each of whose instances yields a private type Bounded{"_"}String and a set of operations. An object of a particular Bounded{"_"}String type represents a String whose low bound is 1 and whose length can vary conceptually between 0 and a maximum size established at the generic instantiation. The subprograms for fixed-length string handling are either overloaded directly for Bounded{"_"}String, or are modified as necessary to reflect the variability in length. Additionally, since the Bounded{"_"}String type is private, appropriate constructor and selector operations are provided. <br /></p>

<AnnotatedOnly>
<MarginText>1.a_A.4.4</MarginText>
<Admonition type="aarm" aarm="reason">
<b></b>Strings.Bounded declares an inner generic package, versus itself being directly a generic child of Strings, in order to retain compatibility with a version of the string-handling packages that is generic with respect to the character and string types.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>1.b_A.4.4</MarginText>
<Admonition type="aarm" aarm="reason">
<b></b>The bound of a bounded-length string is specified as a parameter to a generic, versus as the value for a discriminant, because of the inappropriateness of assignment and equality of discriminated types for the copying and comparison of bounded strings.<br />
</Admonition>
</AnnotatedOnly>


#### Static Semantics

<MarginText>2_A.4.4</MarginText>
<p>The library package Strings.Bounded has the following declaration: <br /></p>

<MarginText>3/5_A.4.4</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
with Ada.Strings.Maps;{"\n"}package Ada.Strings.Bounded{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized is{"\n"}
<MarginText>4_A.4.4</MarginText>
   generic{"\n"}      Max   : Positive;    -- Maximum length of a Bounded{"_"}String{"\n"}   package Generic{"_"}Bounded{"_"}Length is{"\n"}
<MarginText>5_A.4.4</MarginText>
      Max{"_"}Length : constant Positive := Max;{"\n"}
<MarginText>6_A.4.4</MarginText>
      type Bounded{"_"}String is private;{"\n"}
<MarginText>7_A.4.4</MarginText>
      Null{"_"}Bounded{"_"}String : constant Bounded{"_"}String;{"\n"}
<MarginText>8_A.4.4</MarginText>
      subtype Length{"_"}Range is Natural range 0 .. Max{"_"}Length;{"\n"}
<MarginText>9_A.4.4</MarginText>
      function Length (Source : in Bounded{"_"}String) return Length{"_"}Range;{"\n"}
<MarginText>10_A.4.4</MarginText>
   -- Conversion, Concatenation, and Selection functions{"\n"}
<MarginText>11_A.4.4</MarginText>
      function To{"_"}Bounded{"_"}String (Source : in String;{"\n"}                                  Drop   : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>12_A.4.4</MarginText>
      function To{"_"}String (Source : in Bounded{"_"}String) return String;{"\n"}
<MarginText>12.1/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
      procedure Set{"_"}Bounded{"_"}String{"\n"}         (Target :    out Bounded{"_"}String;{"\n"}          Source : in     String;{"\n"}          Drop   : in     Truncation := Error);{"\n"}
<MarginText>13_A.4.4</MarginText>
      function Append (Left, Right : in Bounded{"_"}String;{"\n"}                       Drop        : in Truncation  := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>14_A.4.4</MarginText>
      function Append (Left  : in Bounded{"_"}String;{"\n"}                       Right : in String;{"\n"}                       Drop  : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>15_A.4.4</MarginText>
      function Append (Left  : in String;{"\n"}                       Right : in Bounded{"_"}String;{"\n"}                       Drop  : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>16_A.4.4</MarginText>
      function Append (Left  : in Bounded{"_"}String;{"\n"}                       Right : in Character;{"\n"}                       Drop  : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>17_A.4.4</MarginText>
      function Append (Left  : in Character;{"\n"}                       Right : in Bounded{"_"}String;{"\n"}                       Drop  : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>18_A.4.4</MarginText>
      procedure Append (Source   : in out Bounded{"_"}String;{"\n"}                        New{"_"}Item : in Bounded{"_"}String;{"\n"}                        Drop     : in Truncation  := Error);{"\n"}
<MarginText>19_A.4.4</MarginText>
      procedure Append (Source   : in out Bounded{"_"}String;{"\n"}                        New{"_"}Item : in String;{"\n"}                        Drop     : in Truncation  := Error);{"\n"}
<MarginText>20_A.4.4</MarginText>
      procedure Append (Source   : in out Bounded{"_"}String;{"\n"}                        New{"_"}Item : in Character;{"\n"}                        Drop     : in Truncation  := Error);{"\n"}
<MarginText>21_A.4.4</MarginText>
      function "&" (Left, Right : in Bounded{"_"}String){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>22_A.4.4</MarginText>
      function "&" (Left : in Bounded{"_"}String; Right : in String){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>23_A.4.4</MarginText>
      function "&" (Left : in String; Right : in Bounded{"_"}String){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>24_A.4.4</MarginText>
      function "&" (Left : in Bounded{"_"}String; Right : in Character){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>25_A.4.4</MarginText>
      function "&" (Left : in Character; Right : in Bounded{"_"}String){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>26_A.4.4</MarginText>
      function Element (Source : in Bounded{"_"}String;{"\n"}                        Index  : in Positive){"\n"}         return Character;{"\n"}
<MarginText>27_A.4.4</MarginText>
      procedure Replace{"_"}Element (Source : in out Bounded{"_"}String;{"\n"}                                 Index  : in Positive;{"\n"}                                 By     : in Character);{"\n"}
<MarginText>28_A.4.4</MarginText>
      function Slice (Source : in Bounded{"_"}String;{"\n"}                      Low    : in Positive;{"\n"}                      High   : in Natural){"\n"}         return String;{"\n"}
<MarginText>28.1/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
      function Bounded{"_"}Slice{"\n"}         (Source : in Bounded{"_"}String;{"\n"}          Low    : in Positive;{"\n"}          High   : in Natural){"\n"}             return Bounded{"_"}String;{"\n"}
<MarginText>28.2/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
      procedure Bounded{"_"}Slice{"\n"}         (Source : in     Bounded{"_"}String;{"\n"}          Target :    out Bounded{"_"}String;{"\n"}          Low    : in     Positive;{"\n"}          High   : in     Natural);{"\n"}
<MarginText>29_A.4.4</MarginText>
      function "="  (Left, Right : in Bounded{"_"}String) return Boolean;{"\n"}      function "="  (Left : in Bounded{"_"}String; Right : in String){"\n"}        return Boolean;{"\n"}
<MarginText>30_A.4.4</MarginText>
      function "="  (Left : in String; Right : in Bounded{"_"}String){"\n"}        return Boolean;{"\n"}
<MarginText>31_A.4.4</MarginText>
      function "{"<"}"  (Left, Right : in Bounded{"_"}String) return Boolean;{"\n"}
<MarginText>32_A.4.4</MarginText>
      function "{"<"}"  (Left : in Bounded{"_"}String; Right : in String){"\n"}        return Boolean;{"\n"}
<MarginText>33_A.4.4</MarginText>
      function "{"<"}"  (Left : in String; Right : in Bounded{"_"}String){"\n"}        return Boolean;{"\n"}
<MarginText>34_A.4.4</MarginText>
      function "{"<"}=" (Left, Right : in Bounded{"_"}String) return Boolean;{"\n"}
<MarginText>35_A.4.4</MarginText>
      function "{"<"}="  (Left : in Bounded{"_"}String; Right : in String){"\n"}        return Boolean;{"\n"}
<MarginText>36_A.4.4</MarginText>
      function "{"<"}="  (Left : in String; Right : in Bounded{"_"}String){"\n"}        return Boolean;{"\n"}
<MarginText>37_A.4.4</MarginText>
      function "{">"}"  (Left, Right : in Bounded{"_"}String) return Boolean;{"\n"}
<MarginText>38_A.4.4</MarginText>
      function "{">"}"  (Left : in Bounded{"_"}String; Right : in String){"\n"}        return Boolean;{"\n"}
<MarginText>39_A.4.4</MarginText>
      function "{">"}"  (Left : in String; Right : in Bounded{"_"}String){"\n"}        return Boolean;{"\n"}
<MarginText>40_A.4.4</MarginText>
      function "{">"}=" (Left, Right : in Bounded{"_"}String) return Boolean;{"\n"}
<MarginText>41_A.4.4</MarginText>
      function "{">"}="  (Left : in Bounded{"_"}String; Right : in String){"\n"}        return Boolean;{"\n"}
<MarginText>42_A.4.4</MarginText>
      function "{">"}="  (Left : in String; Right : in Bounded{"_"}String){"\n"}        return Boolean;{"\n"}
<MarginText>43/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   -- Search subprograms{"\n"}
<MarginText>43.1/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
      function Index (Source  : in Bounded{"_"}String;{"\n"}                      Pattern : in String;{"\n"}                      From    : in Positive;{"\n"}                      Going   : in Direction := Forward;{"\n"}                      Mapping : in Maps.Character{"_"}Mapping := Maps.Identity){"\n"}         return Natural;{"\n"}
<MarginText>43.2/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
      function Index (Source  : in Bounded{"_"}String;{"\n"}                      Pattern : in String;{"\n"}                      From    : in Positive;{"\n"}                      Going   : in Direction := Forward;{"\n"}                      Mapping : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}         return Natural;{"\n"}
<MarginText>44_A.4.4</MarginText>
      function Index (Source   : in Bounded{"_"}String;{"\n"}                      Pattern  : in String;{"\n"}                      Going    : in Direction := Forward;{"\n"}                      Mapping  : in Maps.Character{"_"}Mapping{"\n"}                                 := Maps.Identity){"\n"}         return Natural;{"\n"}
<MarginText>45_A.4.4</MarginText>
      function Index (Source   : in Bounded{"_"}String;{"\n"}                      Pattern  : in String;{"\n"}                      Going    : in Direction := Forward;{"\n"}                      Mapping  : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}         return Natural;{"\n"}
<MarginText>45.1/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
      function Index (Source  : in Bounded{"_"}String;{"\n"}                      Set     : in Maps.Character{"_"}Set;{"\n"}                      From    : in Positive;{"\n"}                      Test    : in Membership := Inside;{"\n"}                      Going   : in Direction := Forward){"\n"}         return Natural;{"\n"}
<MarginText>46_A.4.4</MarginText>
      function Index (Source : in Bounded{"_"}String;{"\n"}                      Set    : in Maps.Character{"_"}Set;{"\n"}                      Test   : in Membership := Inside;{"\n"}                      Going  : in Direction  := Forward){"\n"}         return Natural;{"\n"}
<MarginText>46.1/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
      function Index{"_"}Non{"_"}Blank (Source : in Bounded{"_"}String;{"\n"}                                From   : in Positive;{"\n"}                                Going  : in Direction := Forward){"\n"}         return Natural;{"\n"}
<MarginText>47_A.4.4</MarginText>
      function Index{"_"}Non{"_"}Blank (Source : in Bounded{"_"}String;{"\n"}                                Going  : in Direction := Forward){"\n"}         return Natural;{"\n"}
<MarginText>48_A.4.4</MarginText>
      function Count (Source   : in Bounded{"_"}String;{"\n"}                      Pattern  : in String;{"\n"}                      Mapping  : in Maps.Character{"_"}Mapping{"\n"}                                   := Maps.Identity){"\n"}         return Natural;{"\n"}
<MarginText>49_A.4.4</MarginText>
      function Count (Source   : in Bounded{"_"}String;{"\n"}                      Pattern  : in String;{"\n"}                      Mapping  : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}         return Natural;{"\n"}
<MarginText>50_A.4.4</MarginText>
      function Count (Source   : in Bounded{"_"}String;{"\n"}                      Set      : in Maps.Character{"_"}Set){"\n"}         return Natural;{"\n"}
<MarginText>50.1/3_A.4.4</MarginText>
<MarginInfo items={["AI05-0031-1"]} />
      procedure Find{"_"}Token (Source : in Bounded{"_"}String;{"\n"}                            Set    : in Maps.Character{"_"}Set;{"\n"}                            From   : in Positive;{"\n"}                            Test   : in Membership;{"\n"}                            First  : out Positive;{"\n"}                            Last   : out Natural);{"\n"}
<MarginText>51_A.4.4</MarginText>
      procedure Find{"_"}Token (Source : in Bounded{"_"}String;{"\n"}                            Set    : in Maps.Character{"_"}Set;{"\n"}                            Test   : in Membership;{"\n"}                            First  : out Positive;{"\n"}                            Last   : out Natural);{"\n"}
<MarginText>52_A.4.4</MarginText>
   -- String translation subprograms{"\n"}
<MarginText>53_A.4.4</MarginText>
      function Translate (Source  : in Bounded{"_"}String;{"\n"}                          Mapping : in Maps.Character{"_"}Mapping){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>54_A.4.4</MarginText>
      procedure Translate (Source  : in out Bounded{"_"}String;{"\n"}                           Mapping : in Maps.Character{"_"}Mapping);{"\n"}
<MarginText>55_A.4.4</MarginText>
      function Translate (Source  : in Bounded{"_"}String;{"\n"}                          Mapping : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>56_A.4.4</MarginText>
      procedure Translate (Source  : in out Bounded{"_"}String;{"\n"}                           Mapping : in Maps.Character{"_"}Mapping{"_"}Function);{"\n"}
<MarginText>57_A.4.4</MarginText>
   -- String transformation subprograms{"\n"}
<MarginText>58_A.4.4</MarginText>
      function Replace{"_"}Slice (Source   : in Bounded{"_"}String;{"\n"}                              Low      : in Positive;{"\n"}                              High     : in Natural;{"\n"}                              By       : in String;{"\n"}                              Drop     : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>59_A.4.4</MarginText>
      procedure Replace{"_"}Slice (Source   : in out Bounded{"_"}String;{"\n"}                               Low      : in Positive;{"\n"}                               High     : in Natural;{"\n"}                               By       : in String;{"\n"}                               Drop     : in Truncation := Error);{"\n"}
<MarginText>60_A.4.4</MarginText>
      function Insert (Source   : in Bounded{"_"}String;{"\n"}                       Before   : in Positive;{"\n"}                       New{"_"}Item : in String;{"\n"}                       Drop     : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>61_A.4.4</MarginText>
      procedure Insert (Source   : in out Bounded{"_"}String;{"\n"}                        Before   : in Positive;{"\n"}                        New{"_"}Item : in String;{"\n"}                        Drop     : in Truncation := Error);{"\n"}
<MarginText>62_A.4.4</MarginText>
      function Overwrite (Source    : in Bounded{"_"}String;{"\n"}                          Position  : in Positive;{"\n"}                          New{"_"}Item  : in String;{"\n"}                          Drop      : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>63_A.4.4</MarginText>
      procedure Overwrite (Source    : in out Bounded{"_"}String;{"\n"}                           Position  : in Positive;{"\n"}                           New{"_"}Item  : in String;{"\n"}                           Drop      : in Truncation := Error);{"\n"}
<MarginText>64_A.4.4</MarginText>
      function Delete (Source  : in Bounded{"_"}String;{"\n"}                       From    : in Positive;{"\n"}                       Through : in Natural){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>65_A.4.4</MarginText>
      procedure Delete (Source  : in out Bounded{"_"}String;{"\n"}                        From    : in Positive;{"\n"}                        Through : in Natural);{"\n"}
<MarginText>66_A.4.4</MarginText>
   --String selector subprograms{"\n"}
<MarginText>67_A.4.4</MarginText>
      function Trim (Source : in Bounded{"_"}String;{"\n"}                     Side   : in Trim{"_"}End){"\n"}         return Bounded{"_"}String;{"\n"}      procedure Trim (Source : in out Bounded{"_"}String;{"\n"}                      Side   : in Trim{"_"}End);{"\n"}
<MarginText>68_A.4.4</MarginText>
      function Trim (Source : in Bounded{"_"}String;{"\n"}                     Left   : in Maps.Character{"_"}Set;{"\n"}                     Right  : in Maps.Character{"_"}Set){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>69_A.4.4</MarginText>
      procedure Trim (Source : in out Bounded{"_"}String;{"\n"}                      Left   : in Maps.Character{"_"}Set;{"\n"}                      Right  : in Maps.Character{"_"}Set);{"\n"}
<MarginText>70_A.4.4</MarginText>
      function Head (Source : in Bounded{"_"}String;{"\n"}                     Count  : in Natural;{"\n"}                     Pad    : in Character  := Space;{"\n"}                     Drop   : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>71_A.4.4</MarginText>
      procedure Head (Source : in out Bounded{"_"}String;{"\n"}                      Count  : in Natural;{"\n"}                      Pad    : in Character  := Space;{"\n"}                      Drop   : in Truncation := Error);{"\n"}
<MarginText>72_A.4.4</MarginText>
      function Tail (Source : in Bounded{"_"}String;{"\n"}                     Count  : in Natural;{"\n"}                     Pad    : in Character  := Space;{"\n"}                     Drop   : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>73_A.4.4</MarginText>
      procedure Tail (Source : in out Bounded{"_"}String;{"\n"}                      Count  : in Natural;{"\n"}                      Pad    : in Character  := Space;{"\n"}                      Drop   : in Truncation := Error);{"\n"}
<MarginText>74_A.4.4</MarginText>
   --String constructor subprograms{"\n"}
<MarginText>75_A.4.4</MarginText>
      function "{"*"}" (Left  : in Natural;{"\n"}                    Right : in Character){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>76_A.4.4</MarginText>
      function "{"*"}" (Left  : in Natural;{"\n"}                    Right : in String){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>77_A.4.4</MarginText>
      function "{"*"}" (Left  : in Natural;{"\n"}                    Right : in Bounded{"_"}String){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>78_A.4.4</MarginText>
      function Replicate (Count : in Natural;{"\n"}                          Item  : in Character;{"\n"}                          Drop  : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>79_A.4.4</MarginText>
      function Replicate (Count : in Natural;{"\n"}                          Item  : in String;{"\n"}                          Drop  : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>80_A.4.4</MarginText>
      function Replicate (Count : in Natural;{"\n"}                          Item  : in Bounded{"_"}String;{"\n"}                          Drop  : in Truncation := Error){"\n"}         return Bounded{"_"}String;{"\n"}
<MarginText>81_A.4.4</MarginText>
   private{"\n"}       ... -- not specified by the language{"\n"}   end Generic{"_"}Bounded{"_"}Length;{"\n"}
<MarginText>82_A.4.4</MarginText>
end Ada.Strings.Bounded;{"\n"}

</CodeBlock>
<AnnotatedOnly>
<MarginText>82.a.1/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00115-01", "AI95-00344-01"]} />
<Admonition type="aarm" aarm="note">
<i>This paragraph was deleted.</i>{"{"}<i>8652/0097</i>{"}"} <br />
</Admonition>
</AnnotatedOnly>

<MarginText>83_A.4.4</MarginText>
<p>Null{"_"}Bounded{"_"}String represents the null string. If an object of type Bounded{"_"}String is not otherwise initialized, it will be initialized to the same value as Null{"_"}Bounded{"_"}String. <br /></p>

<MarginText>84_A.4.4</MarginText>
<CodeBlock language="ada">
function Length (Source : in Bounded{"_"}String) return Length{"_"}Range;{"\n"}

</CodeBlock>
<MarginText>85_A.4.4</MarginText>
<p class="Indented4">The Length function returns the length of the string represented by Source.<br /></p>

<MarginText>86_A.4.4</MarginText>
<CodeBlock language="ada">
function To{"_"}Bounded{"_"}String (Source : in String;{"\n"}                            Drop   : in Truncation := Error){"\n"}   return Bounded{"_"}String;{"\n"}

</CodeBlock>
<MarginText>87/3_A.4.4</MarginText>
<MarginInfo items={["AI05-0264-1"]} />
<p class="Indented4">If Source'Length {"<"}= Max{"_"}Length, then this function returns a Bounded{"_"}String that represents Source. Otherwise, the effect depends on the value of Drop: <br /></p>

<MarginText>88_A.4.4</MarginText>
<ul>
<li>If Drop=Left, then the result is a Bounded{"_"}String that represents the string comprising the rightmost Max{"_"}Length characters of Source.<br /></li>
<MarginText>89_A.4.4</MarginText>
<li>If Drop=Right, then the result is a Bounded{"_"}String that represents the string comprising the leftmost Max{"_"}Length characters of Source.<br /></li>
<MarginText>90_A.4.4</MarginText>
<li>If Drop=Error, then Strings.Length{"_"}Error is propagated. <br /></li>
</ul>
<MarginText>91_A.4.4</MarginText>
<CodeBlock language="ada">
function To{"_"}String (Source : in Bounded{"_"}String) return String;{"\n"}

</CodeBlock>
<MarginText>92_A.4.4</MarginText>
<p class="Indented4">To{"_"}String returns the String value with lower bound 1 represented by Source. If B is a Bounded{"_"}String, then B = To{"_"}Bounded{"_"}String(To{"_"}String(B)).<br /></p>

<MarginText>92.1/2_A.4.4</MarginText>
<CodeBlock language="ada">
procedure Set{"_"}Bounded{"_"}String{"\n"}   (Target :    out Bounded{"_"}String;{"\n"}    Source : in     String;{"\n"}    Drop   : in     Truncation := Error);{"\n"}

</CodeBlock>
<MarginText>92.2/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<p class="Indented4">Equivalent to Target := To{"_"}Bounded{"_"}String (Source, Drop);<br /></p>

<MarginText>93_A.4.4</MarginText>
<p>Each of the Append functions returns a Bounded{"_"}String obtained by concatenating the string or character given or represented by one of the parameters, with the string or character given or represented by the other parameter, and applying To{"_"}Bounded{"_"}String to the concatenation result string, with Drop as provided to the Append function.<br /></p>

<MarginText>94_A.4.4</MarginText>
<p>Each of the procedures Append(Source, New{"_"}Item, Drop) has the same effect as the corresponding assignment Source := Append(Source, New{"_"}Item, Drop).<br /></p>

<MarginText>95_A.4.4</MarginText>
<p>Each of the "&" functions has the same effect as the corresponding Append function, with Error as the Drop parameter. <br /></p>

<MarginText>96_A.4.4</MarginText>
<CodeBlock language="ada">
function Element (Source : in Bounded{"_"}String;{"\n"}                  Index  : in Positive){"\n"}   return Character;{"\n"}

</CodeBlock>
<MarginText>97_A.4.4</MarginText>
<p class="Indented4">Returns the character at position Index in the string represented by Source; propagates Index{"_"}Error if Index {">"} Length(Source).<br /></p>

<MarginText>98_A.4.4</MarginText>
<CodeBlock language="ada">
procedure Replace{"_"}Element (Source : in out Bounded{"_"}String;{"\n"}                           Index  : in Positive;{"\n"}                           By     : in Character);{"\n"}

</CodeBlock>
<MarginText>99_A.4.4</MarginText>
<p class="Indented4">Updates Source such that the character at position Index in the string represented by Source is By; propagates Index{"_"}Error if Index {">"} Length(Source).<br /></p>

<MarginText>100_A.4.4</MarginText>
<CodeBlock language="ada">
function Slice (Source : in Bounded{"_"}String;{"\n"}                Low    : in Positive;{"\n"}                High   : in Natural){"\n"}   return String;{"\n"}

</CodeBlock>
<MarginText>101/1_A.4.4</MarginText>
<MarginInfo items={["AI95-00128-01", "AI95-00238-01"]} />
<p class="Indented4">{"{"}<i>8652/0049</i>{"}"} Returns the slice at positions Low through High in the string represented by Source; propagates Index{"_"}Error if Low {">"} Length(Source)+1 or High {">"} Length(Source). The bounds of the returned string are Low and High.<br /></p>

<MarginText>101.1/2_A.4.4</MarginText>
<CodeBlock language="ada">
function Bounded{"_"}Slice{"\n"}   (Source : in Bounded{"_"}String;{"\n"}    Low    : in Positive;{"\n"}    High   : in Natural){"\n"}       return Bounded{"_"}String;{"\n"}

</CodeBlock>
<MarginText>101.2/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<p class="Indented4">Returns the slice at positions Low through High in the string represented by Source as a bounded string; propagates Index{"_"}Error if Low {">"} Length(Source)+1 or High {">"} Length(Source).<br /></p>

<MarginText>101.3/2_A.4.4</MarginText>
<CodeBlock language="ada">
procedure Bounded{"_"}Slice{"\n"}   (Source : in     Bounded{"_"}String;{"\n"}    Target :    out Bounded{"_"}String;{"\n"}    Low    : in     Positive;{"\n"}    High   : in     Natural);{"\n"}

</CodeBlock>
<MarginText>101.4/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<p class="Indented4">Equivalent to Target := Bounded{"_"}Slice (Source, Low, High);<br /></p>

<MarginText>102_A.4.4</MarginText>
<p>Each of the functions "=", "{"<"}", "{">"}", "{"<"}=", and "{">"}=" returns the same result as the corresponding String operation applied to the String values given or represented by the two parameters.<br /></p>

<MarginText>103_A.4.4</MarginText>
<p>Each of the search subprograms (Index, Index{"_"}Non{"_"}Blank, Count, Find{"_"}Token) has the same effect as the corresponding subprogram in Strings.Fixed applied to the string represented by the Bounded{"_"}String parameter.<br /></p>

<MarginText>104_A.4.4</MarginText>
<p>Each of the Translate subprograms, when applied to a Bounded{"_"}String, has an analogous effect to the corresponding subprogram in Strings.Fixed. For the Translate function, the translation is applied to the string represented by the Bounded{"_"}String parameter, and the result is converted (via To{"_"}Bounded{"_"}String) to a Bounded{"_"}String. For the Translate procedure, the string represented by the Bounded{"_"}String parameter after the translation is given by the Translate function for fixed-length strings applied to the string represented by the original value of the parameter.<br /></p>

<MarginText>105/1_A.4.4</MarginText>
<MarginInfo items={["AI95-00128-01"]} />
<p>{"{"}<i>8652/0049</i>{"}"} Each of the transformation subprograms (Replace{"_"}Slice, Insert, Overwrite, Delete), selector subprograms (Trim, Head, Tail), and constructor functions ("{"*"}") has an effect based on its corresponding subprogram in Strings.Fixed, and Replicate is based on Fixed."{"*"}". In the case of a function, the corresponding fixed-length string subprogram is applied to the string represented by the Bounded{"_"}String parameter. To{"_"}Bounded{"_"}String is applied the result string, with Drop (or Error in the case of Generic{"_"}Bounded{"_"}Length."{"*"}") determining the effect when the string length exceeds Max{"_"}Length. In the case of a procedure, the corresponding function in Strings.Bounded.Generic{"_"}Bounded{"_"}Length is applied, with the result assigned into the Source parameter. <br /></p>

<AnnotatedOnly>
<MarginText>105.a/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00114-01"]} />
<Admonition type="aarm" aarm="ramification">
<b></b>The "/=" operations between Bounded{"_"}String and String, and between String and Bounded{"_"}String, are automatically defined based on the corresponding "=" operations. <br />
</Admonition>
</AnnotatedOnly>


#### Implementation Advice

<MarginText>106_A.4.4</MarginText>
<p>Bounded string objects should not be implemented by implicit pointers and dynamic allocation. <br /></p>

<AnnotatedOnly>
<MarginText>106.a.1/2_A.4.4</MarginText>
<Admonition type="aarm" aarm="implementation-advice">
<b></b>Bounded string objects should not be implemented by implicit pointers and dynamic allocation.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>106.a_A.4.4</MarginText>
<Admonition type="aarm" aarm="implementation-note">
<b></b>The following is a possible implementation of the private part of the package: <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>106.b_A.4.4</MarginText>
<CodeBlock language="ada">
type Bounded{"_"}String{"_"}Internals (Length : Length{"_"}Range := 0) is{"\n"}   record{"\n"}      Data : String(1..Length);{"\n"}   end record;{"\n"}
<MarginText>106.c_A.4.4</MarginText>
type Bounded{"_"}String is{"\n"}   record{"\n"}      Data : Bounded{"_"}String{"_"}Internals;  -- Unconstrained{"\n"}   end record;{"\n"}
<MarginText>106.d_A.4.4</MarginText>
Null{"_"}Bounded{"_"}String : constant Bounded{"_"}String :={"\n"}   (Data ={">"} (Length ={">"} 0,{"\n"}             Data   ={">"} (1..0 ={">"} ' ')));{"\n"}

</CodeBlock>
</AnnotatedOnly>
<AnnotatedOnly>

#### Inconsistencies With Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>106.e/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00238-01"]} />
<Admonition type="aarm" aarm="correction">
<b>Amendment </b> The bounds of the string returned from Slice are now defined. This is technically an inconsistency; if a program depended on some other lower bound for the string returned from Slice, it could fail when compiled with Ada 2005. Such code is not portable even between Ada 95 implementations, so it should be very rare. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Incompatibilities With Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>106.f/3_A.4.4</MarginText>
<MarginInfo items={["AI95-00301-01", "AI05-0005-1"]} />
<Admonition type="aarm" aarm="note">
Procedure Set{"_"}Bounded{"_"}String, two Bounded{"_"}Slice subprograms, and overloaded versions of Index and Index{"_"}Non{"_"}Blank are added to Strings.Bounded.Generic{"_"}Bounded{"_"}Length. If an instance of Generic{"_"}Bounded{"_"}Length is referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, and an entity <i>E</i> with the <code><a href="/docs/arm/AA-3/AA-3.1#S0022">defining_identifier</a></code> as a new entity in Generic{"_"}Bounded{"_"}Length is defined in a package that is also referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, the entity <i>E</i> may no longer be use-visible, resulting in errors. This should be rare and is easily fixed if it does occur. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>106.g/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00128-01"]} />
<Admonition type="aarm" aarm="note">
{"{"}<i>8652/0049</i>{"}"} <b>Corrigendum:</b> Corrected the conditions for which Slice raises Index{"_"}Error.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>106.h/2_A.4.4</MarginText>
<MarginInfo items={["AI95-00128-01"]} />
<Admonition type="aarm" aarm="note">
{"{"}<i>8652/0049</i>{"}"} <b>Corrigendum:</b> Clarified the meaning of transformation, selector, and constructor subprograms by describing the effects of procedures and functions separately. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Incompatibilities With Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>106.i/3_A.4.4</MarginText>
<MarginInfo items={["AI05-0031-1"]} />
<Admonition type="aarm" aarm="note">
An overloaded version of Find{"_"}Token is added to Strings.Bounded.Generic{"_"}Bounded{"_"}Length. If an instance of Generic{"_"}Bounded{"_"}Length is referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, and an entity <i>E</i> with a <code><a href="/docs/arm/AA-3/AA-3.1#S0022">defining_identifier</a></code> of Find{"_"}Token is defined in a package that is also referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, the entity <i>E</i> may no longer be use-visible, resulting in errors. This should be rare and is easily fixed if it does occur. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.5"></a>

## A.4.5  Unbounded-Length String Handling

<MarginText>1/5_A.4.5</MarginText>
<MarginInfo items={["AI12-0445-1"]} />
<p>The language-defined package Strings.Unbounded provides a private type Unbounded{"_"}String and a set of operations. An object of type Unbounded{"_"}String represents a String whose low bound is 1 and whose length can vary conceptually between 0 and Natural'Last. The subprograms for fixed-length string handling are either overloaded directly for Unbounded{"_"}String, or are modified as necessary to reflect the flexibility in length. Since the Unbounded{"_"}String type is private, relevant constructor and selector operations are provided. <br /></p>

<AnnotatedOnly>
<MarginText>1.a_A.4.5</MarginText>
<Admonition type="aarm" aarm="reason">
<b></b>The transformation operations for fixed- and bounded-length strings that are not necessarily length preserving are supplied for Unbounded{"_"}String as procedures as well as functions. This allows an implementation to do an initial allocation for an unbounded string and to avoid further allocations as long as the length does not exceed the allocated length. <br />
</Admonition>
</AnnotatedOnly>


#### Static Semantics

<MarginText>2_A.4.5</MarginText>
<p>The library package Strings.Unbounded has the following declaration: <br /></p>

<MarginText>3/5_A.4.5</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
with Ada.Strings.Maps;{"\n"}package Ada.Strings.Unbounded{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized is{"\n"}
<MarginText>4/5_A.4.5</MarginText>
<MarginInfo items={["AI95-00161-01", "AI12-0399-1"]} />
   type Unbounded{"_"}String is private{"\n"}      with Preelaborable{"_"}Initialization;{"\n"}
<MarginText>5_A.4.5</MarginText>
   Null{"_"}Unbounded{"_"}String : constant Unbounded{"_"}String;{"\n"}
<MarginText>6_A.4.5</MarginText>
   function Length (Source : in Unbounded{"_"}String) return Natural;{"\n"}
<MarginText>7_A.4.5</MarginText>
   type String{"_"}Access is access all String;{"\n"}   procedure Free (X : in out String{"_"}Access);{"\n"}
<MarginText>8_A.4.5</MarginText>
-- Conversion, Concatenation, and Selection functions{"\n"}
<MarginText>9_A.4.5</MarginText>
   function To{"_"}Unbounded{"_"}String (Source : in String){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>10_A.4.5</MarginText>
   function To{"_"}Unbounded{"_"}String (Length : in Natural){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>11_A.4.5</MarginText>
   function To{"_"}String (Source : in Unbounded{"_"}String) return String;{"\n"}
<MarginText>11.1/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   procedure Set{"_"}Unbounded{"_"}String{"\n"}     (Target :    out Unbounded{"_"}String;{"\n"}      Source : in     String);{"\n"}
<MarginText>12_A.4.5</MarginText>
   procedure Append (Source   : in out Unbounded{"_"}String;{"\n"}                     New{"_"}Item : in Unbounded{"_"}String);{"\n"}
<MarginText>13_A.4.5</MarginText>
   procedure Append (Source   : in out Unbounded{"_"}String;{"\n"}                     New{"_"}Item : in String);{"\n"}
<MarginText>14_A.4.5</MarginText>
   procedure Append (Source   : in out Unbounded{"_"}String;{"\n"}                     New{"_"}Item : in Character);{"\n"}
<MarginText>15_A.4.5</MarginText>
   function "&" (Left, Right : in Unbounded{"_"}String){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>16_A.4.5</MarginText>
   function "&" (Left : in Unbounded{"_"}String; Right : in String){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>17_A.4.5</MarginText>
   function "&" (Left : in String; Right : in Unbounded{"_"}String){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>18_A.4.5</MarginText>
   function "&" (Left : in Unbounded{"_"}String; Right : in Character){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>19_A.4.5</MarginText>
   function "&" (Left : in Character; Right : in Unbounded{"_"}String){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>20_A.4.5</MarginText>
   function Element (Source : in Unbounded{"_"}String;{"\n"}                     Index  : in Positive){"\n"}      return Character;{"\n"}
<MarginText>21_A.4.5</MarginText>
   procedure Replace{"_"}Element (Source : in out Unbounded{"_"}String;{"\n"}                              Index  : in Positive;{"\n"}                              By     : in Character);{"\n"}
<MarginText>22_A.4.5</MarginText>
   function Slice (Source : in Unbounded{"_"}String;{"\n"}                   Low    : in Positive;{"\n"}                   High   : in Natural){"\n"}      return String;{"\n"}
<MarginText>22.1/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   function Unbounded{"_"}Slice{"\n"}      (Source : in Unbounded{"_"}String;{"\n"}       Low    : in Positive;{"\n"}       High   : in Natural){"\n"}          return Unbounded{"_"}String;{"\n"}
<MarginText>22.2/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   procedure Unbounded{"_"}Slice{"\n"}      (Source : in     Unbounded{"_"}String;{"\n"}       Target :    out Unbounded{"_"}String;{"\n"}       Low    : in     Positive;{"\n"}       High   : in     Natural);{"\n"}
<MarginText>23_A.4.5</MarginText>
   function "="  (Left, Right : in Unbounded{"_"}String) return Boolean;{"\n"}
<MarginText>24_A.4.5</MarginText>
   function "="  (Left : in Unbounded{"_"}String; Right : in String){"\n"}     return Boolean;{"\n"}
<MarginText>25_A.4.5</MarginText>
   function "="  (Left : in String; Right : in Unbounded{"_"}String){"\n"}     return Boolean;{"\n"}
<MarginText>26_A.4.5</MarginText>
   function "{"<"}"  (Left, Right : in Unbounded{"_"}String) return Boolean;{"\n"}
<MarginText>27_A.4.5</MarginText>
   function "{"<"}"  (Left : in Unbounded{"_"}String; Right : in String){"\n"}     return Boolean;{"\n"}
<MarginText>28_A.4.5</MarginText>
   function "{"<"}"  (Left : in String; Right : in Unbounded{"_"}String){"\n"}     return Boolean;{"\n"}
<MarginText>29_A.4.5</MarginText>
   function "{"<"}=" (Left, Right : in Unbounded{"_"}String) return Boolean;{"\n"}
<MarginText>30_A.4.5</MarginText>
   function "{"<"}="  (Left : in Unbounded{"_"}String; Right : in String){"\n"}     return Boolean;{"\n"}
<MarginText>31_A.4.5</MarginText>
   function "{"<"}="  (Left : in String; Right : in Unbounded{"_"}String){"\n"}     return Boolean;{"\n"}
<MarginText>32_A.4.5</MarginText>
   function "{">"}"  (Left, Right : in Unbounded{"_"}String) return Boolean;{"\n"}
<MarginText>33_A.4.5</MarginText>
   function "{">"}"  (Left : in Unbounded{"_"}String; Right : in String){"\n"}     return Boolean;{"\n"}
<MarginText>34_A.4.5</MarginText>
   function "{">"}"  (Left : in String; Right : in Unbounded{"_"}String){"\n"}     return Boolean;{"\n"}
<MarginText>35_A.4.5</MarginText>
   function "{">"}=" (Left, Right : in Unbounded{"_"}String) return Boolean;{"\n"}
<MarginText>36_A.4.5</MarginText>
   function "{">"}="  (Left : in Unbounded{"_"}String; Right : in String){"\n"}     return Boolean;{"\n"}
<MarginText>37_A.4.5</MarginText>
   function "{">"}="  (Left : in String; Right : in Unbounded{"_"}String){"\n"}     return Boolean;{"\n"}
<MarginText>38_A.4.5</MarginText>
-- Search subprograms{"\n"}
<MarginText>38.1/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   function Index (Source  : in Unbounded{"_"}String;{"\n"}                   Pattern : in String;{"\n"}                   From    : in Positive;{"\n"}                   Going   : in Direction := Forward;{"\n"}                   Mapping : in Maps.Character{"_"}Mapping := Maps.Identity){"\n"}      return Natural;{"\n"}
<MarginText>38.2/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   function Index (Source  : in Unbounded{"_"}String;{"\n"}                   Pattern : in String;{"\n"}                   From    : in Positive;{"\n"}                   Going   : in Direction := Forward;{"\n"}                   Mapping : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}      return Natural;{"\n"}
<MarginText>39_A.4.5</MarginText>
   function Index (Source   : in Unbounded{"_"}String;{"\n"}                   Pattern  : in String;{"\n"}                   Going    : in Direction := Forward;{"\n"}                   Mapping  : in Maps.Character{"_"}Mapping{"\n"}                                := Maps.Identity){"\n"}      return Natural;{"\n"}
<MarginText>40_A.4.5</MarginText>
   function Index (Source   : in Unbounded{"_"}String;{"\n"}                   Pattern  : in String;{"\n"}                   Going    : in Direction := Forward;{"\n"}                   Mapping  : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}      return Natural;{"\n"}
<MarginText>40.1/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   function Index (Source  : in Unbounded{"_"}String;{"\n"}                   Set     : in Maps.Character{"_"}Set;{"\n"}                   From    : in Positive;{"\n"}                   Test    : in Membership := Inside;{"\n"}                   Going    : in Direction := Forward){"\n"}      return Natural;{"\n"}
<MarginText>41_A.4.5</MarginText>
   function Index (Source : in Unbounded{"_"}String;{"\n"}                   Set    : in Maps.Character{"_"}Set;{"\n"}                   Test   : in Membership := Inside;{"\n"}                   Going  : in Direction  := Forward) return Natural;{"\n"}
<MarginText>41.1/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
   function Index{"_"}Non{"_"}Blank (Source : in Unbounded{"_"}String;{"\n"}                             From   : in Positive;{"\n"}                             Going  : in Direction := Forward){"\n"}      return Natural;{"\n"}
<MarginText>42_A.4.5</MarginText>
   function Index{"_"}Non{"_"}Blank (Source : in Unbounded{"_"}String;{"\n"}                             Going  : in Direction := Forward){"\n"}      return Natural;{"\n"}
<MarginText>43_A.4.5</MarginText>
   function Count (Source   : in Unbounded{"_"}String;{"\n"}                   Pattern  : in String;{"\n"}                   Mapping  : in Maps.Character{"_"}Mapping{"\n"}                                := Maps.Identity){"\n"}      return Natural;{"\n"}
<MarginText>44_A.4.5</MarginText>
   function Count (Source   : in Unbounded{"_"}String;{"\n"}                   Pattern  : in String;{"\n"}                   Mapping  : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}      return Natural;{"\n"}
<MarginText>45_A.4.5</MarginText>
   function Count (Source   : in Unbounded{"_"}String;{"\n"}                   Set      : in Maps.Character{"_"}Set){"\n"}      return Natural;{"\n"}
<MarginText>45.1/3_A.4.5</MarginText>
<MarginInfo items={["AI05-0031-1"]} />
   procedure Find{"_"}Token (Source : in Unbounded{"_"}String;{"\n"}                         Set    : in Maps.Character{"_"}Set;{"\n"}                         From   : in Positive;{"\n"}                         Test   : in Membership;{"\n"}                         First  : out Positive;{"\n"}                         Last   : out Natural);{"\n"}
<MarginText>46_A.4.5</MarginText>
   procedure Find{"_"}Token (Source : in Unbounded{"_"}String;{"\n"}                         Set    : in Maps.Character{"_"}Set;{"\n"}                         Test   : in Membership;{"\n"}                         First  : out Positive;{"\n"}                         Last   : out Natural);{"\n"}
<MarginText>47_A.4.5</MarginText>
-- String translation subprograms{"\n"}
<MarginText>48_A.4.5</MarginText>
   function Translate (Source  : in Unbounded{"_"}String;{"\n"}                       Mapping : in Maps.Character{"_"}Mapping){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>49_A.4.5</MarginText>
   procedure Translate (Source  : in out Unbounded{"_"}String;{"\n"}                        Mapping : in Maps.Character{"_"}Mapping);{"\n"}
<MarginText>50_A.4.5</MarginText>
   function Translate (Source  : in Unbounded{"_"}String;{"\n"}                       Mapping : in Maps.Character{"_"}Mapping{"_"}Function){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>51_A.4.5</MarginText>
   procedure Translate (Source  : in out Unbounded{"_"}String;{"\n"}                        Mapping : in Maps.Character{"_"}Mapping{"_"}Function);{"\n"}
<MarginText>52_A.4.5</MarginText>
-- String transformation subprograms{"\n"}
<MarginText>53_A.4.5</MarginText>
   function Replace{"_"}Slice (Source   : in Unbounded{"_"}String;{"\n"}                           Low      : in Positive;{"\n"}                           High     : in Natural;{"\n"}                           By       : in String){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>54_A.4.5</MarginText>
   procedure Replace{"_"}Slice (Source   : in out Unbounded{"_"}String;{"\n"}                            Low      : in Positive;{"\n"}                            High     : in Natural;{"\n"}                            By       : in String);{"\n"}
<MarginText>55_A.4.5</MarginText>
   function Insert (Source   : in Unbounded{"_"}String;{"\n"}                    Before   : in Positive;{"\n"}                    New{"_"}Item : in String){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>56_A.4.5</MarginText>
   procedure Insert (Source   : in out Unbounded{"_"}String;{"\n"}                     Before   : in Positive;{"\n"}                     New{"_"}Item : in String);{"\n"}
<MarginText>57_A.4.5</MarginText>
   function Overwrite (Source    : in Unbounded{"_"}String;{"\n"}                       Position  : in Positive;{"\n"}                       New{"_"}Item  : in String){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>58_A.4.5</MarginText>
   procedure Overwrite (Source    : in out Unbounded{"_"}String;{"\n"}                        Position  : in Positive;{"\n"}                        New{"_"}Item  : in String);{"\n"}
<MarginText>59_A.4.5</MarginText>
   function Delete (Source  : in Unbounded{"_"}String;{"\n"}                    From    : in Positive;{"\n"}                    Through : in Natural){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>60_A.4.5</MarginText>
   procedure Delete (Source  : in out Unbounded{"_"}String;{"\n"}                     From    : in Positive;{"\n"}                     Through : in Natural);{"\n"}
<MarginText>61_A.4.5</MarginText>
   function Trim (Source : in Unbounded{"_"}String;{"\n"}                  Side   : in Trim{"_"}End){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>62_A.4.5</MarginText>
   procedure Trim (Source : in out Unbounded{"_"}String;{"\n"}                   Side   : in Trim{"_"}End);{"\n"}
<MarginText>63_A.4.5</MarginText>
   function Trim (Source : in Unbounded{"_"}String;{"\n"}                  Left   : in Maps.Character{"_"}Set;{"\n"}                  Right  : in Maps.Character{"_"}Set){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>64_A.4.5</MarginText>
   procedure Trim (Source : in out Unbounded{"_"}String;{"\n"}                   Left   : in Maps.Character{"_"}Set;{"\n"}                   Right  : in Maps.Character{"_"}Set);{"\n"}
<MarginText>65_A.4.5</MarginText>
   function Head (Source : in Unbounded{"_"}String;{"\n"}                  Count  : in Natural;{"\n"}                  Pad    : in Character := Space){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>66_A.4.5</MarginText>
   procedure Head (Source : in out Unbounded{"_"}String;{"\n"}                   Count  : in Natural;{"\n"}                   Pad    : in Character := Space);{"\n"}
<MarginText>67_A.4.5</MarginText>
   function Tail (Source : in Unbounded{"_"}String;{"\n"}                  Count  : in Natural;{"\n"}                  Pad    : in Character := Space){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>68_A.4.5</MarginText>
   procedure Tail (Source : in out Unbounded{"_"}String;{"\n"}                   Count  : in Natural;{"\n"}                   Pad    : in Character := Space);{"\n"}
<MarginText>69_A.4.5</MarginText>
   function "{"*"}" (Left  : in Natural;{"\n"}                 Right : in Character){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>70_A.4.5</MarginText>
   function "{"*"}" (Left  : in Natural;{"\n"}                 Right : in String){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>71_A.4.5</MarginText>
   function "{"*"}" (Left  : in Natural;{"\n"}                 Right : in Unbounded{"_"}String){"\n"}      return Unbounded{"_"}String;{"\n"}
<MarginText>72_A.4.5</MarginText>
private{"\n"}   ... -- not specified by the language{"\n"}end Ada.Strings.Unbounded;{"\n"}

</CodeBlock>
<MarginText>72.1/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00360-01"]} />
<p>The type Unbounded{"_"}String needs finalization (see <a href="/docs/arm/AA-7/AA-7.6">7.6</a>).<br /></p>

<MarginText>73_A.4.5</MarginText>
<p>Null{"_"}Unbounded{"_"}String represents the null String. If an object of type Unbounded{"_"}String is not otherwise initialized, it will be initialized to the same value as Null{"_"}Unbounded{"_"}String.<br /></p>

<MarginText>74_A.4.5</MarginText>
<p>The function Length returns the length of the String represented by Source.<br /></p>

<MarginText>75_A.4.5</MarginText>
<p>The type String{"_"}Access provides a (nonprivate) access type for explicit processing of unbounded-length strings. The procedure Free performs an unchecked deallocation of an object of type String{"_"}Access.<br /></p>

<MarginText>76_A.4.5</MarginText>
<p>The function To{"_"}Unbounded{"_"}String(Source : in String) returns an Unbounded{"_"}String that represents Source. The function To{"_"}Unbounded{"_"}String(Length : in Natural) returns an Unbounded{"_"}String that represents an uninitialized String whose length is Length.<br /></p>

<MarginText>77_A.4.5</MarginText>
<p>The function To{"_"}String returns the String with lower bound 1 represented by Source. To{"_"}String and To{"_"}Unbounded{"_"}String are related as follows: <br /></p>

<MarginText>78_A.4.5</MarginText>
<ul>
<li>If S is a String, then To{"_"}String(To{"_"}Unbounded{"_"}String(S)) = S.<br /></li>
<MarginText>79_A.4.5</MarginText>
<li>If U is an Unbounded{"_"}String, then To{"_"}Unbounded{"_"}String(To{"_"}String(U)) = U. <br /></li>
</ul>
<MarginText>79.1/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<p>The procedure Set{"_"}Unbounded{"_"}String sets Target to an Unbounded{"_"}String that represents Source.<br /></p>

<MarginText>80_A.4.5</MarginText>
<p>For each of the Append procedures, the resulting string represented by the Source parameter is given by the concatenation of the original value of Source and the value of New{"_"}Item.<br /></p>

<MarginText>81_A.4.5</MarginText>
<p>Each of the "&" functions returns an Unbounded{"_"}String obtained by concatenating the string or character given or represented by one of the parameters, with the string or character given or represented by the other parameter, and applying To{"_"}Unbounded{"_"}String to the concatenation result string.<br /></p>

<AnnotatedOnly>
<MarginText>81.a/5_A.4.5</MarginText>
<MarginInfo items={["AI12-0005-1"]} />
<Admonition type="aarm" aarm="ramification">
<b></b>If the resulting string is longer than Natural'Last, Constraint{"_"}Error is raised because the upper bound of the underlying String concatenation is outside of the range of the index subtype of Natural (see <a href="/docs/arm/AA-4/AA-4.5#Subclause_4.5.3">4.5.3</a>). Note that the same is true for other operations that attempt to create an overlong string: either they are defined in terms of this concatenation operation (as with Append) or they are defined in terms of Ada.Strings.Fixed operations (as with Insert and Replace{"_"}Slice), which themselves are defined in terms of String concatenation (which raises Constraint{"_"}Error for overlong strings as described above). Therefore, it is never possible to create an Unbounded{"_"}String with a length greater than Natural'Last. <br />
</Admonition>
</AnnotatedOnly>

<MarginText>82_A.4.5</MarginText>
<p>The Element, Replace{"_"}Element, and Slice subprograms have the same effect as the corresponding bounded-length string subprograms.<br /></p>

<MarginText>82.1/3_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01", "AI05-0262-1"]} />
<p>The function Unbounded{"_"}Slice returns the slice at positions Low through High in the string represented by Source as an Unbounded{"_"}String. The procedure Unbounded{"_"}Slice sets Target to the Unbounded{"_"}String representing the slice at positions Low through High in the string represented by Source. Both subprograms propagate Index{"_"}Error if Low {">"} Length(Source)+1 or High {">"} Length(Source).<br /></p>

<MarginText>83_A.4.5</MarginText>
<p>Each of the functions "=", "{"<"}", "{">"}", "{"<"}=", and "{">"}=" returns the same result as the corresponding String operation applied to the String values given or represented by Left and Right.<br /></p>

<MarginText>84_A.4.5</MarginText>
<p>Each of the search subprograms (Index, Index{"_"}Non{"_"}Blank, Count, Find{"_"}Token) has the same effect as the corresponding subprogram in Strings.Fixed applied to the string represented by the Unbounded{"_"}String parameter.<br /></p>

<MarginText>85_A.4.5</MarginText>
<p>The Translate function has an analogous effect to the corresponding subprogram in Strings.Fixed. The translation is applied to the string represented by the Unbounded{"_"}String parameter, and the result is converted (via To{"_"}Unbounded{"_"}String) to an Unbounded{"_"}String.<br /></p>

<MarginText>86_A.4.5</MarginText>
<p>Each of the transformation functions (Replace{"_"}Slice, Insert, Overwrite, Delete), selector functions (Trim, Head, Tail), and constructor functions ("{"*"}") is likewise analogous to its corresponding subprogram in Strings.Fixed. For each of the subprograms, the corresponding fixed-length string subprogram is applied to the string represented by the Unbounded{"_"}String parameter, and To{"_"}Unbounded{"_"}String is applied the result string.<br /></p>

<MarginText>87_A.4.5</MarginText>
<p>For each of the procedures Translate, Replace{"_"}Slice, Insert, Overwrite, Delete, Trim, Head, and Tail, the resulting string represented by the Source parameter is given by the corresponding function for fixed-length strings applied to the string represented by Source's original value. <br /></p>


#### Implementation Requirements

<MarginText>88_A.4.5</MarginText>
<p>No storage associated with an Unbounded{"_"}String object shall be lost upon assignment or scope exit. <br /></p>

<AnnotatedOnly>
<MarginText>88.a/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<Admonition type="aarm" aarm="implementation-note">
<b></b>A sample implementation of the private part of the package and several of the subprograms appears in the Ada 95 Rationale.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Incompatibilities With Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>88.b/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00360-01"]} />
<Admonition type="aarm" aarm="correction">
<b>Amendment </b> Type Unbounded{"_"}String is defined to need finalization. If the restriction No{"_"}Nested{"_"}Finalization (see <a href="/docs/arm/AA-D/AA-D.7">D.7</a>) applies to the partition, and Unbounded{"_"}String does not have a controlled part, it will not be allowed in local objects in Ada 2005 whereas it would be allowed in original Ada 95. Such code is not portable, as most Ada compilers have a controlled part in Unbounded{"_"}String, and thus would be illegal.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>88.c/3_A.4.5</MarginText>
<MarginInfo items={["AI95-00301-01", "AI05-0005-1"]} />
<Admonition type="aarm" aarm="note">
Procedure Set{"_"}Unbounded{"_"}String, two Unbounded{"_"}Slice subprograms, and overloaded versions of Index and Index{"_"}Non{"_"}Blank are added to Strings.Unbounded. If Strings.Unbounded is referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, and an entity <i>E</i> with the same <code><a href="/docs/arm/AA-3/AA-3.1#S0022">defining_identifier</a></code> as a new entity in Strings.Unbounded is defined in a package that is also referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, the entity <i>E</i> may no longer be use-visible, resulting in errors. This should be rare and is easily fixed if it does occur. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>88.d/2_A.4.5</MarginText>
<MarginInfo items={["AI95-00161-01"]} />
<Admonition type="aarm" aarm="correction">
<b>Amendment </b> Added a <code><a href="/docs/arm/AA-2/AA-2.8#S0019">pragma</a></code> Preelaborable{"_"}Initialization to type Unbounded{"_"}String, so that it can be used to declare default-initialized objects in preelaborated units. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Incompatibilities With Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>88.e/3_A.4.5</MarginText>
<MarginInfo items={["AI05-0031-1"]} />
<Admonition type="aarm" aarm="note">
An overloaded version of Find{"_"}Token is added to Strings.Unbounded. If Strings.Unbounded is referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, and an entity <i>E</i> with a <code><a href="/docs/arm/AA-3/AA-3.1#S0022">defining_identifier</a></code> of Find{"_"}Token is defined in a package that is also referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, the entity <i>E</i> may no longer be use-visible, resulting in errors. This should be rare and is easily fixed if it does occur. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.6"></a>

## A.4.6  String-Handling Sets and Mappings

<MarginText>1_A.4.6</MarginText>
<p>The language-defined package Strings.Maps.Constants declares Character{"_"}Set and Character{"_"}Mapping constants corresponding to classification and conversion functions in package Characters.Handling. <br /></p>

<AnnotatedOnly>
<MarginText>1.a_A.4.6</MarginText>
<Admonition type="aarm" aarm="discussion">
<b></b>The Constants package is a child of Strings.Maps since it needs visibility of the private part of Strings.Maps in order to initialize the constants in a preelaborable way (i.e. via aggregates versus function calls). <br />
</Admonition>
</AnnotatedOnly>


#### Static Semantics

<MarginText>2_A.4.6</MarginText>
<p>The library package Strings.Maps.Constants has the following declaration:<br /></p>

<MarginText>3/5_A.4.6</MarginText>
<MarginInfo items={["AI95-00362-01", "AI12-0414-1"]} />
<CodeBlock language="ada">
package Ada.Strings.Maps.Constants{"\n"}   with Pure is{"\n"}
<MarginText>4_A.4.6</MarginText>
   Control{"_"}Set           : constant Character{"_"}Set;{"\n"}   Graphic{"_"}Set           : constant Character{"_"}Set;{"\n"}   Letter{"_"}Set            : constant Character{"_"}Set;{"\n"}   Lower{"_"}Set             : constant Character{"_"}Set;{"\n"}   Upper{"_"}Set             : constant Character{"_"}Set;{"\n"}   Basic{"_"}Set             : constant Character{"_"}Set;{"\n"}   Decimal{"_"}Digit{"_"}Set     : constant Character{"_"}Set;{"\n"}   Hexadecimal{"_"}Digit{"_"}Set : constant Character{"_"}Set;{"\n"}   Alphanumeric{"_"}Set      : constant Character{"_"}Set;{"\n"}   Special{"_"}Set           : constant Character{"_"}Set;{"\n"}   ISO{"_"}646{"_"}Set           : constant Character{"_"}Set;{"\n"}
<MarginText>5_A.4.6</MarginText>
   Lower{"_"}Case{"_"}Map        : constant Character{"_"}Mapping;{"\n"}     --Maps to lower case for letters, else identity{"\n"}   Upper{"_"}Case{"_"}Map        : constant Character{"_"}Mapping;{"\n"}     --Maps to upper case for letters, else identity{"\n"}   Basic{"_"}Map             : constant Character{"_"}Mapping;{"\n"}     --Maps to basic letter for letters, else identity{"\n"}
<MarginText>6_A.4.6</MarginText>
private{"\n"}   ... -- not specified by the language{"\n"}end Ada.Strings.Maps.Constants;{"\n"}

</CodeBlock>
<MarginText>7_A.4.6</MarginText>
<p>Each of these constants represents a correspondingly named set of characters or character mapping in Characters.Handling (see <a href="/docs/arm/AA-A/AA-A.3#Subclause_A.3.2">A.3.2</a>). <br /></p>

<AnnotatedOnly>
<MarginText>8/5_A.4.6</MarginText>
<MarginInfo items={["AI05-0114-1", "AI12-0450-1"]} />
<Admonition type="aarm" aarm="note">
NOTE   There are certain characters which are defined to be lower case letters by ISO/IEC 10646 and are therefore allowed in identifiers, but are not considered lower case letters by Ada.Strings.Maps.Constants.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>8.a/3_A.4.6</MarginText>
<Admonition type="aarm" aarm="reason">
<b></b>This is to maintain runtime compatibility with the Ada 95 definitions of these constants; existing correct programs could break if the definitions were changed in a way the programs did not anticipate. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>8.b/2_A.4.6</MarginText>
<MarginInfo items={["AI95-00362-01"]} />
<Admonition type="aarm" aarm="note">
Strings.Maps.Constants is now Pure, so it can be used in pure units. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>8.c/3_A.4.6</MarginText>
<MarginInfo items={["AI05-0114-1"]} />
<Admonition type="aarm" aarm="correction">
<b></b> Added a note to clarify that these constants don't have any relationship to the characters allowed in identifiers. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.7"></a>

## A.4.7  Wide_String Handling

<MarginText>1/3_A.4.7</MarginText>
<MarginInfo items={["AI95-00302-03", "AI05-0286-1"]} />
<p>Facilities for handling strings of Wide{"_"}Character elements are found in the packages Strings.Wide{"_"}Maps, Strings.Wide{"_"}Fixed, Strings.Wide{"_"}Bounded, Strings.Wide{"_"}Unbounded, and Strings.Wide{"_"}Maps.Wide{"_"}Constants, and in the library functions Strings.Wide{"_"}Hash, Strings.Wide{"_"}Fixed.Wide{"_"}Hash, Strings.Wide{"_"}Bounded.Wide{"_"}Hash, Strings.Wide{"_"}Unbounded.Wide{"_"}Hash, Strings.Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Fixed.Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Bounded.Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Unbounded.Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Fixed.Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Bounded.Wide{"_"}Equal{"_"}Case{"_"}Insensitive, and Strings.Wide{"_"}Unbounded.Wide{"_"}Equal{"_"}Case{"_"}Insensitive. They provide the same string-handling operations as the corresponding packages and functions for strings of Character elements. <br /></p>


#### Static Semantics

<MarginText>2_A.4.7</MarginText>
<p>The package Strings.Wide{"_"}Maps has the following declaration. <br /></p>

<MarginText>3/5_A.4.7</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
package Ada.Strings.Wide{"_"}Maps{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized is{"\n"}
<MarginText>4/5_A.4.7</MarginText>
<MarginInfo items={["AI95-00161-01", "AI12-0399-1"]} />
   -- Representation for a set of Wide{"_"}Character values:{"\n"}   type Wide{"_"}Character{"_"}Set is private{"\n"}      with Preelaborable{"_"}Initialization;{"\n"}
<MarginText>5_A.4.7</MarginText>
   Null{"_"}Set : constant Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>6_A.4.7</MarginText>
   type Wide{"_"}Character{"_"}Range is{"\n"}     record{"\n"}         Low  : Wide{"_"}Character;{"\n"}         High : Wide{"_"}Character;{"\n"}     end record;{"\n"}   -- Represents Wide{"_"}Character range Low..High{"\n"}
<MarginText>7_A.4.7</MarginText>
   type Wide{"_"}Character{"_"}Ranges is array (Positive range {"<"}{">"}){"\n"}      of Wide{"_"}Character{"_"}Range;{"\n"}
<MarginText>8_A.4.7</MarginText>
   function To{"_"}Set    (Ranges : in Wide{"_"}Character{"_"}Ranges){"\n"}      return Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>9_A.4.7</MarginText>
   function To{"_"}Set    (Span   : in Wide{"_"}Character{"_"}Range){"\n"}      return Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>10_A.4.7</MarginText>
   function To{"_"}Ranges (Set    : in Wide{"_"}Character{"_"}Set){"\n"}      return Wide{"_"}Character{"_"}Ranges;{"\n"}
<MarginText>11_A.4.7</MarginText>
   function "="   (Left, Right : in Wide{"_"}Character{"_"}Set) return Boolean;{"\n"}
<MarginText>12_A.4.7</MarginText>
   function "not" (Right : in Wide{"_"}Character{"_"}Set){"\n"}      return Wide{"_"}Character{"_"}Set;{"\n"}   function "and" (Left, Right : in Wide{"_"}Character{"_"}Set){"\n"}      return Wide{"_"}Character{"_"}Set;{"\n"}   function "or"  (Left, Right : in Wide{"_"}Character{"_"}Set){"\n"}      return Wide{"_"}Character{"_"}Set;{"\n"}   function "xor" (Left, Right : in Wide{"_"}Character{"_"}Set){"\n"}      return Wide{"_"}Character{"_"}Set;{"\n"}   function "-"   (Left, Right : in Wide{"_"}Character{"_"}Set){"\n"}      return Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>13_A.4.7</MarginText>
   function Is{"_"}In (Element : in Wide{"_"}Character;{"\n"}                   Set     : in Wide{"_"}Character{"_"}Set){"\n"}      return Boolean;{"\n"}
<MarginText>14_A.4.7</MarginText>
   function Is{"_"}Subset (Elements : in Wide{"_"}Character{"_"}Set;{"\n"}                       Set      : in Wide{"_"}Character{"_"}Set){"\n"}      return Boolean;{"\n"}
<MarginText>15_A.4.7</MarginText>
   function "{"<"}=" (Left  : in Wide{"_"}Character{"_"}Set;{"\n"}                  Right : in Wide{"_"}Character{"_"}Set){"\n"}      return Boolean renames Is{"_"}Subset;{"\n"}
<MarginText>16_A.4.7</MarginText>
   -- Alternative representation for a set of Wide{"_"}Character values:{"\n"}   subtype Wide{"_"}Character{"_"}Sequence is Wide{"_"}String;{"\n"}
<MarginText>17_A.4.7</MarginText>
   function To{"_"}Set (Sequence  : in Wide{"_"}Character{"_"}Sequence){"\n"}      return Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>18_A.4.7</MarginText>
   function To{"_"}Set (Singleton : in Wide{"_"}Character){"\n"}      return Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>19_A.4.7</MarginText>
   function To{"_"}Sequence (Set  : in Wide{"_"}Character{"_"}Set){"\n"}      return Wide{"_"}Character{"_"}Sequence;{"\n"}
<MarginText>20/5_A.4.7</MarginText>
<MarginInfo items={["AI95-00161-01", "AI12-0399-1"]} />
   -- Representation for a Wide{"_"}Character to Wide{"_"}Character mapping:{"\n"}   type Wide{"_"}Character{"_"}Mapping is private{"\n"}       with Preelaborable{"_"}Initialization;{"\n"}
<MarginText>21_A.4.7</MarginText>
   function Value (Map     : in Wide{"_"}Character{"_"}Mapping;{"\n"}                   Element : in Wide{"_"}Character){"\n"}      return Wide{"_"}Character;{"\n"}
<MarginText>22_A.4.7</MarginText>
   Identity : constant Wide{"_"}Character{"_"}Mapping;{"\n"}
<MarginText>23_A.4.7</MarginText>
   function To{"_"}Mapping (From, To : in Wide{"_"}Character{"_"}Sequence){"\n"}      return Wide{"_"}Character{"_"}Mapping;{"\n"}
<MarginText>24_A.4.7</MarginText>
   function To{"_"}Domain (Map : in Wide{"_"}Character{"_"}Mapping){"\n"}      return Wide{"_"}Character{"_"}Sequence;{"\n"}
<MarginText>25_A.4.7</MarginText>
   function To{"_"}Range  (Map : in Wide{"_"}Character{"_"}Mapping){"\n"}      return Wide{"_"}Character{"_"}Sequence;{"\n"}
<MarginText>26_A.4.7</MarginText>
   type Wide{"_"}Character{"_"}Mapping{"_"}Function is{"\n"}      access function (From : in Wide{"_"}Character) return Wide{"_"}Character;{"\n"}
<MarginText>27_A.4.7</MarginText>
private{"\n"}   ... -- not specified by the language{"\n"}end Ada.Strings.Wide{"_"}Maps;{"\n"}

</CodeBlock>
<MarginText>28_A.4.7</MarginText>
<p>The context clause for each of the packages Strings.Wide{"_"}Fixed, Strings.Wide{"_"}Bounded, and Strings.Wide{"_"}Unbounded identifies Strings.Wide{"_"}Maps instead of Strings.Maps.<br /></p>

<MarginText>28.1/3_A.4.7</MarginText>
<MarginInfo items={["AI05-0223-1"]} />
<p>Types Wide{"_"}Character{"_"}Set and Wide{"_"}Character{"_"}Mapping need finalization.<br /></p>

<MarginText>29/3_A.4.7</MarginText>
<MarginInfo items={["AI95-00302-03", "AI05-0286-1"]} />
<p>For each of the packages Strings.Fixed, Strings.Bounded, Strings.Unbounded, and Strings.Maps.Constants, and for library functions Strings.Hash, Strings.Fixed.Hash, Strings.Bounded.Hash, Strings.Unbounded.Hash, Strings.Hash{"_"}Case{"_"}Insensitive, Strings.Fixed.Hash{"_"}Case{"_"}Insensitive, Strings.Bounded.Hash{"_"}Case{"_"}Insensitive, Strings.Unbounded.Hash{"_"}Case{"_"}Insensitive, Strings.Equal{"_"}Case{"_"}Insensitive, Strings.Fixed.Equal{"_"}Case{"_"}Insensitive, Strings.Bounded.Equal{"_"}Case{"_"}Insensitive, and Strings.Unbounded.Equal{"_"}Case{"_"}Insensitive, the corresponding wide string package or function has the same contents except that <br /></p>

<MarginText>30_A.4.7</MarginText>
<ul>
<li>Wide{"_"}Space replaces Space<br /></li>
<MarginText>31_A.4.7</MarginText>
<li>Wide{"_"}Character replaces Character<br /></li>
<MarginText>32_A.4.7</MarginText>
<li>Wide{"_"}String replaces String<br /></li>
<MarginText>33_A.4.7</MarginText>
<li>Wide{"_"}Character{"_"}Set replaces Character{"_"}Set<br /></li>
<MarginText>34_A.4.7</MarginText>
<li>Wide{"_"}Character{"_"}Mapping replaces Character{"_"}Mapping<br /></li>
<MarginText>35_A.4.7</MarginText>
<li>Wide{"_"}Character{"_"}Mapping{"_"}Function replaces Character{"_"}Mapping{"_"}Function<br /></li>
<MarginText>36_A.4.7</MarginText>
<li>Wide{"_"}Maps replaces Maps<br /></li>
<MarginText>37_A.4.7</MarginText>
<li>Bounded{"_"}Wide{"_"}String replaces Bounded{"_"}String<br /></li>
<MarginText>38_A.4.7</MarginText>
<li>Null{"_"}Bounded{"_"}Wide{"_"}String replaces Null{"_"}Bounded{"_"}String<br /></li>
<MarginText>39_A.4.7</MarginText>
<li>To{"_"}Bounded{"_"}Wide{"_"}String replaces To{"_"}Bounded{"_"}String<br /></li>
<MarginText>40_A.4.7</MarginText>
<li>To{"_"}Wide{"_"}String replaces To{"_"}String<br /></li>
<MarginText>40.1/2_A.4.7</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<li>Set{"_"}Bounded{"_"}Wide{"_"}String replaces Set{"_"}Bounded{"_"}String<br /></li>
<MarginText>41_A.4.7</MarginText>
<li>Unbounded{"_"}Wide{"_"}String replaces Unbounded{"_"}String<br /></li>
<MarginText>42_A.4.7</MarginText>
<li>Null{"_"}Unbounded{"_"}Wide{"_"}String replaces Null{"_"}Unbounded{"_"}String<br /></li>
<MarginText>43_A.4.7</MarginText>
<li>Wide{"_"}String{"_"}Access replaces String{"_"}Access<br /></li>
<MarginText>44_A.4.7</MarginText>
<li>To{"_"}Unbounded{"_"}Wide{"_"}String replaces To{"_"}Unbounded{"_"}String<br /></li>
<MarginText>44.1/2_A.4.7</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<li>Set{"_"}Unbounded{"_"}Wide{"_"}String replaces Set{"_"}Unbounded{"_"}String<br /></li>
</ul>
<MarginText>45_A.4.7</MarginText>
<p>The following additional declaration is present in Strings.Wide{"_"}Maps.Wide{"_"}Constants: <br /></p>

<MarginText>46/2_A.4.7</MarginText>
<MarginInfo items={["AI95-00285-01", "AI95-00395-01"]} />
<CodeBlock language="ada">
Character{"_"}Set : constant Wide{"_"}Maps.Wide{"_"}Character{"_"}Set;{"\n"}--Contains each Wide{"_"}Character value WC such that{"\n"}--Characters.Conversions.Is{"_"}Character(WC) is True{"\n"}

</CodeBlock>
<MarginText>46.1/2_A.4.7</MarginText>
<MarginInfo items={["AI95-00395-01"]} />
<p>Each Wide{"_"}Character{"_"}Set constant in the package Strings.Wide{"_"}Maps.Wide{"_"}Constants contains no values outside the Character portion of Wide{"_"}Character. Similarly, each Wide{"_"}Character{"_"}Mapping constant in this package is the identity mapping when applied to any element outside the Character portion of Wide{"_"}Character.<br /></p>

<MarginText>47/5_A.4.7</MarginText>
<MarginInfo items={["AI95-00362-01", "AI12-0302-1", "AI12-0414-1"]} />
<p>Aspect Pure is replaced by aspects Preelaborate, Nonblocking, Global ={">"} <b>in out synchronized</b> in Strings.Wide{"_"}Maps.Wide{"_"}Constants. <br /></p>

<AnnotatedOnly>
<MarginText>48/5_A.4.7</MarginText>
<Admonition type="aarm" aarm="note">
NOTE   If a null Wide{"_"}Character{"_"}Mapping{"_"}Function is passed to any of the Wide{"_"}String handling subprograms, Constraint{"_"}Error is propagated.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Incompatibilities With Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>49.a/2_A.4.7</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<Admonition type="aarm" aarm="note">
Various new operations are added to Strings.Wide{"_"}Fixed, Strings.Wide{"_"}Bounded, and Strings.Wide{"_"}Unbounded. If one of these packages is referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, and an entity <i>E</i> with the same <code><a href="/docs/arm/AA-3/AA-3.1#S0022">defining_identifier</a></code> as a new entity is defined in a package that is also referenced in a <code><a href="/docs/arm/AA-8/AA-8.4#S0235">use_clause</a></code>, the entity <i>E</i> may no longer be use-visible, resulting in errors. This should be rare and is easily fixed if it does occur. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>49.b/2_A.4.7</MarginText>
<MarginInfo items={["AI95-00161-01"]} />
<Admonition type="aarm" aarm="correction">
<b>Amendment </b> Added <code><a href="/docs/arm/AA-2/AA-2.8#S0019">pragma</a></code> Preelaborable{"_"}Initialization to types Wide{"_"}Character{"_"}Set and Wide{"_"}Character{"_"}Mapping, so that they can be used to declare default-initialized objects in preelaborated units. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>49.c/2_A.4.7</MarginText>
<MarginInfo items={["AI95-00285-01"]} />
<Admonition type="aarm" aarm="note">
Corrected the description of Character{"_"}Set.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>49.d/2_A.4.7</MarginText>
<MarginInfo items={["AI95-00302-03"]} />
<Admonition type="aarm" aarm="note">
Added wide versions of Strings.Hash and Strings.Unbounded.Hash.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>49.e/2_A.4.7</MarginText>
<MarginInfo items={["AI95-00362-01"]} />
<Admonition type="aarm" aarm="note">
Added wording so that Strings.Wide{"_"}Maps.Wide{"_"}Constants does not change to Pure.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>49.f/2_A.4.7</MarginText>
<MarginInfo items={["AI95-00395-01"]} />
<Admonition type="aarm" aarm="note">
The second Note is now normative text, since there is no way to derive it from the other rules. It's a little weird given the use of Unicode character classifications in Ada 2005; but changing it would be inconsistent with Ada 95 and a one-to-one mapping isn't necessarily correct anyway. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>49.g/3_A.4.7</MarginText>
<MarginInfo items={["AI05-0286-1"]} />
<Admonition type="aarm" aarm="note">
The case insenstive library functions (Strings.Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Fixed.Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Bounded.Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Unbounded.Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Fixed.Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Bounded.Wide{"_"}Hash{"_"}Case{"_"}Insensitive, and Strings.Wide{"_"}Unbounded.Wide{"_"}Hash{"_"}Case{"_"}Insensitive) are new. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>49.h/3_A.4.7</MarginText>
<MarginInfo items={["AI05-0223-1"]} />
<Admonition type="aarm" aarm="note">
<b>Correction</b>: Identified Wide{"_"}Character{"_"}Set and Wide{"_"}Character{"_"}Mapping as needing finalization. It is likely that they are implemented with a controlled type, so this change is unlikely to make any difference in practice. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.8"></a>

## A.4.8  Wide_Wide_String Handling

<MarginText>1/3_A.4.8</MarginText>
<MarginInfo items={["AI95-00285-01", "AI95-00395-01", "AI05-0286-1"]} />
<p>Facilities for handling strings of Wide{"_"}Wide{"_"}Character elements are found in the packages Strings.Wide{"_"}Wide{"_"}Maps, Strings.Wide{"_"}Wide{"_"}Fixed, Strings.Wide{"_"}Wide{"_"}Bounded, Strings.Wide{"_"}Wide{"_"}Unbounded, and Strings.Wide{"_"}Wide{"_"}Maps.Wide{"_"}Wide{"_"}Constants, and in the library functions Strings.Wide{"_"}Wide{"_"}Hash, Strings.Wide{"_"}Wide{"_"}Fixed.Wide{"_"}Wide{"_"}Hash, Strings.Wide{"_"}Wide{"_"}Bounded.Wide{"_"}Wide{"_"}Hash, Strings.Wide{"_"}Wide{"_"}Unbounded.Wide{"_"}Wide{"_"}Hash, Strings.Wide{"_"}Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Fixed.Wide{"_"}Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Bounded.Wide{"_"}Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Unbounded.Wide{"_"}Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Fixed.Wide{"_"}Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Bounded.Wide{"_"}Wide{"_"}Equal{"_"}Case{"_"}Insensitive, and Strings.Wide{"_"}Wide{"_"}Unbounded.Wide{"_"}Wide{"_"}Equal{"_"}Case{"_"}Insensitive. They provide the same string-handling operations as the corresponding packages and functions for strings of Character elements. <br /></p>


#### Static Semantics

<MarginText>2/2_A.4.8</MarginText>
<MarginInfo items={["AI95-00285-01"]} />
<p>The library package Strings.Wide{"_"}Wide{"_"}Maps has the following declaration.<br /></p>

<MarginText>3/5_A.4.8</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
package Ada.Strings.Wide{"_"}Wide{"_"}Maps{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized is{"\n"}
<MarginText>4/5_A.4.8</MarginText>
<MarginInfo items={["AI12-0399-1"]} />
   -- Representation for a set of Wide{"_"}Wide{"_"}Character values:{"\n"}   type Wide{"_"}Wide{"_"}Character{"_"}Set is private{"\n"}      with Preelaborable{"_"}Initialization;{"\n"}
<MarginText>5/2_A.4.8</MarginText>
   Null{"_"}Set : constant Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>6/2_A.4.8</MarginText>
   type Wide{"_"}Wide{"_"}Character{"_"}Range is{"\n"}      record{"\n"}         Low  : Wide{"_"}Wide{"_"}Character;{"\n"}         High : Wide{"_"}Wide{"_"}Character;{"\n"}      end record;{"\n"}   -- Represents Wide{"_"}Wide{"_"}Character range Low..High{"\n"}
<MarginText>7/2_A.4.8</MarginText>
   type Wide{"_"}Wide{"_"}Character{"_"}Ranges is array (Positive range {"<"}{">"}){"\n"}         of Wide{"_"}Wide{"_"}Character{"_"}Range;{"\n"}
<MarginText>8/2_A.4.8</MarginText>
   function To{"_"}Set (Ranges : in Wide{"_"}Wide{"_"}Character{"_"}Ranges){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>9/2_A.4.8</MarginText>
   function To{"_"}Set (Span : in Wide{"_"}Wide{"_"}Character{"_"}Range){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>10/2_A.4.8</MarginText>
   function To{"_"}Ranges (Set : in Wide{"_"}Wide{"_"}Character{"_"}Set){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Ranges;{"\n"}
<MarginText>11/2_A.4.8</MarginText>
   function "=" (Left, Right : in Wide{"_"}Wide{"_"}Character{"_"}Set) return Boolean;{"\n"}
<MarginText>12/2_A.4.8</MarginText>
   function "not" (Right : in Wide{"_"}Wide{"_"}Character{"_"}Set){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}   function "and" (Left, Right : in Wide{"_"}Wide{"_"}Character{"_"}Set){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}   function "or" (Left, Right : in Wide{"_"}Wide{"_"}Character{"_"}Set){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}   function "xor" (Left, Right : in Wide{"_"}Wide{"_"}Character{"_"}Set){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}   function "-" (Left, Right : in Wide{"_"}Wide{"_"}Character{"_"}Set){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>13/2_A.4.8</MarginText>
   function Is{"_"}In (Element : in Wide{"_"}Wide{"_"}Character;{"\n"}                   Set     : in Wide{"_"}Wide{"_"}Character{"_"}Set){"\n"}         return Boolean;{"\n"}
<MarginText>14/2_A.4.8</MarginText>
   function Is{"_"}Subset (Elements : in Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}                       Set      : in Wide{"_"}Wide{"_"}Character{"_"}Set){"\n"}         return Boolean;{"\n"}
<MarginText>15/2_A.4.8</MarginText>
   function "{"<"}=" (Left  : in Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}                  Right : in Wide{"_"}Wide{"_"}Character{"_"}Set){"\n"}         return Boolean renames Is{"_"}Subset;{"\n"}
<MarginText>16/2_A.4.8</MarginText>
   -- Alternative representation for a set of Wide{"_"}Wide{"_"}Character values:{"\n"}   subtype Wide{"_"}Wide{"_"}Character{"_"}Sequence is Wide{"_"}Wide{"_"}String;{"\n"}
<MarginText>17/2_A.4.8</MarginText>
   function To{"_"}Set (Sequence : in Wide{"_"}Wide{"_"}Character{"_"}Sequence){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>18/2_A.4.8</MarginText>
   function To{"_"}Set (Singleton : in Wide{"_"}Wide{"_"}Character){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}
<MarginText>19/2_A.4.8</MarginText>
   function To{"_"}Sequence (Set : in Wide{"_"}Wide{"_"}Character{"_"}Set){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Sequence;{"\n"}
<MarginText>20/5_A.4.8</MarginText>
<MarginInfo items={["AI12-0399-1"]} />
   -- Representation for a Wide{"_"}Wide{"_"}Character to Wide{"_"}Wide{"_"}Character{"\n"}   -- mapping:{"\n"}   type Wide{"_"}Wide{"_"}Character{"_"}Mapping is private{"\n"}      with Preelaborable{"_"}Initialization;{"\n"}
<MarginText>21/2_A.4.8</MarginText>
   function Value (Map     : in Wide{"_"}Wide{"_"}Character{"_"}Mapping;{"\n"}                   Element : in Wide{"_"}Wide{"_"}Character){"\n"}         return Wide{"_"}Wide{"_"}Character;{"\n"}
<MarginText>22/2_A.4.8</MarginText>
   Identity : constant Wide{"_"}Wide{"_"}Character{"_"}Mapping;{"\n"}
<MarginText>23/2_A.4.8</MarginText>
   function To{"_"}Mapping (From, To : in Wide{"_"}Wide{"_"}Character{"_"}Sequence){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Mapping;{"\n"}
<MarginText>24/2_A.4.8</MarginText>
   function To{"_"}Domain (Map : in Wide{"_"}Wide{"_"}Character{"_"}Mapping){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Sequence;{"\n"}
<MarginText>25/2_A.4.8</MarginText>
   function To{"_"}Range (Map : in Wide{"_"}Wide{"_"}Character{"_"}Mapping){"\n"}         return Wide{"_"}Wide{"_"}Character{"_"}Sequence;{"\n"}
<MarginText>26/2_A.4.8</MarginText>
   type Wide{"_"}Wide{"_"}Character{"_"}Mapping{"_"}Function is{"\n"}         access function (From : in Wide{"_"}Wide{"_"}Character){"\n"}         return Wide{"_"}Wide{"_"}Character;{"\n"}
<MarginText>27/2_A.4.8</MarginText>
private{"\n"}   ... -- not specified by the language{"\n"}end Ada.Strings.Wide{"_"}Wide{"_"}Maps;{"\n"}

</CodeBlock>
<MarginText>28/2_A.4.8</MarginText>
<MarginInfo items={["AI95-00285-01"]} />
<p>The context clause for each of the packages Strings.Wide{"_"}Wide{"_"}Fixed, Strings.Wide{"_"}Wide{"_"}Bounded, and Strings.Wide{"_"}Wide{"_"}Unbounded identifies Strings.Wide{"_"}Wide{"_"}Maps instead of Strings.Maps.<br /></p>

<MarginText>28.1/3_A.4.8</MarginText>
<MarginInfo items={["AI05-0223-1"]} />
<p>Types Wide{"_"}Wide{"_"}Character{"_"}Set and Wide{"_"}Wide{"_"}Character{"_"}Mapping need finalization.<br /></p>

<MarginText>29/3_A.4.8</MarginText>
<MarginInfo items={["AI95-00285-01", "AI05-0286-1"]} />
<p>For each of the packages Strings.Fixed, Strings.Bounded, Strings.Unbounded, and Strings.Maps.Constants, and for library functions Strings.Hash, Strings.Fixed.Hash, Strings.Bounded.Hash, Strings.Unbounded.Hash, Strings.Hash{"_"}Case{"_"}Insensitive, Strings.Fixed.Hash{"_"}Case{"_"}Insensitive, Strings.Bounded.Hash{"_"}Case{"_"}Insensitive, Strings.Unbounded.Hash{"_"}Case{"_"}Insensitive, Strings.Equal{"_"}Case{"_"}Insensitive, Strings.Fixed.Equal{"_"}Case{"_"}Insensitive, Strings.Bounded.Equal{"_"}Case{"_"}Insensitive, and Strings.Unbounded.Equal{"_"}Case{"_"}Insensitive, the corresponding wide wide string package or function has the same contents except that<br /></p>

<MarginText>30/2_A.4.8</MarginText>
<ul>
<li>Wide{"_"}Wide{"_"}Space replaces Space<br /></li>
<MarginText>31/2_A.4.8</MarginText>
<li>Wide{"_"}Wide{"_"}Character replaces Character<br /></li>
<MarginText>32/2_A.4.8</MarginText>
<li>Wide{"_"}Wide{"_"}String replaces String<br /></li>
<MarginText>33/2_A.4.8</MarginText>
<li>Wide{"_"}Wide{"_"}Character{"_"}Set replaces Character{"_"}Set<br /></li>
<MarginText>34/2_A.4.8</MarginText>
<li>Wide{"_"}Wide{"_"}Character{"_"}Mapping replaces Character{"_"}Mapping<br /></li>
<MarginText>35/2_A.4.8</MarginText>
<li>Wide{"_"}Wide{"_"}Character{"_"}Mapping{"_"}Function replaces Character{"_"}Mapping{"_"}Function<br /></li>
<MarginText>36/2_A.4.8</MarginText>
<li>Wide{"_"}Wide{"_"}Maps replaces Maps<br /></li>
<MarginText>37/2_A.4.8</MarginText>
<li>Bounded{"_"}Wide{"_"}Wide{"_"}String replaces Bounded{"_"}String<br /></li>
<MarginText>38/2_A.4.8</MarginText>
<li>Null{"_"}Bounded{"_"}Wide{"_"}Wide{"_"}String replaces Null{"_"}Bounded{"_"}String<br /></li>
<MarginText>39/2_A.4.8</MarginText>
<li>To{"_"}Bounded{"_"}Wide{"_"}Wide{"_"}String replaces To{"_"}Bounded{"_"}String<br /></li>
<MarginText>40/2_A.4.8</MarginText>
<li>To{"_"}Wide{"_"}Wide{"_"}String replaces To{"_"}String<br /></li>
<MarginText>41/2_A.4.8</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<li>Set{"_"}Bounded{"_"}Wide{"_"}Wide{"_"}String replaces Set{"_"}Bounded{"_"}String<br /></li>
<MarginText>42/2_A.4.8</MarginText>
<li>Unbounded{"_"}Wide{"_"}Wide{"_"}String replaces Unbounded{"_"}String<br /></li>
<MarginText>43/2_A.4.8</MarginText>
<li>Null{"_"}Unbounded{"_"}Wide{"_"}Wide{"_"}String replaces Null{"_"}Unbounded{"_"}String<br /></li>
<MarginText>44/2_A.4.8</MarginText>
<li>Wide{"_"}Wide{"_"}String{"_"}Access replaces String{"_"}Access<br /></li>
<MarginText>45/2_A.4.8</MarginText>
<li>To{"_"}Unbounded{"_"}Wide{"_"}Wide{"_"}String replaces To{"_"}Unbounded{"_"}String<br /></li>
<MarginText>46/2_A.4.8</MarginText>
<MarginInfo items={["AI95-00301-01"]} />
<li>Set{"_"}Unbounded{"_"}Wide{"_"}Wide{"_"}String replaces Set{"_"}Unbounded{"_"}String<br /></li>
</ul>
<MarginText>47/2_A.4.8</MarginText>
<MarginInfo items={["AI95-00285-01", "AI95-00395-01"]} />
<p>The following additional declarations are present in Strings.Wide{"_"}Wide{"_"}Maps.Wide{"_"}Wide{"_"}Constants:<br /></p>

<MarginText>48/2_A.4.8</MarginText>
<CodeBlock language="ada">
Character{"_"}Set : constant Wide{"_"}Wide{"_"}Maps.Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}-- Contains each Wide{"_"}Wide{"_"}Character value WWC such that{"\n"}-- Characters.Conversions.Is{"_"}Character(WWC) is True{"\n"}Wide{"_"}Character{"_"}Set : constant Wide{"_"}Wide{"_"}Maps.Wide{"_"}Wide{"_"}Character{"_"}Set;{"\n"}-- Contains each Wide{"_"}Wide{"_"}Character value WWC such that{"\n"}-- Characters.Conversions.Is{"_"}Wide{"_"}Character(WWC) is True{"\n"}

</CodeBlock>
<MarginText>49/2_A.4.8</MarginText>
<MarginInfo items={["AI95-00395-01"]} />
<p>Each Wide{"_"}Wide{"_"}Character{"_"}Set constant in the package Strings.Wide{"_"}Wide{"_"}Maps.Wide{"_"}Wide{"_"}Constants contains no values outside the Character portion of Wide{"_"}Wide{"_"}Character. Similarly, each Wide{"_"}Wide{"_"}Character{"_"}Mapping constant in this package is the identity mapping when applied to any element outside the Character portion of Wide{"_"}Wide{"_"}Character.<br /></p>

<MarginText>50/5_A.4.8</MarginText>
<MarginInfo items={["AI95-00395-01", "AI12-0302-1", "AI12-0414-1"]} />
<p>Aspect Pure is replaced by aspects Preelaborate, Nonblocking, Global ={">"} <b>in out synchronized</b> in Strings.Wide{"_"}Wide{"_"}Maps.Wide{"_"}Wide{"_"}Constants.<br /></p>

<AnnotatedOnly>
<MarginText>51/2_A.4.8</MarginText>
<MarginInfo items={["AI95-00285-01"]} />
<Admonition type="aarm" aarm="note">
NOTE   If a null Wide{"_"}Wide{"_"}Character{"_"}Mapping{"_"}Function is passed to any of the Wide{"_"}Wide{"_"}String handling subprograms, Constraint{"_"}Error is propagated. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>51.a/2_A.4.8</MarginText>
<MarginInfo items={["AI95-00285-01", "AI95-00395-01"]} />
<Admonition type="aarm" aarm="note">
The double-wide string-handling packages (Strings.Wide{"_"}Wide{"_"}Maps, Strings.Wide{"_"}Wide{"_"}Fixed, Strings.Wide{"_"}Wide{"_"}Bounded, Strings.Wide{"_"}Wide{"_"}Unbounded, and Strings.Wide{"_"}Wide{"_"}Maps.Wide{"_"}Wide{"_"}Constants), and functions Strings.Wide{"_"}Wide{"_"}Hash and Strings.Wide{"_"}Wide{"_"}Unbounded.Wide{"_"}Wide{"_"}Hash are new. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>51.b/3_A.4.8</MarginText>
<MarginInfo items={["AI05-0286-1"]} />
<Admonition type="aarm" aarm="note">
The case insenstive library functions (Strings.Wide{"_"}Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Fixed.Wide{"_"}Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Bounded.Wide{"_"}Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Unbounded.Wide{"_"}Wide{"_"}Equal{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Fixed.Wide{"_"}Wide{"_"}Hash{"_"}Case{"_"}Insensitive, Strings.Wide{"_"}Wide{"_"}Bounded.Wide{"_"}Wide{"_"}Hash{"_"}Case{"_"}Insensitive, and Strings.Wide{"_"}Wide{"_"}Unbounded.Wide{"_"}Wide{"_"}Hash{"_"}Case{"_"}Insensitive) are new. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>51.c/3_A.4.8</MarginText>
<MarginInfo items={["AI05-0223-1"]} />
<Admonition type="aarm" aarm="note">
<b>Correction</b>: Identified Wide{"_"}Wide{"_"}Character{"_"}Set and Wide{"_"}Wide{"_"}Character{"_"}Mapping as needing finalization. It is likely that they are implemented with a controlled type, so this change is unlikely to make any difference in practice. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.9"></a>

## A.4.9  String Hashing


#### Static Semantics

<MarginText>1/2_A.4.9</MarginText>
<MarginInfo items={["AI95-00302-03"]} />
<p>The library function Strings.Hash has the following declaration: <br /></p>

<MarginText>2/5_A.4.9</MarginText>
<MarginInfo items={["AI05-0298-1", "AI12-0414-1"]} />
<CodeBlock language="ada">
with Ada.Containers;{"\n"}function Ada.Strings.Hash (Key : String) return Containers.Hash{"_"}Type{"\n"}   with Pure;{"\n"}

</CodeBlock>
<MarginText>3/2_A.4.9</MarginText>
<p class="Indented4">Returns an implementation-defined value which is a function of the value of Key. If <i>A</i> and <i>B</i> are strings such that <i>A</i> equals <i>B</i>, Hash(<i>A</i>) equals Hash(<i>B</i>). <br /></p>

<AnnotatedOnly>
<MarginText>3.a/2_A.4.9</MarginText>
<Admonition type="aarm" aarm="implementation-defined">
<b></b>The values returned by Strings.Hash.<br />
</Admonition>
</AnnotatedOnly>

<MarginText>4/2_A.4.9</MarginText>
<MarginInfo items={["AI95-00302-03"]} />
<p>The library function Strings.Fixed.Hash has the following declaration: <br /></p>

<MarginText>5/3_A.4.9</MarginText>
<MarginInfo items={["AI05-0298-1"]} />
<CodeBlock language="ada">
with Ada.Containers, Ada.Strings.Hash;{"\n"}function Ada.Strings.Fixed.Hash (Key : String) return Containers.Hash{"_"}Type{"\n"}   renames Ada.Strings.Hash;{"\n"}

</CodeBlock>
<MarginText>6/2_A.4.9</MarginText>
<MarginInfo items={["AI95-00302-03"]} />
<p>The generic library function Strings.Bounded.Hash has the following declaration: <br /></p>

<MarginText>7/5_A.4.9</MarginText>
<MarginInfo items={["AI05-0298-1", "AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
with Ada.Containers;{"\n"}generic{"\n"}   with package Bounded is{"\n"}      new Ada.Strings.Bounded.Generic{"_"}Bounded{"_"}Length ({"<"}{">"});{"\n"}function Ada.Strings.Bounded.Hash (Key : Bounded.Bounded{"_"}String){"\n"}   return Containers.Hash{"_"}Type{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized;{"\n"}

</CodeBlock>
<MarginText>8/3_A.4.9</MarginText>
<MarginInfo items={["AI05-0001-1"]} />
<p class="Indented4">Equivalent to Strings.Hash (Bounded.To{"_"}String (Key));<br /></p>

<MarginText>9/2_A.4.9</MarginText>
<MarginInfo items={["AI95-00302-03"]} />
<p>The library function Strings.Unbounded.Hash has the following declaration: <br /></p>

<MarginText>10/5_A.4.9</MarginText>
<MarginInfo items={["AI05-0298-1", "AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
with Ada.Containers;{"\n"}function Ada.Strings.Unbounded.Hash (Key : Unbounded{"_"}String){"\n"}   return Containers.Hash{"_"}Type{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized;{"\n"}

</CodeBlock>
<MarginText>11/3_A.4.9</MarginText>
<MarginInfo items={["AI05-0001-1"]} />
<p class="Indented4">Equivalent to Strings.Hash (To{"_"}String (Key));<br /></p>

<MarginText>11.1/3_A.4.9</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0298-1"]} />
<p>The library function Strings.Hash{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>11.2/5_A.4.9</MarginText>
<MarginInfo items={["AI12-0414-1"]} />
<CodeBlock language="ada">
with Ada.Containers;{"\n"}function Ada.Strings.Hash{"_"}Case{"_"}Insensitive (Key : String){"\n"}   return Containers.Hash{"_"}Type{"\n"}   with Pure;{"\n"}

</CodeBlock>
<MarginText>11.3/3_A.4.9</MarginText>
<p class="Indented4">Returns an implementation-defined value which is a function of the value of Key, converted to lower case. If A and B are strings such that Strings.Equal{"_"}Case{"_"}Insensitive (A, B) (see <a href="/docs/arm/AA-A/AA-A.4#Subclause_A.4.10">A.4.10</a>) is True, then Hash{"_"}Case{"_"}Insensitive(A) equals Hash{"_"}Case{"_"}Insensitive(B). <br /></p>

<MarginText>11.4/3_A.4.9</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0298-1"]} />
<p>The library function Strings.Fixed.Hash{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>11.5/3_A.4.9</MarginText>
<CodeBlock language="ada">
with Ada.Containers, Ada.Strings.Hash{"_"}Case{"_"}Insensitive;{"\n"}function Ada.Strings.Fixed.Hash{"_"}Case{"_"}Insensitive (Key : String){"\n"}   return Containers.Hash{"_"}Type renames Ada.Strings.Hash{"_"}Case{"_"}Insensitive;{"\n"}

</CodeBlock>
<MarginText>11.6/3_A.4.9</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0298-1"]} />
<p>The generic library function Strings.Bounded.Hash{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>11.7/5_A.4.9</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
with Ada.Containers;{"\n"}generic{"\n"}   with package Bounded is{"\n"}      new Ada.Strings.Bounded.Generic{"_"}Bounded{"_"}Length ({"<"}{">"});{"\n"}function Ada.Strings.Bounded.Hash{"_"}Case{"_"}Insensitive{"\n"}   (Key : Bounded.Bounded{"_"}String) return Containers.Hash{"_"}Type{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized;{"\n"}

</CodeBlock>
<MarginText>11.8/3_A.4.9</MarginText>
<p class="Indented4">Equivalent to Strings.Hash{"_"}Case{"_"}Insensitive (Bounded.To{"_"}String (Key)); <br /></p>

<MarginText>11.9/3_A.4.9</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0298-1"]} />
<p>The library function Strings.Unbounded.Hash{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>11.10/5_A.4.9</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
with Ada.Containers;{"\n"}function Ada.Strings.Unbounded.Hash{"_"}Case{"_"}Insensitive{"\n"}   (Key : Unbounded{"_"}String) return Containers.Hash{"_"}Type{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized;{"\n"}

</CodeBlock>
<MarginText>11.11/3_A.4.9</MarginText>
<p class="Indented4">Equivalent to Strings.Hash{"_"}Case{"_"}Insensitive (To{"_"}String (Key)); <br /></p>


#### Implementation Advice

<MarginText>12/2_A.4.9</MarginText>
<MarginInfo items={["AI95-00302-03"]} />
<p>The Hash functions should be good hash functions, returning a wide spread of values for different string values. It should be unlikely for similar strings to return the same value. <br /></p>

<AnnotatedOnly>
<MarginText>12.a/2_A.4.9</MarginText>
<Admonition type="aarm" aarm="implementation-advice">
<b></b>Strings.Hash should be good a hash function, returning a wide spread of values for different string values, and similar strings should rarely return the same value.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>12.b/2_A.4.9</MarginText>
<Admonition type="aarm" aarm="ramification">
<b></b>The other functions are defined in terms of Strings.Hash, so they don't need separate advice in the Annex. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>12.c/2_A.4.9</MarginText>
<MarginInfo items={["AI95-00302-03"]} />
<Admonition type="aarm" aarm="note">
The Strings.Hash, Strings.Fixed.Hash, Strings.Bounded.Hash, and Strings.Unbounded.Hash functions are new. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>12.d/3_A.4.9</MarginText>
<MarginInfo items={["AI05-0001-1"]} />
<Admonition type="aarm" aarm="note">
The Strings.Hash{"_"}Case{"_"}Insensitive, Strings.Fixed.Hash{"_"}Case{"_"}Insensitive, Strings.Bounded.Hash{"_"}Case{"_"}Insensitive, and Strings.Unbounded.Hash{"_"}Case{"_"}Insensitive functions are new. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.10"></a>

## A.4.10  String Comparison


#### Static Semantics

<MarginText>1/3_A.4.10</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0286-1", "AI05-0298-1"]} />
<p>The library function Strings.Equal{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>2/5_A.4.10</MarginText>
<MarginInfo items={["AI12-0414-1"]} />
<CodeBlock language="ada">
function Ada.Strings.Equal{"_"}Case{"_"}Insensitive (Left, Right : String){"\n"}   return Boolean with Pure;{"\n"}

</CodeBlock>
<MarginText>3/5_A.4.10</MarginText>
<MarginInfo items={["AI12-0263-1", "AI12-0450-1"]} />
<p class="Indented4">Returns True if the strings consist of the same sequence of characters after applying locale-independent simple case folding, as defined by documents referenced in Clause 2 of ISO/IEC 10646:2020. Otherwise, returns False. This function uses the same method as is used to determine whether two identifiers are the same.<br /></p>

<AnnotatedOnly>
<MarginText>3.a/3_A.4.10</MarginText>
<MarginInfo items={["AI05-0286-1"]} />
<Admonition type="aarm" aarm="discussion">
<b></b>For String, this is equivalent to converting to lower case and comparing. Not so for other string types. For Wide{"_"}Strings and Wide{"_"}Wide{"_"}Strings, note that this result is a more accurate comparison than converting the strings to lower case and comparing the results; it is possible that the lower case conversions are the same but this routine will report the strings as different. Additionally, Unicode says that the result of this function will never change for strings made up solely of defined code points; there is no such guarantee for case conversion to lower case.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>3.b/5_A.4.10</MarginText>
<MarginInfo items={["AI12-0263-1"]} />
<Admonition type="aarm" aarm="note">
The &ldquo;documents referenced&rdquo; means Unicode, Chapter 4 (specifically, section 4.2 &mdash; Case). See the Implementation Notes in <a href="/docs/arm/AA-2/AA-2.3">2.3</a> for a source for machine-readable definitions of these properties. <br />
</Admonition>
</AnnotatedOnly>

<MarginText>4/3_A.4.10</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0248-1", "AI05-0298-1"]} />
<p>The library function Strings.Fixed.Equal{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>5/3_A.4.10</MarginText>
<CodeBlock language="ada">
with Ada.Strings.Equal{"_"}Case{"_"}Insensitive;{"\n"}function Ada.Strings.Fixed.Equal{"_"}Case{"_"}Insensitive{"\n"}   (Left, Right : String) return Boolean{"\n"}      renames Ada.Strings.Equal{"_"}Case{"_"}Insensitive;{"\n"}

</CodeBlock>
<MarginText>6/3_A.4.10</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0248-1", "AI05-0298-1"]} />
<p>The generic library function Strings.Bounded.Equal{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>7/5_A.4.10</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
generic{"\n"}   with package Bounded is{"\n"}      new Ada.Strings.Bounded.Generic{"_"}Bounded{"_"}Length ({"<"}{">"});{"\n"}function Ada.Strings.Bounded.Equal{"_"}Case{"_"}Insensitive{"\n"}   (Left, Right : Bounded.Bounded{"_"}String) return Boolean{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized;{"\n"}

</CodeBlock>
<MarginText>8/3_A.4.10</MarginText>
<p class="Indented4">Equivalent to Strings.Equal{"_"}Case{"_"}Insensitive (Bounded.To{"_"}String (Left), Bounded.To{"_"}String (Right)); <br /></p>

<MarginText>9/3_A.4.10</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0248-1", "AI05-0298-1"]} />
<p>The library function Strings.Unbounded.Equal{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>10/5_A.4.10</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
function Ada.Strings.Unbounded.Equal{"_"}Case{"_"}Insensitive{"\n"}   (Left, Right : Unbounded{"_"}String) return Boolean{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized;{"\n"}

</CodeBlock>
<MarginText>11/3_A.4.10</MarginText>
<p class="Indented4">Equivalent to Strings.Equal{"_"}Case{"_"}Insensitive (To{"_"}String (Left), To{"_"}String (Right)); <br /></p>

<MarginText>12/3_A.4.10</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0298-1"]} />
<p>The library function Strings.Less{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>13/5_A.4.10</MarginText>
<MarginInfo items={["AI12-0414-1"]} />
<CodeBlock language="ada">
function Ada.Strings.Less{"_"}Case{"_"}Insensitive (Left, Right : String){"\n"}   return Boolean with Pure;{"\n"}

</CodeBlock>
<MarginText>14/3_A.4.10</MarginText>
<p class="Indented4">Performs a lexicographic comparison of strings Left and Right, converted to lower case. <br /></p>

<MarginText>15/3_A.4.10</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0248-1", "AI05-0298-1"]} />
<p>The library function Strings.Fixed.Less{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>16/3_A.4.10</MarginText>
<CodeBlock language="ada">
with Ada.Strings.Less{"_"}Case{"_"}Insensitive;{"\n"}function Ada.Strings.Fixed.Less{"_"}Case{"_"}Insensitive{"\n"}   (Left, Right : String) return Boolean{"\n"}      renames Ada.Strings.Less{"_"}Case{"_"}Insensitive;{"\n"}

</CodeBlock>
<MarginText>17/3_A.4.10</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0248-1", "AI05-0298-1"]} />
<p>The generic library function Strings.Bounded.Less{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>18/5_A.4.10</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
generic{"\n"}   with package Bounded is{"\n"}      new Ada.Strings.Bounded.Generic{"_"}Bounded{"_"}Length ({"<"}{">"});{"\n"}function Ada.Strings.Bounded.Less{"_"}Case{"_"}Insensitive{"\n"}  (Left, Right : Bounded.Bounded{"_"}String) return Boolean{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized;{"\n"}

</CodeBlock>
<MarginText>19/3_A.4.10</MarginText>
<p class="Indented4">Equivalent to Strings.Less{"_"}Case{"_"}Insensitive (Bounded.To{"_"}String (Left), Bounded.To{"_"}String (Right)); <br /></p>

<MarginText>20/3_A.4.10</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0248-1", "AI05-0298-1"]} />
<p>The library function Strings.Unbounded.Less{"_"}Case{"_"}Insensitive has the following declaration:<br /></p>

<MarginText>21/5_A.4.10</MarginText>
<MarginInfo items={["AI12-0241-1", "AI12-0302-1"]} />
<CodeBlock language="ada">
function Ada.Strings.Unbounded.Less{"_"}Case{"_"}Insensitive{"\n"}  (Left, Right : Unbounded{"_"}String) return Boolean{"\n"}   with Preelaborate, Nonblocking, Global ={">"} in out synchronized;{"\n"}

</CodeBlock>
<MarginText>22/3_A.4.10</MarginText>
<p class="Indented4">Equivalent to Strings.Less{"_"}Case{"_"}Insensitive (To{"_"}String (Left), To{"_"}String (Right)); <br /></p>

<AnnotatedOnly>

#### Extensions to Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>22.a/3_A.4.10</MarginText>
<MarginInfo items={["AI05-0001-1", "AI05-0286-1"]} />
<Admonition type="aarm" aarm="note">
The Strings.Equal{"_"}Case{"_"}Insensitive, Strings.Fixed.Equal{"_"}Case{"_"}Insensitive, Strings.Bounded.Equal{"_"}Case{"_"}Insensitive, Strings.Unbounded.Equal{"_"}Case{"_"}Insensitive, Strings.Less{"_"}Case{"_"}Insensitive, Strings.Fixed.Less{"_"}Case{"_"}Insensitive, Strings.Bounded.Less{"_"}Case{"_"}Insensitive, Strings.Unbounded.Less{"_"}Case{"_"}Insensitive functions are new. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.11"></a>

## A.4.11  String Encoding

<MarginText>1/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<p>Facilities for encoding, decoding, and converting strings in various character encoding schemes are provided by packages Strings.UTF{"_"}Encoding, Strings.UTF{"_"}Encoding.Conversions, Strings.UTF{"_"}Encoding.Strings, Strings.UTF{"_"}Encoding.Wide{"_"}Strings, and Strings.UTF{"_"}Encoding.Wide{"_"}Wide{"_"}Strings. <br /></p>


#### Static Semantics

<MarginText>2/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<p>The encoding library packages have the following declarations:<br /></p>

<MarginText>3/5_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI12-0414-1"]} />
<CodeBlock language="ada">
package Ada.Strings.UTF{"_"}Encoding{"\n"}  with Pure is{"\n"}
<MarginText>4/3_A.4.11</MarginText>
   -- Declarations common to the string encoding packages{"\n"}   type Encoding{"_"}Scheme is (UTF{"_"}8, UTF{"_"}16BE, UTF{"_"}16LE);{"\n"}
<MarginText>5/3_A.4.11</MarginText>
   subtype UTF{"_"}String is String;{"\n"}
<MarginText>6/3_A.4.11</MarginText>
   subtype UTF{"_"}8{"_"}String is String;{"\n"}
<MarginText>7/3_A.4.11</MarginText>
   subtype UTF{"_"}16{"_"}Wide{"_"}String is Wide{"_"}String;{"\n"}
<MarginText>8/3_A.4.11</MarginText>
   Encoding{"_"}Error : exception;{"\n"}
<MarginText>9/3_A.4.11</MarginText>
   BOM{"_"}8    : constant UTF{"_"}8{"_"}String :={"\n"}                Character'Val(16{"#"}EF{"#"}) &{"\n"}                Character'Val(16{"#"}BB{"#"}) &{"\n"}                Character'Val(16{"#"}BF{"#"});{"\n"}
<MarginText>10/3_A.4.11</MarginText>
   BOM{"_"}16BE : constant UTF{"_"}String :={"\n"}                Character'Val(16{"#"}FE{"#"}) &{"\n"}                Character'Val(16{"#"}FF{"#"});{"\n"}
<MarginText>11/3_A.4.11</MarginText>
   BOM{"_"}16LE : constant UTF{"_"}String :={"\n"}                Character'Val(16{"#"}FF{"#"}) &{"\n"}                Character'Val(16{"#"}FE{"#"});{"\n"}
<MarginText>12/3_A.4.11</MarginText>
   BOM{"_"}16   : constant UTF{"_"}16{"_"}Wide{"_"}String :={"\n"}               (1 ={">"} Wide{"_"}Character'Val(16{"#"}FEFF{"#"}));{"\n"}
<MarginText>13/3_A.4.11</MarginText>
   function Encoding (Item    : UTF{"_"}String;{"\n"}                      Default : Encoding{"_"}Scheme := UTF{"_"}8){"\n"}      return Encoding{"_"}Scheme;{"\n"}
<MarginText>14/3_A.4.11</MarginText>
end Ada.Strings.UTF{"_"}Encoding;{"\n"}
<MarginText>15/5_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI12-0414-1"]} />
package Ada.Strings.UTF{"_"}Encoding.Conversions{"\n"}   with Pure is{"\n"}
<MarginText>16/3_A.4.11</MarginText>
   -- Conversions between various encoding schemes{"\n"}   function Convert (Item          : UTF{"_"}String;{"\n"}                     Input{"_"}Scheme  : Encoding{"_"}Scheme;{"\n"}                     Output{"_"}Scheme : Encoding{"_"}Scheme;{"\n"}                     Output{"_"}BOM    : Boolean := False) return UTF{"_"}String;{"\n"}
<MarginText>17/3_A.4.11</MarginText>
   function Convert (Item          : UTF{"_"}String;{"\n"}                     Input{"_"}Scheme  : Encoding{"_"}Scheme;{"\n"}                     Output{"_"}BOM    : Boolean := False){"\n"}      return UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}
<MarginText>18/3_A.4.11</MarginText>
   function Convert (Item          : UTF{"_"}8{"_"}String;{"\n"}                     Output{"_"}BOM    : Boolean := False){"\n"}      return UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}
<MarginText>19/3_A.4.11</MarginText>
   function Convert (Item          : UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}                     Output{"_"}Scheme : Encoding{"_"}Scheme;{"\n"}                     Output{"_"}BOM    : Boolean := False) return UTF{"_"}String;{"\n"}
<MarginText>20/3_A.4.11</MarginText>
   function Convert (Item          : UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}                     Output{"_"}BOM    : Boolean := False) return UTF{"_"}8{"_"}String;{"\n"}
<MarginText>21/3_A.4.11</MarginText>
end Ada.Strings.UTF{"_"}Encoding.Conversions;{"\n"}
<MarginText>22/5_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI12-0414-1"]} />
package Ada.Strings.UTF{"_"}Encoding.Strings{"\n"}   with Pure is{"\n"}
<MarginText>23/3_A.4.11</MarginText>
   -- Encoding / decoding between String and various encoding schemes{"\n"}   function Encode (Item          : String;{"\n"}                    Output{"_"}Scheme : Encoding{"_"}Scheme;{"\n"}                    Output{"_"}BOM    : Boolean  := False) return UTF{"_"}String;{"\n"}
<MarginText>24/3_A.4.11</MarginText>
   function Encode (Item       : String;{"\n"}                    Output{"_"}BOM : Boolean  := False) return UTF{"_"}8{"_"}String;{"\n"}
<MarginText>25/3_A.4.11</MarginText>
   function Encode (Item       : String;{"\n"}                    Output{"_"}BOM : Boolean  := False){"\n"}      return UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}
<MarginText>26/3_A.4.11</MarginText>
   function Decode (Item         : UTF{"_"}String;{"\n"}                    Input{"_"}Scheme : Encoding{"_"}Scheme) return String;{"\n"}
<MarginText>27/3_A.4.11</MarginText>
   function Decode (Item : UTF{"_"}8{"_"}String) return String;{"\n"}
<MarginText>28/3_A.4.11</MarginText>
   function Decode (Item : UTF{"_"}16{"_"}Wide{"_"}String) return String;{"\n"}
<MarginText>29/3_A.4.11</MarginText>
end Ada.Strings.UTF{"_"}Encoding.Strings;{"\n"}
<MarginText>30/5_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI12-0414-1"]} />
package Ada.Strings.UTF{"_"}Encoding.Wide{"_"}Strings{"\n"}   with Pure is{"\n"}
<MarginText>31/3_A.4.11</MarginText>
   -- Encoding / decoding between Wide{"_"}String and various encoding schemes{"\n"}   function Encode (Item          : Wide{"_"}String;{"\n"}                    Output{"_"}Scheme : Encoding{"_"}Scheme;{"\n"}                    Output{"_"}BOM    : Boolean  := False) return UTF{"_"}String;{"\n"}
<MarginText>32/3_A.4.11</MarginText>
   function Encode (Item       : Wide{"_"}String;{"\n"}                    Output{"_"}BOM : Boolean  := False) return UTF{"_"}8{"_"}String;{"\n"}
<MarginText>33/3_A.4.11</MarginText>
   function Encode (Item       : Wide{"_"}String;{"\n"}                    Output{"_"}BOM : Boolean  := False){"\n"}      return UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}
<MarginText>34/3_A.4.11</MarginText>
   function Decode (Item         : UTF{"_"}String;{"\n"}                    Input{"_"}Scheme : Encoding{"_"}Scheme) return Wide{"_"}String;{"\n"}
<MarginText>35/3_A.4.11</MarginText>
   function Decode (Item : UTF{"_"}8{"_"}String) return Wide{"_"}String;{"\n"}
<MarginText>36/3_A.4.11</MarginText>
   function Decode (Item : UTF{"_"}16{"_"}Wide{"_"}String) return Wide{"_"}String;{"\n"}
<MarginText>37/3_A.4.11</MarginText>
end Ada.Strings.UTF{"_"}Encoding.Wide{"_"}Strings;{"\n"}
<MarginText>38/5_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI12-0414-1"]} />
package Ada.Strings.UTF{"_"}Encoding.Wide{"_"}Wide{"_"}Strings{"\n"}   with Pure is{"\n"}
<MarginText>39/3_A.4.11</MarginText>
   -- Encoding / decoding between Wide{"_"}Wide{"_"}String and various encoding schemes{"\n"}   function Encode (Item          : Wide{"_"}Wide{"_"}String;{"\n"}                    Output{"_"}Scheme : Encoding{"_"}Scheme;{"\n"}                    Output{"_"}BOM    : Boolean  := False) return UTF{"_"}String;{"\n"}
<MarginText>40/3_A.4.11</MarginText>
   function Encode (Item       : Wide{"_"}Wide{"_"}String;{"\n"}                    Output{"_"}BOM : Boolean  := False) return UTF{"_"}8{"_"}String;{"\n"}
<MarginText>41/3_A.4.11</MarginText>
   function Encode (Item       : Wide{"_"}Wide{"_"}String;{"\n"}                    Output{"_"}BOM : Boolean  := False){"\n"}      return UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}
<MarginText>42/3_A.4.11</MarginText>
   function Decode (Item         : UTF{"_"}String;{"\n"}                    Input{"_"}Scheme : Encoding{"_"}Scheme) return Wide{"_"}Wide{"_"}String;{"\n"}
<MarginText>43/3_A.4.11</MarginText>
   function Decode (Item : UTF{"_"}8{"_"}String) return Wide{"_"}Wide{"_"}String;{"\n"}
<MarginText>44/3_A.4.11</MarginText>
   function Decode (Item : UTF{"_"}16{"_"}Wide{"_"}String) return Wide{"_"}Wide{"_"}String;{"\n"}
<MarginText>45/3_A.4.11</MarginText>
end Ada.Strings.UTF{"_"}Encoding.Wide{"_"}Wide{"_"}Strings;{"\n"}

</CodeBlock>
<MarginText>46/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI05-0262-1"]} />
<p>The type Encoding{"_"}Scheme defines encoding schemes. UTF{"_"}8 corresponds to the UTF-8 encoding scheme defined by Annex D of ISO/IEC 10646. UTF{"_"}16BE corresponds to the UTF-16 encoding scheme defined by Annex C of ISO/IEC 10646 in 8 bit, big-endian order; and UTF{"_"}16LE corresponds to the UTF-16 encoding scheme in 8 bit, little-endian order.<br /></p>

<MarginText>47/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<p>The subtype UTF{"_"}String is used to represent a String of 8-bit values containing a sequence of values encoded in one of three ways (UTF-8, UTF-16BE, or UTF-16LE). The subtype UTF{"_"}8{"_"}String is used to represent a String of 8-bit values containing a sequence of values encoded in UTF-8. The subtype UTF{"_"}16{"_"}Wide{"_"}String is used to represent a Wide{"_"}String of 16-bit values containing a sequence of values encoded in UTF-16.<br /></p>

<MarginText>48/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI05-0262-1"]} />
<p>The BOM{"_"}8, BOM{"_"}16BE, BOM{"_"}16LE, and BOM{"_"}16 constants correspond to values used at the start of a string to indicate the encoding.<br /></p>

<MarginText>49/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0262-1", "AI05-0269-1"]} />
<p>Each of the Encode functions takes a String, Wide{"_"}String, or Wide{"_"}Wide{"_"}String Item parameter that is assumed to be an array of unencoded characters. Each of the Convert functions takes a UTF{"_"}String, UTF{"_"}8{"_"}String, or UTF{"_"}16{"_"}String Item parameter that is assumed to contain characters whose position values correspond to a valid encoding sequence according to the encoding scheme required by the function or specified by its Input{"_"}Scheme parameter.<br /></p>

<MarginText>50/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI05-0262-1", "AI05-0269-1"]} />
<p>Each of the Convert and Encode functions returns a UTF{"_"}String, UTF{"_"}8{"_"}String, or UTF{"_"}16{"_"}String value whose characters have position values that correspond to the encoding of the Item parameter according to the encoding scheme required by the function or specified by its Output{"_"}Scheme parameter. For UTF{"_"}8, no overlong encoding is returned. A BOM is included at the start of the returned string if the Output{"_"}BOM parameter is set to True. The lower bound of the returned string is 1.<br /></p>

<MarginText>51/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI05-0262-1"]} />
<p>Each of the Decode functions takes a UTF{"_"}String, UTF{"_"}8{"_"}String, or UTF{"_"}16{"_"}String Item parameter which is assumed to contain characters whose position values correspond to a valid encoding sequence according to the encoding scheme required by the function or specified by its Input{"_"}Scheme parameter, and returns the corresponding String, Wide{"_"}String, or Wide{"_"}Wide{"_"}String value. The lower bound of the returned string is 1.<br /></p>

<MarginText>52/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI05-0262-1"]} />
<p>For each of the Convert and Decode functions, an initial BOM in the input that matches the expected encoding scheme is ignored, and a different initial BOM causes Encoding{"_"}Error to be propagated.<br /></p>

<MarginText>53/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<p>The exception Encoding{"_"}Error is also propagated in the following situations: <br /></p>

<MarginText>54/4_A.4.11</MarginText>
<MarginInfo items={["AI12-0088-1"]} />
<ul>
<li>By a Convert or Decode function when a UTF encoded string contains an invalid encoding sequence.<br /></li>
</ul>
<AnnotatedOnly>
<MarginText>54.a/4_A.4.11</MarginText>
<MarginInfo items={["AI12-0088-1"]} />
<Admonition type="aarm" aarm="note">
<b>To be honest: </b>An overlong encoding is not invalid for the purposes of this check, and this does not depend on the character set version in use. Some recent character set standards declare overlong encodings to be invalid; it would be unnecessary and unfriendly to users for Convert or Decode to raise an exception for an overlong encoding. <br />
</Admonition>
</AnnotatedOnly>

<MarginText>55/4_A.4.11</MarginText>
<MarginInfo items={["AI12-0088-1"]} />
<ul>
<li>By a Convert or Decode function when the expected encoding is UTF-16BE or UTF-16LE and the input string has an odd length.<br /></li>
<MarginText>56/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0262-1"]} />
<li>By a Decode function yielding a String when the decoding of a sequence results in a code point whose value exceeds 16{"#"}FF{"#"}.<br /></li>
<MarginText>57/3_A.4.11</MarginText>
<li>By a Decode function yielding a Wide{"_"}String when the decoding of a sequence results in a code point whose value exceeds 16{"#"}FFFF{"#"}.<br /></li>
<MarginText>58/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0262-1"]} />
<li>By an Encode function taking a Wide{"_"}String as input when an invalid character appears in the input. In particular, the characters whose position is in the range 16{"#"}D800{"#"} .. 16{"#"}DFFF{"#"} are invalid because they conflict with UTF-16 surrogate encodings, and the characters whose position is 16{"#"}FFFE{"#"} or 16{"#"}FFFF{"#"} are also invalid because they conflict with BOM codes. <br /></li>
</ul>
<MarginText>59/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Encoding (Item    : UTF{"_"}String;{"\n"}                   Default : Encoding{"_"}Scheme := UTF{"_"}8){"\n"}   return Encoding{"_"}Scheme;{"\n"}

</CodeBlock>
<MarginText>60/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2", "AI05-0269-1"]} />
<p class="Indented4">Inspects a UTF{"_"}String value to determine whether it starts with a BOM for UTF-8, UTF-16BE, or UTF{"_"}16LE. If so, returns the scheme corresponding to the BOM; otherwise, returns the value of Default.<br /></p>

<MarginText>61/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Convert (Item          : UTF{"_"}String;{"\n"}                  Input{"_"}Scheme  : Encoding{"_"}Scheme;{"\n"}                  Output{"_"}Scheme : Encoding{"_"}Scheme;{"\n"}                  Output{"_"}BOM    : Boolean := False) return UTF{"_"}String;{"\n"}

</CodeBlock>
<MarginText>62/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item (originally encoded in UTF-8, UTF-16LE, or UTF-16BE as specified by Input{"_"}Scheme) encoded in one of these three schemes as specified by Output{"_"}Scheme.<br /></p>

<MarginText>63/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Convert (Item          : UTF{"_"}String;{"\n"}                  Input{"_"}Scheme  : Encoding{"_"}Scheme;{"\n"}                  Output{"_"}BOM    : Boolean := False){"\n"}   return UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>64/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item (originally encoded in UTF-8, UTF-16LE, or UTF-16BE as specified by Input{"_"}Scheme) encoded in UTF-16.<br /></p>

<MarginText>65/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Convert (Item          : UTF{"_"}8{"_"}String;{"\n"}                  Output{"_"}BOM    : Boolean := False){"\n"}   return UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>66/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item (originally encoded in UTF-8) encoded in UTF-16.<br /></p>

<MarginText>67/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Convert (Item          : UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}                  Output{"_"}Scheme : Encoding{"_"}Scheme;{"\n"}                  Output{"_"}BOM    : Boolean := False) return UTF{"_"}String;{"\n"}

</CodeBlock>
<MarginText>68/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item (originally encoded in UTF-16) encoded in UTF-8, UTF-16LE, or UTF-16BE as specified by Output{"_"}Scheme.<br /></p>

<MarginText>69/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Convert (Item          : UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}                  Output{"_"}BOM    : Boolean := False) return UTF{"_"}8{"_"}String;{"\n"}

</CodeBlock>
<MarginText>70/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item (originally encoded in UTF-16) encoded in UTF-8.<br /></p>

<MarginText>71/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Encode (Item          : String;{"\n"}                 Output{"_"}Scheme : Encoding{"_"}Scheme;{"\n"}                 Output{"_"}BOM    : Boolean  := False) return UTF{"_"}String;{"\n"}

</CodeBlock>
<MarginText>72/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0262-1"]} />
<p class="Indented4">Returns the value of Item encoded in UTF-8, UTF-16LE, or UTF-16BE as specified by Output{"_"}Scheme.<br /></p>

<MarginText>73/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Encode (Item       : String;{"\n"}                 Output{"_"}BOM : Boolean  := False) return UTF{"_"}8{"_"}String;{"\n"}

</CodeBlock>
<MarginText>74/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item encoded in UTF-8.<br /></p>

<MarginText>75/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Encode (Item       : String;{"\n"}                 Output{"_"}BOM : Boolean  := False) return UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>76/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item encoded in UTF{"_"}16.<br /></p>

<MarginText>77/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Decode (Item         : UTF{"_"}String;{"\n"}                 Input{"_"}Scheme : Encoding{"_"}Scheme) return String;{"\n"}

</CodeBlock>
<MarginText>78/3_A.4.11</MarginText>
<p class="Indented4">Returns the result of decoding Item, which is encoded in UTF-8, UTF-16LE, or UTF-16BE as specified by Input{"_"}Scheme.<br /></p>

<MarginText>79/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Decode (Item : UTF{"_"}8{"_"}String) return String;{"\n"}

</CodeBlock>
<MarginText>80/3_A.4.11</MarginText>
<p class="Indented4">Returns the result of decoding Item, which is encoded in UTF-8.<br /></p>

<MarginText>81/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Decode (Item : UTF{"_"}16{"_"}Wide{"_"}String) return String;{"\n"}

</CodeBlock>
<MarginText>82/3_A.4.11</MarginText>
<p class="Indented4">Returns the result of decoding Item, which is encoded in UTF-16.<br /></p>

<MarginText>83/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Encode (Item          : Wide{"_"}String;{"\n"}                 Output{"_"}Scheme : Encoding{"_"}Scheme;{"\n"}                 Output{"_"}BOM    : Boolean  := False) return UTF{"_"}String;{"\n"}

</CodeBlock>
<MarginText>84/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0262-1"]} />
<p class="Indented4">Returns the value of Item encoded in UTF-8, UTF-16LE, or UTF-16BE as specified by Output{"_"}Scheme.<br /></p>

<MarginText>85/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Encode (Item       : Wide{"_"}String;{"\n"}                 Output{"_"}BOM : Boolean  := False) return UTF{"_"}8{"_"}String;{"\n"}

</CodeBlock>
<MarginText>86/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item encoded in UTF-8.<br /></p>

<MarginText>87/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Encode (Item       : Wide{"_"}String;{"\n"}                 Output{"_"}BOM : Boolean  := False) return UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>88/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item encoded in UTF{"_"}16.<br /></p>

<MarginText>89/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Decode (Item         : UTF{"_"}String;{"\n"}                 Input{"_"}Scheme : Encoding{"_"}Scheme) return Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>90/3_A.4.11</MarginText>
<p class="Indented4">Returns the result of decoding Item, which is encoded in UTF-8, UTF-16LE, or UTF-16BE as specified by Input{"_"}Scheme.<br /></p>

<MarginText>91/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Decode (Item : UTF{"_"}8{"_"}String) return Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>92/3_A.4.11</MarginText>
<p class="Indented4">Returns the result of decoding Item, which is encoded in UTF-8.<br /></p>

<MarginText>93/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Decode (Item : UTF{"_"}16{"_"}Wide{"_"}String) return Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>94/3_A.4.11</MarginText>
<p class="Indented4">Returns the result of decoding Item, which is encoded in UTF-16.<br /></p>

<MarginText>95/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Encode (Item          : Wide{"_"}Wide{"_"}String;{"\n"}                 Output{"_"}Scheme : Encoding{"_"}Scheme;{"\n"}                 Output{"_"}BOM    : Boolean  := False) return UTF{"_"}String;{"\n"}

</CodeBlock>
<MarginText>96/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0262-1"]} />
<p class="Indented4">Returns the value of Item encoded in UTF-8, UTF-16LE, or UTF-16BE as specified by Output{"_"}Scheme.<br /></p>

<MarginText>97/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Encode (Item       : Wide{"_"}Wide{"_"}String;{"\n"}                 Output{"_"}BOM : Boolean  := False) return UTF{"_"}8{"_"}String;{"\n"}

</CodeBlock>
<MarginText>98/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item encoded in UTF-8.<br /></p>

<MarginText>99/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Encode (Item       : Wide{"_"}Wide{"_"}String;{"\n"}                 Output{"_"}BOM : Boolean  := False) return UTF{"_"}16{"_"}Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>100/3_A.4.11</MarginText>
<p class="Indented4">Returns the value of Item encoded in UTF{"_"}16.<br /></p>

<MarginText>101/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Decode (Item         : UTF{"_"}String;{"\n"}                 Input{"_"}Scheme : Encoding{"_"}Scheme) return Wide{"_"}Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>102/3_A.4.11</MarginText>
<p class="Indented4">Returns the result of decoding Item, which is encoded in UTF-8, UTF-16LE, or UTF-16BE as specified by Input{"_"}Scheme.<br /></p>

<MarginText>103/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Decode (Item : UTF{"_"}8{"_"}String) return Wide{"_"}Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>104/3_A.4.11</MarginText>
<p class="Indented4">Returns the result of decoding Item, which is encoded in UTF-8.<br /></p>

<MarginText>105/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<CodeBlock language="ada">
function Decode (Item : UTF{"_"}16{"_"}Wide{"_"}String) return Wide{"_"}Wide{"_"}String;{"\n"}

</CodeBlock>
<MarginText>106/3_A.4.11</MarginText>
<p class="Indented4">Returns the result of decoding Item, which is encoded in UTF-16.<br /></p>


#### Implementation Advice

<MarginText>107/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<p>If an implementation supports other encoding schemes, another similar child of Ada.Strings should be defined. <br /></p>

<AnnotatedOnly>
<MarginText>107.a.1/3_A.4.11</MarginText>
<Admonition type="aarm" aarm="implementation-advice">
<b></b>If an implementation supports other string encoding schemes, a child of Ada.Strings similar to UTF{"_"}Encoding should be defined.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>108/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<Admonition type="aarm" aarm="note">
NOTE   A BOM (Byte-Order Mark, code position 16{"#"}FEFF{"#"}) can be included in a file or other entity to indicate the encoding; it is skipped when decoding. Typically, only the first line of a file or other entity contains a BOM. When decoding, the Encoding function can be called on the first line to determine the encoding; this encoding will then be used in subsequent calls to Decode to convert all of the lines to an internal format. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>108.a/3_A.4.11</MarginText>
<MarginInfo items={["AI05-0137-2"]} />
<Admonition type="aarm" aarm="note">
The packages Strings.UTF{"_"}Encoding, Strings.UTF{"_"}Encoding.Conversions, Strings.UTF{"_"}Encoding.Strings, Strings.UTF{"_"}Encoding.Wide{"_"}Strings, and Strings.UTF{"_"}Encoding.Wide{"_"}Wide{"_"}Strings are new. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 2012

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>108.b/4_A.4.11</MarginText>
<MarginInfo items={["AI12-0088-1"]} />
<Admonition type="aarm" aarm="note">
<b>Corrigendum:</b> Fixed the omission that Convert routines make the same checks on input as Decode routines. <br />
</Admonition>
</AnnotatedOnly>

<a id="Subclause_A.4.12"></a>

## A.4.12  Universal Text Buffers

<MarginText>1/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1", "AI12-0439-1"]} />
<p>A universal text buffer can be used to save and retrieve text of any language-defined string type. The types used to save and retrieve the text can be different. <br /></p>


#### Static Semantics

<MarginText>2/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1"]} />
<p>The text buffer library packages have the following declarations:<br /></p>

<MarginText>3/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1", "AI12-0384-2"]} />
<CodeBlock language="ada">
with Ada.Strings.UTF{"_"}Encoding.Wide{"_"}Wide{"_"}Strings;{"\n"}package Ada.Strings.Text{"_"}Buffers{"\n"}   with Pure is{"\n"}
<MarginText>4/5_A.4.12</MarginText>
   type Text{"_"}Buffer{"_"}Count is range 0 .. implementation-defined;{"\n"}
<MarginText>5/5_A.4.12</MarginText>
   New{"_"}Line{"_"}Count : constant Text{"_"}Buffer{"_"}Count := implementation-defined;{"\n"}
<MarginText>6/5_A.4.12</MarginText>
   type Root{"_"}Buffer{"_"}Type is abstract tagged private{"\n"}      with Default{"_"}Initial{"_"}Condition ={">"}{"\n"}             Current{"_"}Indent (Root{"_"}Buffer{"_"}Type) = 0;{"\n"}
<MarginText>7/5_A.4.12</MarginText>
   procedure Put ({"\n"}      Buffer : in out Root{"_"}Buffer{"_"}Type;{"\n"}      Item   : in     String) is abstract;{"\n"}
<MarginText>8/5_A.4.12</MarginText>
   procedure Wide{"_"}Put ({"\n"}      Buffer : in out Root{"_"}Buffer{"_"}Type;{"\n"}      Item   : in     Wide{"_"}String) is abstract;{"\n"}
<MarginText>9/5_A.4.12</MarginText>
   procedure Wide{"_"}Wide{"_"}Put ({"\n"}      Buffer : in out Root{"_"}Buffer{"_"}Type;{"\n"}      Item   : in     Wide{"_"}Wide{"_"}String) is abstract;{"\n"}
<MarginText>10/5_A.4.12</MarginText>
   procedure Put{"_"}UTF{"_"}8 ({"\n"}      Buffer : in out Root{"_"}Buffer{"_"}Type;{"\n"}      Item   : in     UTF{"_"}Encoding.UTF{"_"}8{"_"}String) is abstract;{"\n"}
<MarginText>11/5_A.4.12</MarginText>
   procedure Wide{"_"}Put{"_"}UTF{"_"}16 ({"\n"}      Buffer : in out Root{"_"}Buffer{"_"}Type;{"\n"}      Item   : in     UTF{"_"}Encoding.UTF{"_"}16{"_"}Wide{"_"}String) is abstract;{"\n"}
<MarginText>12/5_A.4.12</MarginText>
   procedure New{"_"}Line (Buffer : in out Root{"_"}Buffer{"_"}Type) is abstract;{"\n"}
<MarginText>13/5_A.4.12</MarginText>
   Standard{"_"}Indent : constant Text{"_"}Buffer{"_"}Count := 3;{"\n"}
<MarginText>14/5_A.4.12</MarginText>
   function Current{"_"}Indent ({"\n"}      Buffer : Root{"_"}Buffer{"_"}Type) return Text{"_"}Buffer{"_"}Count;{"\n"}
<MarginText>15/5_A.4.12</MarginText>
   procedure Increase{"_"}Indent ({"\n"}      Buffer : in out Root{"_"}Buffer{"_"}Type;{"\n"}      Amount : in     Text{"_"}Buffer{"_"}Count := Standard{"_"}Indent){"\n"}      with Post'Class ={">"}{"\n"}         Current{"_"}Indent (Buffer) = Current{"_"}Indent (Buffer)'Old + Amount;{"\n"}
<MarginText>16/5_A.4.12</MarginText>
   procedure Decrease{"_"}Indent ({"\n"}      Buffer : in out Root{"_"}Buffer{"_"}Type;{"\n"}      Amount : in     Text{"_"}Buffer{"_"}Count := Standard{"_"}Indent){"\n"}      with Pre'Class ={">"}{"\n"}              Current{"_"}Indent (Buffer) {">"}= Amount{"\n"}                 or else raise Constraint{"_"}Error,{"\n"}           Post'Class ={">"}{"\n"}              Current{"_"}Indent (Buffer) ={"\n"}                 Current{"_"}Indent (Buffer)'Old - Amount;{"\n"}
<MarginText>17/5_A.4.12</MarginText>
private{"\n"}   ... -- not specified by the language{"\n"}end Ada.Strings.Text{"_"}Buffers;{"\n"}
<MarginText>18/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1", "AI12-0384-2"]} />
package Ada.Strings.Text{"_"}Buffers.Unbounded{"\n"}   with Preelaborate, Nonblocking, Global ={">"} null is{"\n"}
<MarginText>19/5_A.4.12</MarginText>
   type Buffer{"_"}Type is new Root{"_"}Buffer{"_"}Type with private;{"\n"}
<MarginText>20/5_A.4.12</MarginText>
   function Get ({"\n"}      Buffer : in out Buffer{"_"}Type){"\n"}      return String{"\n"}      with Post'Class ={">"}{"\n"}         Get'Result'First = 1 and then Current{"_"}Indent (Buffer) = 0;{"\n"}
<MarginText>21/5_A.4.12</MarginText>
   function Wide{"_"}Get ({"\n"}      Buffer : in out Buffer{"_"}Type){"\n"}      return Wide{"_"}String{"\n"}      with Post'Class ={">"}{"\n"}         Wide{"_"}Get'Result'First = 1 and then Current{"_"}Indent (Buffer) = 0;{"\n"}
<MarginText>22/5_A.4.12</MarginText>
   function Wide{"_"}Wide{"_"}Get ({"\n"}      Buffer : in out Buffer{"_"}Type){"\n"}      return Wide{"_"}Wide{"_"}String{"\n"}      with Post'Class ={">"}{"\n"}         Wide{"_"}Wide{"_"}Get'Result'First = 1{"\n"}            and then Current{"_"}Indent (Buffer) = 0;{"\n"}
<MarginText>23/5_A.4.12</MarginText>
   function Get{"_"}UTF{"_"}8 ({"\n"}      Buffer : in out Buffer{"_"}Type){"\n"}      return UTF{"_"}Encoding.UTF{"_"}8{"_"}String{"\n"}      with Post'Class ={">"}{"\n"}         Get{"_"}UTF{"_"}8'Result'First = 1 and then Current{"_"}Indent (Buffer) = 0;{"\n"}
<MarginText>24/5_A.4.12</MarginText>
   function Wide{"_"}Get{"_"}UTF{"_"}16 ({"\n"}      Buffer : in out Buffer{"_"}Type){"\n"}      return UTF{"_"}Encoding.UTF{"_"}16{"_"}Wide{"_"}String{"\n"}      with Post'Class ={">"}{"\n"}         Wide{"_"}Get{"_"}UTF{"_"}16'Result'First = 1{"\n"}            and then Current{"_"}Indent (Buffer) = 0;{"\n"}
<MarginText>25/5_A.4.12</MarginText>
private{"\n"}   ... -- not specified by the language, but will include nonabstract{"\n"}       -- overridings of all inherited subprograms that require overriding.{"\n"}end Ada.Strings.Text{"_"}Buffers.Unbounded;{"\n"}
<MarginText>26/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1", "AI12-0384-2"]} />
package Ada.Strings.Text{"_"}Buffers.Bounded{"\n"}   with Pure, Nonblocking, Global ={">"} null is{"\n"}
<MarginText>27/5_A.4.12</MarginText>
   type Buffer{"_"}Type (Max{"_"}Characters : Text{"_"}Buffer{"_"}Count){"\n"}      is new Root{"_"}Buffer{"_"}Type with private{"\n"}      with Default{"_"}Initial{"_"}Condition ={">"} not Text{"_"}Truncated (Buffer{"_"}Type);{"\n"}
<MarginText>28/5_A.4.12</MarginText>
   function Text{"_"}Truncated (Buffer : in Buffer{"_"}Type) return Boolean;{"\n"}
<MarginText>29/5_A.4.12</MarginText>
   -- Get, Wide{"_"}Get, Wide{"_"}Wide{"_"}Get, Get{"_"}UTF{"_"}8, and Wide{"_"}Get{"_"}UTF{"_"}16{"\n"}   -- are declared here just as in the Unbounded child.{"\n"}
<MarginText>30/5_A.4.12</MarginText>
private{"\n"}   ... -- not specified by the language, but will include nonabstract{"\n"}       -- overridings of all inherited subprograms that require overriding.{"\n"}end Ada.Strings.Text{"_"}Buffers.Bounded;{"\n"}

</CodeBlock>
<MarginText>31/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1"]} />
<p>Character{"_"}Count returns the number of characters currently stored in a text buffer.<br /></p>

<AnnotatedOnly>
<MarginText>31.a/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1"]} />
<Admonition type="aarm" aarm="ramification">
<b></b>This is lower-case "characters". The representation isn't considered, so it is irrelevant what type of character (Character, Wide{"_"}Character, or Wide{"_"}Wide{"_"}Character) was stored. <br />
</Admonition>
</AnnotatedOnly>

<MarginText>32/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1", "AI12-0384-2"]} />
<p>New{"_"}Line stores New{"_"}Line{"_"}Count characters that represent a new line into a text buffer. Current{"_"}Indent returns the current indentation associated with the buffer, with zero meaning there is no indentation in effect; Increase{"_"}Indent and Decrease{"_"}Indent increase or decrease the indentation associated with the buffer.<br /></p>

<MarginText>33/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1", "AI12-0384-2"]} />
<p>A call to Put, Wide{"_"}Put, Wide{"_"}Wide{"_"}Put, Put{"_"}UTF{"_"}8, or Wide{"_"}Put{"_"}UTF{"_"}16 stores a sequence of characters into the text buffer, preceded by Current{"_"}Indent(Buffer) spaces (Wide{"_"}Wide{"_"}Characters with position 32) if there is at least one character in Item and it would have been the first character on the current line.<br /></p>

<MarginText>34/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1", "AI12-0384-2"]} />
<p>A call to function Get, Wide{"_"}Get, Wide{"_"}Wide{"_"}Get, Get{"_"}UTF{"_"}8, or Wide{"_"}Get{"_"}UTF{"_"}16 returns the same sequence of characters as was present in the calls that stored the characters into the buffer, if representable. For a call to Get, if any character in the sequence is not defined in Character, the result is implementation defined. Similarly, for a call to Wide{"_"}Get, if any character in the sequence is not defined in Wide{"_"}Character, the result is implementation defined. As part of a call on any of the Get functions, the buffer is reset to an empty state, with no stored characters.<br /></p>

<AnnotatedOnly>
<MarginText>34.a/5_A.4.12</MarginText>
<Admonition type="aarm" aarm="implementation-defined">
<b></b>The value returned by a call to a Text{"_"}Buffer Get procedure if any character in the returned sequence is not defined in Character.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>34.b/5_A.4.12</MarginText>
<Admonition type="aarm" aarm="implementation-defined">
<b></b>The value returned by a call to a Text{"_"}Buffer Wide{"_"}Get procedure if any character in the returned sequence is not defined in Wide{"_"}Character.<br />
</Admonition>
</AnnotatedOnly>

<MarginText>35/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0384-2"]} />
<p>In the case of a Buf of type Text{"_"}Buffers.Bounded.Buffer{"_"}Type, Text{"_"}Truncated (Buf) returns True if the various Put procedures together have attempted to store more than Buf.Max{"_"}Characters into Buf. If this function returns True, then the various Get functions return a representation of only the first Buf.Max{"_"}Characters characters that were stored in Buf.<br /></p>


#### Implementation Advice

<MarginText>36/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1"]} />
<p>Bounded buffer objects should be implemented without dynamic allocation.<br /></p>

<AnnotatedOnly>
<MarginText>36.a.1/5_A.4.12</MarginText>
<Admonition type="aarm" aarm="implementation-advice">
<b></b>Bounded buffer objects should be implemented without dynamic allocation.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 2012

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>36.a/5_A.4.12</MarginText>
<MarginInfo items={["AI12-0340-1", "AI12-0384-2"]} />
<Admonition type="aarm" aarm="note">
The packages Strings.Text{"_"}Buffers, Strings.Text{"_"}Buffers.Unbounded, and Strings.Text{"_"}Buffers.Bounded are new. <br />
</Admonition>
</AnnotatedOnly>

