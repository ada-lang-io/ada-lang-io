---
sidebar_position:  167
---

# D.13 The Ravenscar and Jorvik Profiles

:::danger
This Reference Manual output has not been verified,
and may contain omissions or errors.
Report any problems on the [tracking issue](https://github.com/ada-lang-io/ada-lang-io/issues/20)
:::

import Admonition from "@theme/Admonition";
import AnnotatedOnly from "@site/src/components/AnnotatedOnly";
import CodeBlock from "@theme/CodeBlock";
import MarginText from "@site/src/components/MarginText";
import MarginInfo from "@site/src/components/MarginInfo";

<MarginText>1/5</MarginText>
<MarginInfo items={["AI95-00249-01", "AI05-0246-1", "AI05-0299-1", "AI12-0291-1"]} />
<p>[This subclause defines the Ravenscar and Jorvik profiles.] <br /></p>

<p><em>Paragraphs 2 and 3 were moved to <a href="/docs/arm/AA-13/AA-13.12">13.12</a>, &ldquo;<a href="/docs/arm/AA-13/AA-13.12">Pragma Restrictions and Pragma Profile</a>&rdquo;.</em> <br /></p>


#### Legality Rules

<MarginText>4/3</MarginText>
<MarginInfo items={["AI95-00249-01", "AI05-0246-1", "AI12-0291-1"]} />
<p>The <em>profile{"_"}</em><code><a href="/docs/arm/AA-2/AA-2.3#S0002">identifier</a></code> Ravenscar and <em>profile{"_"}</em><code><a href="/docs/arm/AA-2/AA-2.3#S0002">identifier</a></code> Jorvik are usage profiles (see <a href="/docs/arm/AA-13/AA-13.12">13.12</a>). For usage profiles Ravenscar and Jorvik, there shall be no <em>profile{"_"}</em><code><a href="/docs/arm/AA-2/AA-2.8#S0020">pragma{"_"}argument{"_"}association</a></code>s. <br /></p>


#### Static Semantics

<MarginText>5/3</MarginText>
<MarginInfo items={["AI95-00249-01", "AI05-0246-1"]} />
<p>The usage profile Ravenscar is equivalent to the following set of pragmas:<br /></p>

<MarginText>6/4</MarginText>
<MarginInfo items={["AI95-00249-01", "AI95-00297-01", "AI95-00394-01", "AI05-0171-1", "AI05-0246-1", "AI12-0055-1", "AI12-0073-1"]} />
<CodeBlock language="ada">
pragma Task{"_"}Dispatching{"_"}Policy (FIFO{"_"}Within{"_"}Priorities);{"\n"}pragma Locking{"_"}Policy (Ceiling{"_"}Locking);{"\n"}pragma Detect{"_"}Blocking;{"\n"}pragma Restrictions ({"\n"}              No{"_"}Abort{"_"}Statements,{"\n"}              No{"_"}Dynamic{"_"}Attachment,{"\n"}              No{"_"}Dynamic{"_"}CPU{"_"}Assignment,{"\n"}              No{"_"}Dynamic{"_"}Priorities,{"\n"}              No{"_"}Implicit{"_"}Heap{"_"}Allocations,{"\n"}              No{"_"}Local{"_"}Protected{"_"}Objects,{"\n"}              No{"_"}Local{"_"}Timing{"_"}Events,{"\n"}              No{"_"}Protected{"_"}Type{"_"}Allocators,{"\n"}              No{"_"}Relative{"_"}Delay,{"\n"}              No{"_"}Requeue{"_"}Statements,{"\n"}              No{"_"}Select{"_"}Statements,{"\n"}              No{"_"}Specific{"_"}Termination{"_"}Handlers,{"\n"}              No{"_"}Task{"_"}Allocators,{"\n"}              No{"_"}Task{"_"}Hierarchy,{"\n"}              No{"_"}Task{"_"}Termination,{"\n"}              Simple{"_"}Barriers,{"\n"}              Max{"_"}Entry{"_"}Queue{"_"}Length ={">"} 1,{"\n"}              Max{"_"}Protected{"_"}Entries ={">"} 1,{"\n"}              Max{"_"}Task{"_"}Entries ={">"} 0,{"\n"}              No{"_"}Dependence ={">"} Ada.Asynchronous{"_"}Task{"_"}Control,{"\n"}              No{"_"}Dependence ={">"} Ada.Calendar,{"\n"}              No{"_"}Dependence ={">"} Ada.Execution{"_"}Time.Group{"_"}Budgets,{"\n"}              No{"_"}Dependence ={">"} Ada.Execution{"_"}Time.Timers,{"\n"}              No{"_"}Dependence ={">"} Ada.Synchronous{"_"}Barriers,{"\n"}              No{"_"}Dependence ={">"} Ada.Task{"_"}Attributes,{"\n"}              No{"_"}Dependence ={">"} System.Multiprocessors.Dispatching{"_"}Domains);{"\n"}

</CodeBlock>
<AnnotatedOnly>
<MarginText>6.a/3</MarginText>
<Admonition type="aarm" aarm="discussion">
<strong></strong>The Ravenscar profile is named for the location of the meeting that defined its initial version. The name is now in widespread use, so we stick with existing practice, rather than using a more descriptive name.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>6.b/5</MarginText>
<Admonition type="aarm" aarm="note">
The Jorvik profile is named for the city of York, UK, near where the Ravenscar profile was created. "Jorvik" (pronounced "Yorvick") was the Viking name for York. <br />
</Admonition>
</AnnotatedOnly>

<MarginText>6.1/5</MarginText>
<MarginInfo items={["AI12-0291-1"]} />
<p>The usage profile Jorvik is equivalent to the following set of pragmas:<br /></p>

<MarginText>6.2/5</MarginText>
<MarginInfo items={["AI12-0291-1"]} />
<CodeBlock language="ada">
pragma Task{"_"}Dispatching{"_"}Policy (FIFO{"_"}Within{"_"}Priorities);{"\n"}pragma Locking{"_"}Policy (Ceiling{"_"}Locking);{"\n"}pragma Detect{"_"}Blocking;{"\n"}pragma Restrictions ({"\n"}              No{"_"}Abort{"_"}Statements,{"\n"}              No{"_"}Dynamic{"_"}Attachment,{"\n"}              No{"_"}Dynamic{"_"}CPU{"_"}Assignment,{"\n"}              No{"_"}Dynamic{"_"}Priorities,{"\n"}              No{"_"}Local{"_"}Protected{"_"}Objects,{"\n"}              No{"_"}Local{"_"}Timing{"_"}Events,{"\n"}              No{"_"}Protected{"_"}Type{"_"}Allocators,{"\n"}              No{"_"}Requeue{"_"}Statements,{"\n"}              No{"_"}Select{"_"}Statements,{"\n"}              No{"_"}Specific{"_"}Termination{"_"}Handlers,{"\n"}              No{"_"}Task{"_"}Allocators,{"\n"}              No{"_"}Task{"_"}Hierarchy,{"\n"}              No{"_"}Task{"_"}Termination,{"\n"}              Pure{"_"}Barriers,{"\n"}              Max{"_"}Task{"_"}Entries ={">"} 0,{"\n"}              No{"_"}Dependence ={">"} Ada.Asynchronous{"_"}Task{"_"}Control,{"\n"}              No{"_"}Dependence ={">"} Ada.Execution{"_"}Time.Group{"_"}Budgets,{"\n"}              No{"_"}Dependence ={">"} Ada.Execution{"_"}Time.Timers,{"\n"}              No{"_"}Dependence ={">"} Ada.Task{"_"}Attributes,{"\n"}              No{"_"}Dependence ={">"} System.Multiprocessors.Dispatching{"_"}Domains);{"\n"}

</CodeBlock>
<AnnotatedOnly>
<MarginText>6.c/5</MarginText>
<Admonition type="aarm" aarm="discussion">
<strong></strong>The Jorvik profile removes a number of restrictions from the Ravenscar profile to allow additional applications to benefit from predictability and low overhead. Specifically, the following restrictions are removed: <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>6.d/5</MarginText>
<Admonition type="aarm" aarm="note">
    No{"_"}Implicit{"_"}Heap{"_"}Allocations<br />    No{"_"}Relative{"_"}Delay<br />    Max{"_"}Entry{"_"}Queue{"_"}Length ={">"} 1<br />    Max{"_"}Protected{"_"}Entries ={">"} 1<br />    No{"_"}Dependence ={">"} Ada.Calendar<br />    No{"_"}Dependence ={">"} Ada.Synchronous{"_"}Barriers<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>6.e/5</MarginText>
<Admonition type="aarm" aarm="note">
Jorvik also replaces restriction Simple{"_"}Barriers with Pure{"_"}Barriers (a weaker requirement than Simple{"_"}Barriers). <br />
</Admonition>
</AnnotatedOnly>

<p><em>Paragraph 7 and 8 were deleted.</em> <br /></p>


#### Implementation Advice

<MarginText>9/5</MarginText>
<MarginInfo items={["AI05-0171-1", "AI12-0291-1"]} />
<p>On a multiprocessor system, an implementation should support a fully partitioned approach if one of these profiles is specified. Each processor should have separate and disjoint ready queues.<br /></p>

<AnnotatedOnly>
<MarginText>9.a.1/3</MarginText>
<Admonition type="aarm" aarm="implementation-advice">
<strong></strong>On a multiprocessor system, each processor should have a separate and disjoint ready queue.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>10/5</MarginText>
<MarginInfo items={["AI95-00249-01", "AI05-0246-1", "AI12-0291-1"]} />
<Admonition type="aarm" aarm="note">
NOTE 1   For the Ravenscar profile, the effect of the restriction Max{"_"}Entry{"_"}Queue{"_"}Length ={">"} 1 applies only to protected entry queues due to the accompanying restriction Max{"_"}Task{"_"}Entries ={">"} 0. The restriction Max{"_"}Entry{"_"}Queue{"_"}Length is not applied by the Jorvik profile.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>11/5</MarginText>
<MarginInfo items={["AI12-0055-1", "AI12-0291-1"]} />
<Admonition type="aarm" aarm="note">
NOTE 2   When the Ravenscar or Jorvik profile is in effect (via the effect of the No{"_"}Dynamic{"_"}CPU{"_"}Assignment restriction), all of the tasks in the partition will execute on a single CPU unless the programmer explicitly uses aspect CPU to specify the CPU assignments for tasks. The use of multiple CPUs requires care, as many guarantees of single CPU scheduling no longer apply.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>12/5</MarginText>
<MarginInfo items={["AI12-0055-1", "AI12-0291-1"]} />
<Admonition type="aarm" aarm="note">
NOTE 3   It is not recommended to specify the CPU of a task to be Not{"_"}A{"_"}Specific{"_"}CPU when the Ravenscar or Jorvik profile is in effect. How a partition executes strongly depends on the assignment of tasks to CPUs. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>13/5</MarginText>
<MarginInfo items={["AI12-0291-1"]} />
<Admonition type="aarm" aarm="note">
NOTE 4   Any unit that meets the requirements of the Ravenscar profile also meets the requirements of the Jorvik profile. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 95

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>13.a/3</MarginText>
<MarginInfo items={["AI95-00249-01", "AI05-0246-1"]} />
<Admonition type="aarm" aarm="note">
The Ravenscar profile is new; it was moved here by Ada 2012. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 2005

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>13.b/3</MarginText>
<MarginInfo items={["AI05-0171-1"]} />
<Admonition type="aarm" aarm="note">
How Ravenscar behaves on a multiprocessor system is now defined. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Incompatibilities With Ada 2012

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>13.c/4</MarginText>
<MarginInfo items={["AI05-0073-1"]} />
<Admonition type="aarm" aarm="note">
<strong>Corrigendum:</strong> The Ravenscar profile no longer allows the use of package Synchronous{"_"}Barriers, as this package violates the fundamental Ravenscar requirement that each waiting point can only block (and release) a single task. This is incompatible with the published Ada 2012 standard, but it is unlikely that any existing Ravenscar runtime ever usefully supported barriers.<br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>13.d/4</MarginText>
<MarginInfo items={["AI05-0055-1"]} />
<Admonition type="aarm" aarm="note">
<strong>Corrigendum:</strong>The Ravenscar profile (via the effect of the new restriction No{"_"}Dynamic{"_"}CPU{"_"}Assignment) no longer allows setting the CPU aspect of a task to a non-static value. While this was allowed, an implementation would have had to come up with a creative interpretation of the Ada 2012 requirement to define the association of tasks to processors statically. As such, the new check is more likely to catch bugs than break a working program. <br />
</Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Extensions to Ada 2012

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>13.e/5</MarginText>
<MarginInfo items={["AI12-0291-1"]} />
<Admonition type="aarm" aarm="note">
The Jorvik profile is new. <br />
</Admonition>
</AnnotatedOnly>

