---
sidebar_position:  90
---

# 11.2 Exception Handlers

:::warning
This Reference Manual output has not been verified,
and may contain omissions or errors.
Report any problems on the [tracking issue](https://github.com/ada-lang-io/ada-lang-io/issues/20)
:::

import Admonition from "@theme/Admonition";
import AnnotatedOnly from "@site/src/components/AnnotatedOnly";
import CodeBlock from "@theme/CodeBlock";
import MarginText from "@site/src/components/MarginText";
import MarginInfo from "@site/src/components/MarginInfo";

<MarginText>1</MarginText>
<p>[The response to one or more exceptions is specified by an <code><a href="../AA-11/AA-11.2#S0305">exception_handler</a></code>.] <br /></p>


#### Syntax

<MarginText>2</MarginText>

<CodeBlock>
<code>handled_sequence_of_statements</code><a id="S0304"></a><code> ::= </code><br />     <code><a href="../AA-5/AA-5.1#S0166">sequence_of_statements</a></code><br />  [<strong>exception</strong><br />     <code><a href="../AA-11/AA-11.2#S0305">exception_handler</a></code><br />    {"{"}<code><a href="../AA-11/AA-11.2#S0305">exception_handler</a></code>{"}"}]<br />

</CodeBlock>
<MarginText>3/5</MarginText>
<MarginInfo items={["AI12-0212-1"]} />

<CodeBlock>
<code>exception_handler</code><a id="S0305"></a><code> ::= </code><br />  <strong>when</strong> [<code><a href="../AA-11/AA-11.2#S0306">choice_parameter_specification</a></code>:] <code><a href="../AA-11/AA-11.2#S0307">exception_choice</a></code> {"{"}'|'  <code><a href="../AA-11/AA-11.2#S0307">exception_choice</a></code>{"}"} ={">"}<br />     <code><a href="../AA-5/AA-5.1#S0166">sequence_of_statements</a></code><br />

</CodeBlock>
<MarginText>4</MarginText>

<CodeBlock>
<code>choice_parameter_specification</code><a id="S0306"></a><code> ::= </code><code><a href="../AA-3/AA-3.1#S0022">defining_identifier</a></code><br />

</CodeBlock>
<MarginText>5</MarginText>

<CodeBlock>
<code>exception_choice</code><a id="S0307"></a><code> ::= </code><em>exception_</em><code><a href="../AA-4/AA-4.1#S0091">name</a></code> | <strong>others</strong><br />

</CodeBlock>
<AnnotatedOnly>
<MarginText>5.a</MarginText>
<Admonition type="aarm" aarm="note">
<strong>To be honest: </strong>&ldquo;<em>Handler</em>&rdquo; is an abbreviation for &ldquo;<code><a href="../AA-11/AA-11.2#S0305">exception_handler</a></code>&rdquo;.<br /></Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>5.b/3</MarginText>
<MarginInfo items={["AI05-0299-1"]} />
<Admonition type="aarm" aarm="note">
Within this clause, we sometimes abbreviate &ldquo;<code><a href="../AA-11/AA-11.2#S0307">exception_choice</a></code>&rdquo; to &ldquo;<em>choice</em>&rdquo;. <br /></Admonition>
</AnnotatedOnly>


#### Legality Rules

<MarginText>5.1/4</MarginText>
<MarginInfo items={["AI12-0022-1"]} />
<p>An <em>exception_</em><code><a href="../AA-4/AA-4.1#S0091">name</a></code> of an <code><a href="../AA-11/AA-11.2#S0307">exception_choice</a></code> shall denote an exception.<br /></p>

<MarginText>6</MarginText>
<p>A choice with an <em>exception_</em><code><a href="../AA-4/AA-4.1#S0091">name</a></code> <em>covers</em> the named exception. A choice with <strong>others</strong> covers all exceptions not named by previous choices of the same <code><a href="../AA-11/AA-11.2#S0304">handled_sequence_of_statements</a></code>. Two choices in different <code><a href="../AA-11/AA-11.2#S0305">exception_handler</a></code>s of the same <code><a href="../AA-11/AA-11.2#S0304">handled_sequence_of_statements</a></code> shall not cover the same exception. <br /></p>

<AnnotatedOnly>
<MarginText>6.a</MarginText>
<Admonition type="aarm" aarm="ramification">
<strong></strong>Two <code><a href="../AA-11/AA-11.2#S0307">exception_choice</a></code>s of the same <code><a href="../AA-11/AA-11.2#S0305">exception_handler</a></code> may cover the same exception. For example, given two renaming declarations in separate packages for the same exception, one may nevertheless write, for example, &ldquo;<strong>when</strong> Ada.Text_IO.Data_Error | My_Seq_IO.Data_Error ={">"}&rdquo;.<br /></Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>6.b</MarginText>
<Admonition type="aarm" aarm="note">
An <strong>others</strong> choice even covers exceptions that are not visible at the place of the handler. Since exception raising is a dynamic activity, it is entirely possible for an <strong>others</strong> handler to handle an exception that it could not have named. <br /></Admonition>
</AnnotatedOnly>

<MarginText>7</MarginText>
<p>A choice with <strong>others</strong> is allowed only for the last handler of a <code><a href="../AA-11/AA-11.2#S0304">handled_sequence_of_statements</a></code> and as the only choice of that handler.<br /></p>

<MarginText>8</MarginText>
<p>An <em>exception_</em><code><a href="../AA-4/AA-4.1#S0091">name</a></code> of a choice shall not denote an exception declared in a generic formal package. <br /></p>

<AnnotatedOnly>
<MarginText>8.a</MarginText>
<Admonition type="aarm" aarm="reason">
<strong></strong>This is because the compiler doesn't know the identity of such an exception, and thus can't enforce the coverage rules. <br /></Admonition>
</AnnotatedOnly>


#### Static Semantics

<MarginText>9</MarginText>
<p>A <code><a href="../AA-11/AA-11.2#S0306">choice_parameter_specification</a></code> declares a <em>choice parameter</em>, which is a constant object of type Exception_Occurrence (see <a href="../AA-11/AA-11.4#Subclause_11.4.1">11.4.1</a>). During the handling of an exception occurrence, the choice parameter, if any, of the handler represents the exception occurrence that is being handled.<br /></p>


#### Dynamic Semantics

<MarginText>10</MarginText>
<p>The execution of a <code><a href="../AA-11/AA-11.2#S0304">handled_sequence_of_statements</a></code> consists of the execution of the <code><a href="../AA-5/AA-5.1#S0166">sequence_of_statements</a></code>. [The optional handlers are used to handle any exceptions that are propagated by the <code><a href="../AA-5/AA-5.1#S0166">sequence_of_statements</a></code>.] <br /></p>


#### Examples

<MarginText>11</MarginText>
<p><em>Example of an exception handler:</em> <br /></p>

<MarginText>12/5</MarginText>
<MarginInfo items={["AI12-0178-1"]} />
<CodeBlock language="ada">
begin{"\n"}   Open(File, In_File, "input.txt");   -- see <a href="../AA-A/AA-A.8#Subclause_A.8.2">A.8.2</a>{"\n"}exception{"\n"}   when E : Name_Error ={">"}{"\n"}      Put("Cannot open input file : ");{"\n"}      Put_Line(Ada.Exceptions.Exception_Message (E));  -- see <a href="../AA-11/AA-11.4#Subclause_11.4.1">11.4.1</a>{"\n"}      raise;{"\n"}end;{"\n"}

</CodeBlock>
<AnnotatedOnly>

#### Extensions to Ada 83

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>12.a</MarginText>
<Admonition type="aarm" aarm="note">
The syntax rule for <code><a href="../AA-11/AA-11.2#S0305">exception_handler</a></code> is modified to allow a <code><a href="../AA-11/AA-11.2#S0306">choice_parameter_specification</a></code>.<br /></Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>12.b/2</MarginText>
<MarginInfo items={["AI95-00114-01"]} />
<Admonition type="aarm" aarm="note">
Different <code><a href="../AA-11/AA-11.2#S0307">exception_choice</a></code>s of the same <code><a href="../AA-11/AA-11.2#S0305">exception_handler</a></code> may cover the same exception. This allows for &ldquo;when Numeric_Error | Constraint_Error ={">"}&rdquo; even though Numeric_Error is a rename of Constraint_Error. This also allows one to &ldquo;with&rdquo; two different I/O packages, and then write, for example, &ldquo;when Ada.Text_IO.Data_Error | My_Seq_IO.Data_Error ={">"}&rdquo; even though these might both be renames of the same exception. <br /></Admonition>
</AnnotatedOnly>

<AnnotatedOnly>

#### Wording Changes from Ada 83

</AnnotatedOnly>
<AnnotatedOnly>
<MarginText>12.c</MarginText>
<Admonition type="aarm" aarm="note">
The syntax rule for <code><a href="../AA-11/AA-11.2#S0304">handled_sequence_of_statements</a></code> is new. These are now used in all the places where handlers are allowed. This obviates the need to explain (in Clauses 5, 6, 7, and 9) what portions of the program are handled by the handlers. Note that there are more such cases in Ada 95.<br /></Admonition>
</AnnotatedOnly>

<AnnotatedOnly>
<MarginText>12.d</MarginText>
<Admonition type="aarm" aarm="note">
The syntax rule for <code><a href="../AA-11/AA-11.2#S0306">choice_parameter_specification</a></code> is new. <br /></Admonition>
</AnnotatedOnly>

